(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7e54"],{7984:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-row",[s("b-col",{attrs:{lg:"3"}},[s("b-card",[s("p",[e._v(e._s(e.$t("nav.opac.Book_review_management")))]),s("b-col",{staticStyle:{"margin-top":"10px"},attrs:{md:"12"}},[s("p",[e._v(e._s(e.$t("search_user")))]),s("b-form-input",{staticClass:"mb-1",attrs:{id:"priority",placeholder:e.$t("name"),type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"primary"},on:{click:function(t){return e.createGroup()}}},[s("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"14"}}),e._v(" "+e._s(e.$t("view"))+" ")],1)],1)],1)],1),s("b-col",{attrs:{lg:"9"}},[s("b-card",{staticStyle:{overflow:"hidden"}},[s("b-row",[s("b-col",{staticStyle:{display:"flex"}},[s("p",{staticStyle:{padding:"10px","border-radius":"5px","margin-right":"20px",cursor:"pointer"},style:{"background-color":1===e.listType?"#ffb638":"",color:1===e.listType?"#fff":""},on:{click:function(t){return e.selectListType(1)}}},[e._v(" "+e._s(e.$t("opac.book_review_management.all_review"))+" ")]),s("p",{staticStyle:{padding:"10px","border-radius":"5px","margin-right":"20px",cursor:"pointer"},style:{"background-color":2===e.listType?"#ffb638":"",color:2===e.listType?"#fff":""},on:{click:function(t){return e.selectListType(2)}}},[e._v(" "+e._s(e.$t("opac.book_review_management.Review_of_pending_reports_and_comments"))+" ")])]),s("b-col",{staticClass:"w-100 mb-1",attrs:{md:"2"}},[s("v-select",{attrs:{label:"Number of rows",options:e.sizeOptions,clearable:!1},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}})],1)],1),s("b-row",[2===e.listType?s("b-col",{attrs:{md:"3"}},[s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"success",size:"sm",disabled:e.getCallBatchOpare},on:{click:function(){e.passCommentBook()}}},[s("feather-icon",{attrs:{icon:"CheckIcon",size:"14"}}),e._v(" "+e._s(e.$t("Batch_pass"))+" ")],1)],1):e._e(),s("b-col",{attrs:{md:"3"}},[s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"danger",size:"sm",disabled:e.getCallBatchOpare},on:{click:function(){e.deleteCommentBook()}}},[s("feather-icon",{attrs:{icon:"XIcon",size:"14"}}),e._v(" "+e._s(e.$t("batch_deletion"))+" ")],1)],1)],1),s("b-table",{attrs:{items:e.commentList,responsive:"",fields:e.tableColumns,"primary-key":"id","show-empty":"","empty-text":"No matching records found"},scopedSlots:e._u([{key:"cell(select)",fn:function(t){return[s("b-form-checkbox",{attrs:{value:!0},model:{value:t.item.select,callback:function(s){e.$set(t.item,"select",s)},expression:"data.item.select"}})]}},{key:"cell(create_ts)",fn:function(t){return[s("p",{staticStyle:{"min-width":"100px"}},[e._v(" "+e._s(t.item.create_ts.split(" ")[0])+" ")])]}},{key:"cell(status)",fn:function(t){return[s("div",{staticStyle:{"min-width":"120px"}},[s("p",{style:{color:"01"===t.item.status?"#4B4B4B":"var(--danger)"}},[e._v(" "+e._s("01"===t.item.status?e.$t("normal"):"02"===t.item.status?e.$t("reported"):e.$t("filter_words"))+" ")]),"02"===t.item.status?s("p",{style:{color:"01"===t.item.status?"#4B4B4B":"var(--danger)"}},[e._v(" "+e._s(e.$t("opac.book_review_management.Whistleblower"))+": "+e._s(e.getReportedUserList(t.item.status_list))+" ")]):e._e()])]}},{key:"cell(opera)",fn:function(t){return[2===e.listType?s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{block:"",variant:"success",size:"sm"},on:{click:function(s){return e.passCommentBook(t.item.id)}}},[s("feather-icon",{attrs:{icon:"CheckIcon",size:"14"}}),e._v(" "+e._s(e.$t("pass"))+" ")],1):e._e(),s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{block:"",variant:"danger",size:"sm"},on:{click:function(s){return e.deleteCommentBook(t.item.id)}}},[s("feather-icon",{attrs:{icon:"XIcon",size:"14"}}),e._v(" "+e._s(e.$t("Delete"))+" ")],1)]}}])}),s("b-row",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"}},[e.totalRows?s("b-col",{staticClass:"mt-1"},[e._v(" "+e._s(e.$t("A_total_of_totalRows_items").replace("{totalRows}",e.totalRows))+" , "+e._s(e.$t("Which_page").replace("{currentPage}",e.currentPage))+" ")]):e._e(),s("b-col",[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.size,"first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item",align:"right",size:"md"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)],1)},r=[],n=s("c7eb"),i=s("1da1"),o=s("ade3"),c=(s("a15b"),s("d81d"),s("b0c0"),s("11de")),l=s("8226"),m=s("4797"),u=s("2924"),p=s("3b99"),b=s("1947"),h=s("a15b7"),d=s("b28b"),f=s("6190"),g=s("f902"),_=s("29a1"),v=s("205f"),w=s("5fda"),y=s("e98b"),k=s("aa59"),x=s("3135"),B=s("d247"),C=s("d6e4"),$=s("c3e6"),T=s("26d2"),L=s("4a7a"),z=s.n(L),O=(s("223c"),s("a18c"),s("e009")),R=(s("5c96"),{components:Object(o["a"])(Object(o["a"])(Object(o["a"])({vSelect:z.a,BForm:c["a"],BFormGroup:l["a"],BFormInput:m["a"],BFormRadioGroup:u["a"],BFormCheckboxGroup:p["a"],BButton:b["a"],BRow:h["a"],BCol:d["a"],BTab:f["a"],BTabs:g["a"],BTable:_["a"],BCard:v["a"],BAlert:w["a"],BBadge:y["a"],BLink:k["a"],BListGroup:x["a"],BListGroupItem:B["a"],BCardText:C["a"]},"BFormGroup",l["a"]),"BFormCheckbox",$["a"]),"BPagination",T["a"]),directives:{Ripple:O["a"]},data:function(){return{name:null,listType:1,commentList:[],tableColumns:[{key:"select",label:this.$t("Select")},{key:"user.username",label:"User",sortable:!0},{key:"content",label:"Book Review",sortable:!0},{key:"create_ts",label:"date",sortable:!0},{key:"status",label:"status",sortable:!0},{key:"opera",label:"",sortable:!0}],currentPage:1,totalRows:null,sizeOptions:[100,200,500,1e3,this.$t("All")],size:100}},computed:{getCallBatchOpare:function(){var e=!0;return this.commentList.map((function(t){t.select&&(e=!1)})),e},getReportedUserList:function(){var e=this;return function(t){var s=[];return t.map((function(t){"tw"===e.$i18n.locale?s.push(t.chinese_name):s.push(t.english_name)})),s.join(",")}}},watch:{currentPage:{handler:function(e,t){1===this.listType?this.getCommentList():2===this.listType&&this.getCommentImpeachList()}},size:{handler:function(e,t){this.size===this.$t("All")?(this.size=this.totalRows,1===this.listType?this.getCommentList():2===this.listType&&this.getCommentImpeachList()):this.size!==this.totalRows&&(1===this.listType?this.getCommentList():2===this.listType&&this.getCommentImpeachList())}}},created:function(){1===this.listType?this.getCommentList():2===this.listType&&this.getCommentImpeachList()},methods:{getCommentList:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var s,a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postRequest("/comment_book/comment_list/",{sno:e.name,page:e.currentPage,size:e.size});case 2:s=t.sent,200==s.status?(e.commentList=s.data.data,e.totalRows=s.data.meta.count):(a=s.errors.errors,r=e.alertMessage(a),e.messageShown(e.$t("error"),r,"error"));case 4:case"end":return t.stop()}}),t)})))()},getCommentImpeachList:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var s,a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postRequest("/comment_book/comment_impeach_list/",{page:e.currentPage,size:e.size});case 2:s=t.sent,200==s.status?(e.commentList=s.data.data,e.totalRows=s.data.meta.count):(a=s.errors.errors,r=e.alertMessage(a),e.messageShown(e.$t("error"),r,"error"));case 4:case"end":return t.stop()}}),t)})))()},deleteCommentBook:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$swal({title:"",text:"".concat(t.$t("Do_you_want_to_delete_this_item")),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("confirm"),cancelButtonText:t.$t("cancel"),customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then(function(){var s=Object(i["a"])(Object(n["a"])().mark((function s(a){var r,i,o,c;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.value){s.next=15;break}if(r=[],e?r.push(e):t.commentList.map((function(e){e.select&&r.push(e.id)})),i=null,1!==t.listType){s.next=10;break}return s.next=7,t.postRequest("/comment_book/delete_list/",{ids:r});case 7:i=s.sent,s.next=14;break;case 10:if(2!==t.listType){s.next=14;break}return s.next=13,t.postRequest("/comment_book/comment_impeach_operate/",{ids:r,type:"delete"});case 13:i=s.sent;case 14:200==i.status?(1===t.listType?t.getCommentList():2===t.listType&&t.getCommentImpeachList(),t.messageShown(t.$t("success"),t.$t("successfully_delete"),"success")):(o=i.errors.errors,c=t.alertMessage(o),t.messageShown(t.$t("error"),c,"error"));case 15:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}());case 1:case"end":return s.stop()}}),s)})))()},passCommentBook:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function s(){var a,r,i,o;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=[],e?a.push(e):t.commentList.map((function(e){e.select&&a.push(e.id)})),s.next=4,t.postRequest("/comment_book/comment_impeach_operate/",{ids:a,type:"pass"});case 4:r=s.sent,200==r.status?(t.getCommentImpeachList(),t.messageShown(t.$t("success"),t.$t("successfully_delete"),"success")):(i=r.errors.errors,o=t.alertMessage(i),t.messageShown(t.$t("error"),o,"error"));case 6:case"end":return s.stop()}}),s)})))()},selectListType:function(e){this.listType!==e&&(this.currentPage=1,this.size=100,this.totalRows=null,this.listType=e,1===this.listType?this.getCommentList():this.getCommentImpeachList())},messageShown:function(e,t,s){this.$swal({title:e,html:t,icon:s,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})}}}),j=R,S=s("2877"),I=Object(S["a"])(j,a,r,!1,null,null,null);t["default"]=I.exports}}]);