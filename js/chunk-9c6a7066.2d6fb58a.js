(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c6a7066"],{3990:function(e,t,a){},"8c71":function(e,t,a){e.exports=a.p+"img/calendar-illustration.fcb4640f.png"},"99a5":function(e,t,a){"use strict";a("3990")},a4b2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-calendar overflow-hidden border"},[a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col app-calendar-sidebar flex-grow-0 overflow-hidden d-flex flex-column",class:{show:e.isCalendarOverlaySidebarActive}},[a("calendar-sidebar",{attrs:{"is-event-handler-sidebar-active":e.isEventHandlerSidebarActive},on:{"update:isEventHandlerSidebarActive":function(t){e.isEventHandlerSidebarActive=t},"update:is-event-handler-sidebar-active":function(t){e.isEventHandlerSidebarActive=t}}})],1),a("div",{staticClass:"col position-relative"},[a("div",{staticClass:"card shadow-none border-0 mb-0 rounded-0"},[a("div",{staticClass:"card-body pb-0"},[a("full-calendar",{ref:"refCalendar",staticClass:"full-calendar",attrs:{options:e.calendarOptions}})],1)])]),a("div",{staticClass:"body-content-overlay",class:{show:e.isCalendarOverlaySidebarActive},on:{click:function(t){e.isCalendarOverlaySidebarActive=!1}}}),a("calendar-event-handler",{attrs:{event:e.event,"clear-event-data":e.clearEventData},on:{"remove-event":e.removeEvent,"add-event":e.addEvent,"update-event":e.updateEvent},model:{value:e.isEventHandlerSidebarActive,callback:function(t){e.isEventHandlerSidebarActive=t},expression:"isEventHandlerSidebarActive"}})],1)])},r=[],c=a("f5ff"),i=a("ed09"),l=a("4360"),s=(a("a15b"),a("d3b7"),a("7f80")),d={namespaced:!0,state:{calendarOptions:[{color:"danger",label:"Personal"},{color:"primary",label:"Business"},{color:"warning",label:"Family"},{color:"success",label:"Holiday"},{color:"info",label:"ETC"}],selectedCalendars:["Personal","Business","Family","Holiday","ETC"]},getters:{},mutations:{SET_SELECTED_EVENTS:function(e,t){e.selectedCalendars=t}},actions:{fetchEvents:function(e,t){var a=t.calendars;return new Promise((function(e,t){s["a"].get("/apps/calendar/events",{params:{calendars:a.join(",")}}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},addEvent:function(e,t){var a=t.event;return new Promise((function(e,t){s["a"].post("/apps/calendar/events",{event:a}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},updateEvent:function(e,t){var a=t.event;return new Promise((function(e,t){s["a"].post("/apps/calendar/events/".concat(a.id),{event:a}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},removeEvent:function(e,t){var a=t.id;return new Promise((function(e,t){s["a"].delete("/apps/calendar/events/".concat(a)).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}}},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-wrapper d-flex justify-content-between flex-column flex-grow-1"},[n("div",{staticClass:"p-2"},[n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{"aria-controls":"sidebar-add-new-event","aria-expanded":String(e.isEventHandlerSidebarActive),variant:"primary",block:""},on:{click:function(t){return e.$emit("update:isEventHandlerSidebarActive",!0)}}},[e._v(" Add Event ")]),n("div",{staticClass:"mt-3"},[e._m(0),n("b-form-checkbox",{staticClass:"mb-1",model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" View All ")]),n("b-form-group",[n("b-form-checkbox-group",{attrs:{name:"event-filter",stacked:""},model:{value:e.selectedCalendars,callback:function(t){e.selectedCalendars=t},expression:"selectedCalendars"}},e._l(e.calendarOptions,(function(t){return n("b-form-checkbox",{key:t.label,staticClass:"mb-1",class:"custom-control-"+t.color,attrs:{name:"event-filter",value:t.label}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1),n("b-img",{attrs:{src:a("8c71")}})],1)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",{staticClass:"app-label section-label mb-1"},[a("span",{staticClass:"align-middle"},[e._v("Calendars")])])}],u=a("1947"),f=a("4918"),p=a("c3e6"),b=a("8226"),m=a("3b99"),E=a("e009");a("d81d");function h(){var e=Object(i["computed"])((function(){return l["a"].state.calendar.calendarOptions})),t=Object(i["computed"])({get:function(){return l["a"].state.calendar.selectedCalendars},set:function(e){l["a"].commit("calendar/SET_SELECTED_EVENTS",e)}}),a=Object(i["computed"])({get:function(){return t.value.length===e.value.length},set:function(a){a?t.value=e.value.map((function(e){return e.label})):t.value.length===e.value.length&&(t.value=[])}});return{calendarOptions:e,selectedCalendars:t,checkAll:a}}var g={directives:{Ripple:E["a"]},components:{BButton:u["a"],BImg:f["a"],BFormCheckbox:p["a"],BFormGroup:b["a"],BFormCheckboxGroup:m["a"]},props:{isEventHandlerSidebarActive:{type:Boolean,require:!0}},setup:function(){var e=h(),t=e.calendarOptions,a=e.selectedCalendars,n=e.checkAll;return{calendarOptions:t,selectedCalendars:a,checkAll:n}}},C=g,O=a("2877"),y=Object(O["a"])(C,o,v,!1,null,null,null),S=y.exports,A=a("1732"),k=(a("a4d3"),a("e01a"),a("e9c4"),a("b64b"),a("3cdd")),x=a("3e32"),w=a("e44e"),j=a("a20c"),_=a("04b0"),H=a("223c");function T(){var e=Object(_["useToast"])(),t=Object(i["ref"])(null),a=null;Object(i["onMounted"])((function(){a=t.value.getApi()}));var n={Business:"primary",Holiday:"success",Personal:"danger",Family:"warning",ETC:"info"},r={title:"",start:"",end:"",allDay:!1,url:"",extendedProps:{calendar:"",guests:[],location:"",description:""}},c=Object(i["ref"])(JSON.parse(JSON.stringify(r))),s=function(){c.value=JSON.parse(JSON.stringify(r))},d=function(t,n,r){e({component:H["a"],props:{title:"Event Updated",icon:"CheckIcon",variant:"success"}});for(var c=a.getEventById(t.id),i=0;i<n.length;i++){var l=n[i];c.setProp(l,t[l])}c.setDates(t.start,t.end,{allDay:t.allDay});for(var s=0;s<r.length;s++){var d=r[s];c.setExtendedProp(d,t.extendedProps[d])}},o=function(t){e({component:H["a"],props:{title:"Event Removed",icon:"TrashIcon",variant:"danger"}}),a.getEventById(t).remove()},v=function(e){var t=e.id,a=e.title,n=e.start,r=e.end,c=e.extendedProps,i=c.calendar,l=c.guests,s=c.location,d=c.description,o=e.allDay;return{id:t,title:a,start:n,end:r,extendedProps:{calendar:i,guests:l,location:s,description:d},allDay:o}},u=function(e){l["a"].dispatch("calendar/addEvent",{event:e}).then((function(){b()}))},f=function(e){l["a"].dispatch("calendar/updateEvent",{event:e}).then((function(e){var t=e.data.event,a=["id","title","url"],n=["calendar","guests","location","description"];d(t,a,n)}))},p=function(){var e=c.value.id;l["a"].dispatch("calendar/removeEvent",{id:e}).then((function(){o(e)}))},b=function(){a.refetchEvents()},m=Object(i["computed"])((function(){return l["a"].state.calendar.selectedCalendars}));Object(i["watch"])(m,(function(){b()}));var E=function(t,a){t&&l["a"].dispatch("calendar/fetchEvents",{calendars:m.value}).then((function(e){a(e.data)})).catch((function(){e({component:H["a"],props:{title:"Error fetching calendar events",icon:"AlertTriangleIcon",variant:"danger"}})}))},h=Object(i["ref"])({plugins:[k["b"],j["a"],x["a"],w["a"]],initialView:"dayGridMonth",headerToolbar:{start:"sidebarToggle, prev,next, title",end:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},events:E,editable:!0,eventResizableFromStart:!0,dragScroll:!0,dayMaxEvents:2,navLinks:!0,eventClassNames:function(e){var t=e.event,a=n[t._def.extendedProps.calendar];return["bg-light-".concat(a)]},eventClick:function(e){var t=e.event;c.value=v(t),g.value=!0},customButtons:{sidebarToggle:{text:"sidebar",click:function(){C.value=!C.value}}},dateClick:function(e){c.value=JSON.parse(JSON.stringify(Object.assign(c.value,{start:e.date}))),g.value=!0},eventDrop:function(e){var t=e.event;f(v(t))},eventResize:function(e){var t=e.event;f(v(t))},direction:Object(i["computed"])((function(){return l["a"].state.appConfig.isRTL?"rtl":"ltr"})),rerenderDelay:350}),g=Object(i["ref"])(!1),C=Object(i["ref"])(!1);return{refCalendar:t,isCalendarOverlaySidebarActive:C,calendarOptions:h,event:c,clearEventData:s,addEvent:u,updateEvent:f,removeEvent:p,refetchEvents:b,fetchEvents:E,isEventHandlerSidebarActive:g}}var D={components:{FullCalendar:c["a"],CalendarSidebar:S,CalendarEventHandler:A["a"]},setup:function(){var e="calendar";l["a"].hasModule(e)||l["a"].registerModule(e,d),Object(i["onUnmounted"])((function(){l["a"].hasModule(e)&&l["a"].unregisterModule(e)}));var t=T(),a=t.refCalendar,n=t.isCalendarOverlaySidebarActive,r=t.event,c=t.clearEventData,s=t.addEvent,o=t.updateEvent,v=t.removeEvent,u=t.fetchEvents,f=t.refetchEvents,p=t.calendarOptions,b=t.isEventHandlerSidebarActive;return u(),{refCalendar:a,isCalendarOverlaySidebarActive:n,event:r,clearEventData:c,addEvent:s,updateEvent:o,removeEvent:v,refetchEvents:f,calendarOptions:p,isEventHandlerSidebarActive:b}}},P=D,B=(a("99a5"),Object(O["a"])(P,n,r,!1,null,null,null));t["default"]=B.exports}}]);