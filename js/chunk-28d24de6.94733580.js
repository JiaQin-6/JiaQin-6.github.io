(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28d24de6"],{"66be":function(e,t,s){e.exports=s.p+"img/book.573a5436.png"},a05e:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",[r("b-col",{attrs:{lg:"3"}},[r("b-card",[r("p",[e._v(e._s(e.$t("nav.opac.my_resources")))]),r("b-col",{staticStyle:{"margin-top":"10px"},attrs:{md:"12"}},[r("p",[e._v(e._s(e.$t("resource_name")))]),r("b-form-input",{staticClass:"mb-1",attrs:{id:"priority",placeholder:e.$t("resource_name"),type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"primary"},on:{click:function(t){return e.createGroup()}}},[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"14"}}),e._v(" "+e._s(e.$t("view"))+" ")],1)],1)],1)],1),r("b-col",{attrs:{lg:"9"}},[r("b-card",{staticStyle:{overflow:"hidden"}},[r("b-row",[r("b-col",{staticStyle:{display:"flex"}},[r("p",{staticStyle:{padding:"10px","border-radius":"5px","margin-right":"20px",cursor:"pointer"},style:{"background-color":"01"===e.listType?"#ffb638":"",color:"01"===e.listType?"#fff":""},on:{click:function(t){return e.selectListType("01")}}},[e._v(" "+e._s(e.$t("Passed"))+" ")]),r("p",{staticStyle:{padding:"10px","border-radius":"5px","margin-right":"20px",cursor:"pointer"},style:{"background-color":"00"===e.listType?"#ffb638":"",color:"00"===e.listType?"#fff":""},on:{click:function(t){return e.selectListType("00")}}},[e._v(" "+e._s(e.$t("Under_review"))+" ")]),r("p",{staticStyle:{padding:"10px","border-radius":"5px",cursor:"pointer"},style:{"background-color":"02"===e.listType?"#ffb638":"",color:"02"===e.listType?"#fff":""},on:{click:function(t){return e.selectListType("02")}}},[e._v(" "+e._s(e.$t("Returned"))+" ")])]),r("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1 mb-md-0",attrs:{cols:"12",md:"3"}},[r("v-select",{staticStyle:{width:"100%"},attrs:{label:"Number of rows",options:e.sizeOptions,clearable:!1},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}})],1)],1),r("b-row",[r("b-col",{attrs:{md:"3"}},["01"!==e.listType?r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"danger",size:"sm"},on:{click:function(t){return e.deleteMyResource()}}},[r("feather-icon",{attrs:{icon:"XIcon",size:"14"}}),e._v(" "+e._s(e.$t("batch_deletion"))+" ")],1):e._e()],1)],1),r("b-table",{attrs:{items:e.resourceList,responsive:"",fields:e.tableColumns,"primary-key":"id","show-empty":"","empty-text":"No matching records found"},scopedSlots:e._u(["01"!==e.listType?{key:"cell(select)",fn:function(t){return[r("b-form-checkbox",{attrs:{value:!0},model:{value:t.item.select,callback:function(s){e.$set(t.item,"select",s)},expression:"data.item.select"}})]}}:null,{key:"cell(resource)",fn:function(t){return[r("div",{staticStyle:{display:"flex",width:"280px"}},[r("div",{staticStyle:{width:"100px","margin-right":"10px"}},[t.item.cover_files[0]&&t.item.cover_files[0].file_url?r("img",{staticStyle:{width:"100%"},attrs:{src:t.item.cover_files[0]&&t.item.cover_files[0].file_url,alt:""}}):r("div",{staticStyle:{position:"relative"}},[r("p",{staticClass:"content_3",staticStyle:{width:"55%","font-size":"12px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},[e._v(" "+e._s(t.item.name)+" ")]),r("img",{staticStyle:{"max-width":"100%","max-height":"100%","object-fit":"cover",margin:"0 auto"},attrs:{src:s("66be"),alt:""}})])]),r("div",{staticStyle:{flex:"1"}},[r("p",{staticStyle:{margin:"0"}},[e._v(e._s(t.item.name))]),r("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(e.$t("author"))+": "+e._s(t.item.author)+" ")]),r("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(e.$t("category"))+": "+e._s(t.item.subject)+" ")]),r("p",{staticStyle:{margin:"0"}},[e._v("ACNO："+e._s(t.item.acno))])])])]}},"01"===e.listType?{key:"cell(number)",fn:function(t){return e._l(t.item.archive_files,(function(t,s){return r("p",{key:s},[e._v(" "+e._s(t.down_count)+" ")])}))}}:null,{key:"cell(file)",fn:function(t){return e._l(t.item.archive_files,(function(t,s){return r("p",{key:s,staticStyle:{width:"200px"}},[e._v(" "+e._s(t.file_url.split("/").pop())+" ")])}))}},{key:"cell(size)",fn:function(t){return e._l(t.item.archive_files,(function(t,s){return r("p",{key:s},[e._v(" "+e._s(t.file_size)+" ")])}))}},{key:"cell(opera)",fn:function(t){return[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"100px"},attrs:{block:"",variant:"d",size:"sm"},on:{click:function(s){return e.editResource(t.item.id)}}},[r("feather-icon",{attrs:{icon:"EditIcon",size:"14"}}),e._v(" "+e._s(e.$t("edit"))+" ")],1),"01"!==e.listType?r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"100px"},attrs:{block:"",variant:"danger",size:"sm"},on:{click:function(s){return e.deleteMyResource(t.item.id)}}},[r("feather-icon",{attrs:{icon:"XIcon",size:"14"}}),e._v(" "+e._s(e.$t("Delete"))+" ")],1):e._e()]}}],null,!0)}),r("b-row",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"}},[e.totalRows?r("b-col",{staticClass:"mt-1"},[e._v(" "+e._s(e.$t("A_total_of_totalRows_items").replace("{totalRows}",e.totalRows))+" , "+e._s(e.$t("Which_page").replace("{currentPage}",e.currentPage))+" ")]):e._e(),r("b-col",[r("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.size,"first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item",align:"right",size:"md"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)],1)},i=[],a=s("c7eb"),o=s("1da1"),l=s("ade3"),n=(s("b0c0"),s("d3b7"),s("159b"),s("11de")),c=s("8226"),u=s("4797"),p=s("2924"),b=s("3b99"),d=s("1947"),m=s("a15b7"),f=s("b28b"),h=s("6190"),_=s("f902"),y=s("29a1"),g=s("205f"),v=s("5fda"),w=s("e98b"),k=s("aa59"),x=s("3135"),$=s("d247"),S=s("d6e4"),z=s("c3e6"),R=s("26d2"),B=s("4a7a"),T=s.n(B),L=(s("223c"),s("a18c"),s("e009")),C={components:Object(l["a"])(Object(l["a"])(Object(l["a"])({vSelect:T.a,BForm:n["a"],BFormGroup:c["a"],BFormInput:u["a"],BFormRadioGroup:p["a"],BFormCheckboxGroup:b["a"],BButton:d["a"],BRow:m["a"],BCol:f["a"],BTab:h["a"],BTabs:_["a"],BTable:y["a"],BCard:g["a"],BAlert:v["a"],BBadge:w["a"],BLink:k["a"],BListGroup:x["a"],BListGroupItem:$["a"],BCardText:S["a"]},"BFormGroup",c["a"]),"BFormCheckbox",z["a"]),"BPagination",R["a"]),directives:{Ripple:L["a"]},data:function(){return{name:null,listType:"",resourceList:[],tableColumns:[{key:"select",label:this.$t("Select")},{key:"resource",label:this.$t("resource"),sortable:!0},{key:"create_ts",label:this.$t("Joining_date"),sortable:!0},{key:"file",label:this.$t("File"),sortable:!0},{key:"size",label:this.$t("size"),sortable:!0},{key:"download_count",label:this.$t("amount_of_downloads"),sortable:!0},{key:"opera",label:this.$t("Action")}],currentPage:1,totalRows:null,sizeOptions:[100,200,500,1e3,this.$t("All")],page:1,size:100}},watch:{currentPage:{handler:function(e,t){this.getElectronicResourcesListUser()}},size:{handler:function(e,t){this.size===this.$t("All")?(this.size=this.totalRows,this.getElectronicResourcesListUser()):this.size!==this.totalRows&&this.getElectronicResourcesListUser()}}},mounted:function(){this.selectListType("01")},methods:{getElectronicResourcesListUser:function(){var e=this;return Object(o["a"])(Object(a["a"])().mark((function t(){var s,r,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postRequest("/electronic_resources/electronic_resources_list_user/",{button_type:e.listType,name:e.name,page:e.page,size:e.size});case 2:s=t.sent,200==s.status?(e.resourceList=s.data.data,e.totalRows=s.data.meta.count,e.resourceList.forEach((function(e){e.select=null})),e.name&&0!==e.resourceList.length&&(e.listType="01"===e.resourceList[0].review_status?"01":"00"===e.resourceList[0].review_status?"00":"02")):(r=s.errors.errors,i=e.alertMessage(r),e.messageShown(e.$t("error"),i,"error"));case 4:case"end":return t.stop()}}),t)})))()},selectListType:function(e){this.listType!==e&&(this.listType=e,"01"===e?this.tableColumns=[{key:"resource",label:this.$t("resource"),sortable:!0},{key:"create_ts",label:this.$t("Joining_date"),sortable:!0},{key:"file",label:this.$t("File"),sortable:!0},{key:"size",label:this.$t("size"),sortable:!0},{key:"number",label:this.$t("amount_of_downloads"),sortable:!0},{key:"download_count",label:this.$t("amount_of_downloads"),sortable:!0},{key:"opera",label:this.$t("Action")}]:"01"!==e&&(this.tableColumns=[{key:"select",label:this.$t("Select")},{key:"resource",label:this.$t("resource"),sortable:!0},{key:"create_ts",label:this.$t("Joining_date"),sortable:!0},{key:"file",label:this.$t("File"),sortable:!0},{key:"size",label:this.$t("size"),sortable:!0},{key:"download_count",label:this.$t("amount_of_downloads"),sortable:!0},{key:"opera",label:this.$t("Action")}]),this.getElectronicResourcesListUser())},deleteMyResource:function(e){var t=this;return Object(o["a"])(Object(a["a"])().mark((function s(){var r,i,o,l;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=[],!e){s.next=5;break}r.push(e),s.next=9;break;case 5:if(t.resourceList.forEach((function(e){e.select&&r.push(e.id)})),0!==r.length){s.next=9;break}return t.messageShown(t.$t("error"),"請先選擇電子資源","error"),s.abrupt("return");case 9:return s.next=11,t.postRequest("/electronic_resources/deletes/",{ids:r});case 11:i=s.sent,200==i.status?(t.getElectronicResourcesListUser(),t.messageShown(t.$t("success"),t.$t("successfully_delete"),"success")):(o=i.errors.errors,l=t.alertMessage(o),t.messageShown(t.$t("error"),l,"error"));case 13:case"end":return s.stop()}}),s)})))()},messageShown:function(e,t,s){this.$swal({title:e,html:t,icon:s,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})},editResource:function(e){var t=this;return Object(o["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$router.push({path:"/opac/new-electronic-resources-added",query:{id:e,source:2}});case 1:case"end":return s.stop()}}),s)})))()}},created:function(){}},j=C,O=s("2877"),E=Object(O["a"])(j,r,i,!1,null,null,null);t["default"]=E.exports}}]);