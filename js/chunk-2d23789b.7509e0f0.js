(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23789b"],{fc19:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"},attrs:{cols:"12"}},[r("p",{staticStyle:{flex:"1"}},[e._v(e._s(e.$t("nav.opac.read_report_record")))]),r("div",[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",staticStyle:{width:"120px"},attrs:{block:"",variant:"primary",size:"sm"},on:{click:function(){e.$router.push("read-report-record-add")}}},[r("feather-icon",{attrs:{icon:"PlusIcon",size:"14"}}),e._v(" "+e._s(e.$t("add"))+" ")],1)],1)]),r("b-col",{staticStyle:{"margin-bottom":"10px",padding:"0 20px"},attrs:{cols:"12",lg:"2"}},[r("b-row",{staticStyle:{padding:"20px",margin:"0","background-color":"#fff",gap:"10px"}},e._l(e.readReportLeftList,(function(t,a){return r("b-col",{key:a,staticClass:"cursor-pointer",staticStyle:{padding:"0px"},attrs:{cols:"12"},on:{click:function(){e.read_record_type=t.read_type}}},[r("p",{staticStyle:{margin:"0",padding:"5px"},style:{"background-color":e.read_record_type==t.read_type?"#fdf2e4":"#fff"}},[e._v(" "+e._s(t&&t.label)+"（"+e._s(t.sum_count)+"） ")])])})),1)],1),r("b-col",{staticStyle:{padding:"0 10px"},attrs:{cols:"12",lg:"10"}},[r("div",{staticStyle:{"background-color":"#fff",padding:"20px"}},e._l(e.readReportRightList,(function(t,a){return r("b-col",{key:a,staticStyle:{"background-color":"#fff","padding-bottom":"15px"},attrs:{cols:"12"}},[r("b-row",[r("p",{staticStyle:{width:"100%","margin-bottom":"0",padding:"5px 10px","background-color":"var(--primary)",color:"#fff"}},[e._v(" "+e._s(t.label)+" ")]),e._l(t.datas,(function(t,a){return r("b-col",{key:a,staticStyle:{padding:"20px","border-bottom":"1px solid #ccc"},attrs:{cols:"12"}},[r("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.$t("opac.read_report_record.read_title"))+"："+e._s(t.title)+" ")]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.$t("opac.read_report_record.publisher"))+"："+e._s(t.create_by_en_us)+" ")]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(t.start_date.split(" ")[0])+e._s(e.$t("and"))+e._s(t.end_date.split(" ")[0])+" "+e._s(t.expire_day&&" | "+e.$t("opac.read_report_record.expires_in_days").replace("{days}",t.expire_day))+" ")]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.$t("opac.read_report_record.totalX").replace("{total}",t.submit_count))+" ")]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.$t("opac.read_report_record.receiveX").replace("{total}",t.already_count))+" ")]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.$t("opac.read_report_record.supplementarypaymentX").replace("{total}",t.replenish_count))+" ")]),r("div",{staticStyle:{display:"flex"}},["02"!==t.read_type?r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"120px",margin:"0 10px"},attrs:{variant:"primary",size:"sm"},on:{click:function(){e.$router.push({path:"read-report-score",query:{report_id:t.id}})}}},[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"14"}}),e._v(" "+e._s(e.$t("view"))+" ")],1):e._e(),"02"===t.read_type?r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"120px",margin:"0 10px"},attrs:{variant:"primary",size:"sm"},on:{click:function(){e.readReportPublish(t.id)}}},[r("feather-icon",{attrs:{icon:"PlusIcon",size:"14"}}),e._v(" "+e._s(e.$t("opac.read_report_record.published"))+" ")],1):e._e(),"02"===t.read_type?r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"120px",margin:"0 10px"},attrs:{variant:"d",size:"sm"},on:{click:function(){e.$router.push({path:"read-report-record-add",query:{id:t.id}})}}},[r("feather-icon",{attrs:{icon:"EditIcon",size:"14"}}),e._v(" "+e._s(e.$t("edit"))+" ")],1):e._e(),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticStyle:{width:"120px",margin:"0 10px"},attrs:{variant:"danger",size:"sm"},on:{click:function(){e.deleteReadReport(t.id)}}},[r("feather-icon",{attrs:{icon:"XIcon",size:"14"}}),e._v(" "+e._s(e.$t("Delete"))+" ")],1)],1)])}))],2)],1)})),1)])],1)},o=[],s=r("c7eb"),i=r("1da1"),n=r("ade3"),c=(r("b0c0"),r("d3b7"),r("159b"),r("11de")),p=r("8226"),d=r("4797"),l=r("2924"),u=r("3b99"),_=r("1947"),b=r("a15b7"),f=r("b28b"),m=r("6190"),g=r("f902"),h=r("205f"),y=r("5fda"),v=r("e98b"),x=r("aa59"),w=r("3135"),R=r("d247"),$=r("d6e4"),k=r("c3e6"),B=r("c43f"),L=r("4a7a"),S=r.n(L),j=r("e009"),O=r("c38f"),C=r.n(O),z={components:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({vSelect:S.a,BForm:c["a"],BFormGroup:p["a"],BFormInput:d["a"],BFormRadioGroup:l["a"],BFormCheckboxGroup:u["a"],BButton:_["a"],BRow:b["a"],BCol:f["a"],BTab:m["a"],BTabs:g["a"],BCard:h["a"],BAlert:y["a"],BBadge:v["a"],BLink:x["a"],BListGroup:w["a"],BListGroupItem:R["a"],BCardText:$["a"]},"BFormGroup",p["a"]),"BFormCheckbox",k["a"]),"flatPickr",C.a),"BFormFile",B["a"]),directives:{Ripple:j["a"]},computed:{headStyle:function(){return{"background-color":"#eaedf3",padding:"5px"}},marginTop:function(){return{"margin-top":"15px"}}},data:function(){return{read_record_type:"00",readReportLeftList:[],readReportRightList:[]}},watch:{read_record_type:{handler:function(e,t){this.getReadReportRightList()},immediate:!0}},created:function(){this.getGroups(),this.getReadReportLeftList(),this.getReadReportRightList()},methods:{getGroups:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var r,a,o,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRequest("/library_groups/");case 2:r=t.sent,200==r.status?(a=[],r.data.data.forEach((function(e,t){a.push({id:e.id,label:e.name})})),e.group_lists=a):(o=r.errors.errors,i=e.alertMessage(o),e.messageShown(e.$t("error"),i,"error"));case 4:case"end":return t.stop()}}),t)})))()},getReadReportLeftList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var r,a,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postRequest("/read_report/left_list/");case 2:r=t.sent,200==r.status?(e.readReportLeftList=r.data.data,e.readReportLeftList.forEach((function(t,r){"00"===t.read_type?t.label=e.$t("All"):"01"===t.read_type?t.label=e.$t("opac.read_report_record.progress"):"02"===t.read_type?t.label=e.$t("opac.read_report_record.unpublished"):"03"===t.read_type?t.label=e.$t("opac.read_report_record.expired"):"04"===t.read_type?t.label=e.$t("opac.read_report_record.not_started"):"05"===t.read_type&&(t.label=e.$t("opac.read_report_record.published_results"))}))):(a=r.errors.errors,o=e.alertMessage(a),e.messageShown(e.$t("error"),o,"error"));case 4:case"end":return t.stop()}}),t)})))()},getReadReportRightList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var r,a,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postRequest("/read_report/right_list/",{read_type:e.read_record_type,page:null,size:null});case 2:r=t.sent,200==r.status?(e.readReportRightList=r.data.data,e.readReportRightList.forEach((function(t,r){"01"===t.read_type?t.label=e.$t("opac.read_report_record.progress"):"02"===t.read_type?t.label=e.$t("opac.read_report_record.unpublished"):"03"===t.read_type?t.label=e.$t("opac.read_report_record.expired"):"04"===t.read_type?t.label=e.$t("opac.read_report_record.not_started"):"05"===t.read_type&&(t.label=e.$t("opac.read_report_record.published_results"))}))):(a=r.errors.errors,o=e.alertMessage(a),e.messageShown(e.$t("error"),o,"error"));case 4:case"end":return t.stop()}}),t)})))()},deleteReadReport:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$swal({title:"",text:"".concat(t.$t("Do_you_want_to_delete_this_item")),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("Yes"),cancelButtonText:t.$t("No"),customClass:{confirmButton:"btn btn-primary right-gap",cancelButton:"btn btn-danger"},buttonsStyling:!1}).then(function(){var r=Object(i["a"])(Object(s["a"])().mark((function r(a){var o,i,n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.isConfirmed){r.next=5;break}return r.next=3,t.deleteRequest("/read_report/".concat(e,"/"));case 3:o=r.sent,200==o.status?(t.getReadReportLeftList(),t.getReadReportRightList()):(i=o.errors.errors,n=t.alertMessage(i),t.messageShown(t.$t("error"),n,"error"));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},readReportPublish:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var a,o,i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.postRequest("/read_report/publish/",{report_id:e});case 2:a=r.sent,200==a.status?(t.messageShown(t.$t("success"),t.$t("successfully_edit"),"success"),t.getReadReportLeftList(),t.getReadReportRightList()):(o=a.errors.errors,i=t.alertMessage(o),t.messageShown(t.$t("error"),i,"error"));case 4:case"end":return r.stop()}}),r)})))()},messageShown:function(e,t,r){this.$swal({title:e,html:t,icon:r,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})}}},F=z,G=r("2877"),q=Object(G["a"])(F,a,o,!1,null,null,null);t["default"]=q.exports}}]);