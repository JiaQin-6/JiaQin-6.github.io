(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc234"],{"4d3a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",[r("b-col",{attrs:{lg:"12"}},[r("b-card",{attrs:{title:t.$t("reader_manage.reader_data_transfer.reader_data_transfer")}},[r("b-form",{on:{submit:function(t){t.preventDefault()}}},[r("div",[r("b-row",[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("sno"))+":")])]),r("b-col",{attrs:{sm:"2"}},[r("b-form-input",{attrs:{id:"input-small",placeholder:"SNO"},on:{input:function(e){t.search.sno_from=t.search.sno_from.toUpperCase()},blur:function(e){t.search.sno_from=t.search.sno_from.trim()}},model:{value:t.search.sno_from,callback:function(e){t.$set(t.search,"sno_from",e)},expression:"search.sno_from"}})],1),t._v(" "+t._s(t.$t("and"))+" "),r("b-col",{attrs:{sm:"2"}},[r("b-form-input",{attrs:{id:"input-small",placeholder:"SNO"},on:{input:function(e){t.search.sno_to=t.search.sno_to.toUpperCase()},blur:function(e){t.search.sno_to=t.search.sno_to.trim()}},model:{value:t.search.sno_to,callback:function(e){t.$set(t.search,"sno_to",e)},expression:"search.sno_to"}})],1),r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("class"))+":")])]),r("b-col",{attrs:{sm:"2"}},[r("b-form-input",{attrs:{id:"input-small",placeholder:t.$t("class")},model:{value:t.search.class_from,callback:function(e){t.$set(t.search,"class_from",e)},expression:"search.class_from"}})],1),t._v(" "+t._s(t.$t("and"))+" "),r("b-col",{attrs:{sm:"2"}},[r("b-form-input",{attrs:{id:"input-small",placeholder:t.$t("class")},model:{value:t.search.class_to,callback:function(e){t.$set(t.search,"class_to",e)},expression:"search.class_to"}})],1)],1),r("b-row",{style:t.marginTop},[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("User_group"))+":")])]),r("b-col",{attrs:{sm:"2"}},[r("v-select",{attrs:{options:t.user_grounds,reduce:function(t){return t.id}},model:{value:t.search.user_ground,callback:function(e){t.$set(t.search,"user_ground",e)},expression:"search.user_ground"}})],1),r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("Import_data"))+":")])]),r("b-col",{attrs:{sm:"2"}},[r("b-form-file",{ref:"school_seal",attrs:{id:"school-seal",placeholder:t.$t("Import_data"),"drop-placeholder":"Drop file here...","file-name-formatter":t.formatNames},on:{change:function(e){return t.uploadFile(e,"school_seal_file")}},model:{value:t.snoFile,callback:function(e){t.snoFile=e},expression:"snoFile"}})],1)],1)],1),r("b-row",{style:t.marginTop},[r("b-col",{attrs:{"offset-md":"5"}},[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1",attrs:{type:"submit",variant:"primary"},on:{click:t.submitData}},[t._v(" "+t._s(t.$t("add"))+" ")]),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(186, 191, 199, 0.15)",expression:"'rgba(186, 191, 199, 0.15)'",modifiers:{400:!0}}],attrs:{type:"reset",variant:"outline-secondary"},on:{click:t.resetData}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)],1)],1)],1)],1),r("b-col",{attrs:{lg:"12"}},[r("b-card",{attrs:{title:t.$t("reader_manage.reader_data_transfer.reader_data_transfer")}},[r("div",{attrs:{id:"report"}},[t.reportData&&0!==t.reportData.length?r("b-col",{staticStyle:{width:"auto",display:"inline-block"}},[r("b-button",{attrs:{variant:"primary"},on:{click:function(){t.reportData.map((function(e){t.$set(e,"checked",!0)}))}}},[t._v(t._s(t.$t("Select_All")))])],1):t._e(),t.reportData&&0!==t.reportData.length?r("b-col",{staticStyle:{width:"auto",display:"inline-block"}},[r("b-button",{attrs:{variant:"primary"},on:{click:function(){t.reportData.map((function(e){t.$set(e,"checked",!1)}))}}},[t._v(t._s(t.$t("deselect_all")))])],1):t._e(),t.reportData&&0!==t.reportData.length?r("b-col",{staticStyle:{width:"130px",display:"inline-block"}},[r("b-button",{attrs:{variant:"primary"},on:{click:t.rowSelected}},[t._v(t._s(t.$t("Conversion")))])],1):t._e(),r("b-row",{style:t.marginTop},[r("b-col",{attrs:{cols:"12"}},[r("b-table",{staticClass:"mb-0",attrs:{selectable:"",items:t.reportData,"show-empty":"","empty-text":"No matching records found",fields:t.reportFields,responsive:"",striped:""},scopedSlots:t._u([{key:"cell(checked)",fn:function(e){return[r("b-form-checkbox",{staticClass:"custom-control-primary",attrs:{value:!0,plain:""},model:{value:e.item.checked,callback:function(r){t.$set(e.item,"checked",r)},expression:"data.item.checked"}})]}}])})],1)],1)],1)])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.show_modal,expression:"show_modal"}],staticStyle:{position:"fixed",width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.5)",left:"0",top:"0","z-index":"1000"}},[r("div",{staticStyle:{position:"absolute","background-color":"#fff",left:"50%",top:"50%",width:"80%",padding:"20px",transform:"translate(-50%, -50%)","border-radius":"5px","border-top":"25px solid #fff2e2"}},[r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:""}},[r("b-form",{on:{submit:function(t){t.preventDefault()}}},[r("div",[r("b-row",[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("User_group"))+":")])]),r("b-col",{staticStyle:{display:"flex"}},[r("v-select",{staticStyle:{flex:"1","margin-right":"10px"},attrs:{options:t.user_grounds,reduce:function(t){return t.id}},model:{value:t.transfer.user_ground,callback:function(e){t.$set(t.transfer,"user_ground",e)},expression:"transfer.user_ground"}})],1),r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("class")))])]),r("b-col",{staticStyle:{display:"flex"}},[r("b-form-input",{staticStyle:{flex:"1","margin-right":"10px"},attrs:{id:"input-small",placeholder:t.$t("class")},model:{value:t.transfer.class,callback:function(e){t.$set(t.transfer,"class",e)},expression:"transfer.class"}})],1)],1),r("b-row",{style:t.marginTop},[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("Pre_loan_suspension_date")))])]),r("b-col",{attrs:{sm:"3"}},[r("flat-pickr",{staticClass:"form-control",model:{value:t.transfer.advance_borrow_date_from,callback:function(e){t.$set(t.transfer,"advance_borrow_date_from",e)},expression:"transfer.advance_borrow_date_from"}})],1),t._v(" "+t._s(t.$t("and"))+" "),r("b-col",{attrs:{sm:"3"}},[r("flat-pickr",{staticClass:"form-control",model:{value:t.transfer.advance_borrow_date_to,callback:function(e){t.$set(t.transfer,"advance_borrow_date_to",e)},expression:"transfer.advance_borrow_date_to"}})],1)],1),r("b-row",{style:t.marginTop},[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("Loan_suspension_date")))])]),r("b-col",{attrs:{sm:"3"}},[r("flat-pickr",{staticClass:"form-control",model:{value:t.transfer.borrow_date_from,callback:function(e){t.$set(t.transfer,"borrow_date_from",e)},expression:"transfer.borrow_date_from"}})],1),t._v(" "+t._s(t.$t("and"))+" "),r("b-col",{attrs:{sm:"3"}},[r("flat-pickr",{staticClass:"form-control",model:{value:t.transfer.borrow_date_to,callback:function(e){t.$set(t.transfer,"borrow_date_to",e)},expression:"transfer.borrow_date_to"}})],1),r("b-col",{attrs:{sm:"1"}})],1),r("b-row",{staticStyle:{border:"1px solid #ccc",padding:"20px 10px","margin-top":"20px"}},[r("b-col",{attrs:{sm:"1"}},[r("label",{attrs:{for:"input-small"}},[t._v(t._s(t.$t("delete_reader"))+":")])]),r("b-col",[r("b-button",{on:{click:t.transferDelete}},[t._v(t._s(t.$t("delete_reader")))])],1)],1),r("b-row",{style:t.marginTop},[r("b-col",{staticClass:"text-right",attrs:{md:"12"}},[r("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(){t.show_modal=!1}}},[t._v(t._s(t.$t("cancel"))+" "),r("font-awesome-icon",{attrs:{icon:"fa-solid fa-rotate-left"}})],1),r("b-button",{staticClass:"ml-2 px-5",attrs:{variant:"primary"},on:{click:function(e){return t.transferUpdate("2")}}},[t._v(t._s(t.$t("Conversion"))),r("font-awesome-icon",{staticClass:"ml-1",attrs:{icon:"fa-solid fa-check"}})],1)],1)],1)],1)])],1)],1)],1)])],1)},s=[],o=r("c7eb"),n=r("1da1"),l=(r("99af"),r("4de4"),r("b0c0"),r("d3b7"),r("ac1f"),r("5319"),r("841c"),r("498a"),r("159b"),r("29a1")),c=r("11de"),i=r("8226"),u=r("5e12"),d=r("4797"),_=r("2924"),f=r("9e14"),m=r("3b99"),p=r("1947"),b=r("a15b7"),h=r("b28b"),v=r("6190"),w=r("f902"),g=r("205f"),$=r("5fda"),k=r("e98b"),x=r("aa59"),y=r("ccc0"),B=r("3656"),D=r("26d2"),S=r("c3e6"),C=r("3135"),O=r("c43f"),j=r("4a7a"),F=r.n(j),T=(r("223c"),r("a18c"),r("e009")),R=r("c38f"),G=r.n(R),N=r("b76a"),z=r.n(N),A={components:{flatPickr:G.a,BTable:l["a"],vSelect:F.a,BForm:c["a"],BFormGroup:i["a"],BInputGroup:u["a"],BFormInput:d["a"],BFormRadioGroup:_["a"],BFormRadio:f["a"],BFormCheckboxGroup:m["a"],BButton:p["a"],BRow:b["a"],BCol:h["a"],BTab:v["a"],BTabs:w["a"],BCard:g["a"],BAlert:$["a"],BBadge:k["a"],BLink:x["a"],BInputGroupAppend:y["a"],BInputGroupPrepend:B["a"],BPagination:D["a"],BFormCheckbox:S["a"],BListGroup:C["a"],draggable:z.a,BFormFile:O["a"]},directives:{Ripple:T["a"]},computed:{headStyle:function(){return{"background-color":"#eaedf3",padding:"5px"}},marginTop:function(){return{"margin-top":"15px"}}},data:function(){return{search:{sno_from:null,sno_to:null,class_from:null,class_to:null,user_ground:null,snos:null},transfer:{user_ground:null,class:null,advance_borrow_date_from:null,advance_borrow_date_to:null,borrow_date_from:null,borrow_date_to:null},user_grounds:[],library_locations:[{value:!0,text:"Chinese"},{value:!1,text:"English"}],reportFields:[{key:"username",label:this.$t("sno"),sortable:!1},{key:"class_name",label:this.$t("class"),sortable:!1},{key:"chinese_name",label:this.$t("chinese_name"),sortable:!1},{key:"english_name",label:this.$t("english_name"),sortable:!1},{key:"checked",label:this.$t("Select"),sortable:!1}],reportData:[],totalRows:null,currentPage:1,size:100,sizeOptions:[100,200,500,1e3,this.$t("All")],snoFile:[],show_modal:!1}},watch:{currentPage:{handler:function(t,e){this.submitData()}},size:{handler:function(t,e){this.size===this.$t("All")?(this.size=this.totalRows,this.submitData()):this.size!==this.totalRows&&this.submitData()}}},created:function(){this.getGroups()},methods:{formatNames:function(t){return 1===t.length?t[0].name:"".concat(t.length," files selected")},getGroups:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var r,a,s,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("/library_groups/");case 2:r=e.sent,200==r.status?(a=[],r.data.data.forEach((function(t,e){a.push({id:t.id,label:t.name})})),t.user_grounds=a):(s=r.errors.errors,n=t.alertMessage(s),t.messageShown(t.$t("error"),n,"error"));case 4:case"end":return e.stop()}}),e)})))()},submitData:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var r,a,s,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["sno_from"]=t.search.sno_from,r["sno_to"]=t.search.sno_to,r["class_name_from"]=t.search.class_from,r["class_name_to"]=t.search.class_to,r["snos"]=t.search.snos,r["class_name_is_null"]=null,r["tier"]=t.search.user_ground,e.next=10,t.postRequest("/users/transfer_query/",r);case 10:a=e.sent,200==a.status?(t.reportData=t.reportData.concat(a.data.data),t.totalRows=t.reportData.length):(s=a.errors.errors,n=t.alertMessage(s),t.messageShown(t.$t("error"),n,"error"));case 12:case"end":return e.stop()}}),e)})))()},transferUpdate:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){var a,s,n,l,c;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=[],e.reportData.forEach((function(t){t.checked&&a.push(t.username)})),s={},s["class_name"]=e.transfer.class,s["tier"]=e.transfer.user_ground,s["pre_borrow_stop_start_date"]=e.transfer.advance_borrow_date_from,s["pre_borrow_stop_end_date"]=e.transfer.advance_borrow_date_to,s["borrow_stop_start_date"]=e.transfer.borrow_date_from,s["borrow_stop_end_date"]=e.transfer.borrow_date_to,s["status"]=t,s["snos"]=a,r.next=13,e.postRequest("/users/transfer_update/",s);case 13:n=r.sent,200==n.status?(e.reportData=[],e.resetData(),e.show_modal=!1,e.messageShown(e.$t("success"),e.$t("reader_manage.reader_data_transfer.reader_data_transfer_successful"),"success")):(l=n.errors.errors,c=e.alertMessage(l),e.messageShown(e.$t("error"),c,"error"));case 15:case"end":return r.stop()}}),r)})))()},transferDelete:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$swal({title:"",text:"".concat(t.$t("Do_you_want_to_delete_this_item")),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("confirm"),cancelButtonText:t.$t("cancel"),customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then(function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(r){var a,s,n,l,c;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.value){e.next=10;break}return a=[],t.reportData.forEach((function(t){t.checked&&a.push(t.username)})),s={},s["status"]="0",s["snos"]=a,e.next=8,t.postRequest("/users/transfer_delete/",s);case 8:n=e.sent,200==n.status?(t.reportData=[],t.resetData(),t.show_modal=!1,t.messageShown(t.$t("success"),t.$t("reader_manage.reader_data_transfer.reader_delete_successful"),"success")):(l=n.errors.errors,c=t.alertMessage(l),t.messageShown(t.$t("error"),c,"error"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},resetData:function(){this.search.sno_from=null,this.search.sno_to=null,this.search.call_number_from=null,this.search.call_number_to=null,this.search.user_ground=null,this.search.snos=null},rowSelected:function(t){var e=this.reportData.filter((function(t){return t.checked}));0!==e.length?this.show_modal=!0:this.$swal({title:"",text:this.$t("reader_manage.reader_data_transfer.please_select_book_data_transfer"),icon:"warning",showCancelButton:!1,confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("No"),customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(t){t.value}))},messageShown:function(t,e,r){this.$swal({title:t,html:e,icon:r,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})},uploadFile:function(t,e){var r=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,s;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.target.files[0],s=new FileReader,s.onload=function(t){var e=t.target.result.replace(/\r\n/g,"\n");r.search.snos=e.split("\n"),r.search.snos=r.search.snos.filter((function(t){return t.trim()}));for(var a=0;a<r.search.snos.length;a++)r.search.snos[a].trim()&&(r.search.snos[a]=r.search.snos[a].trim())},s.readAsText(a);case 4:case"end":return e.stop()}}),e)})))()}}},I=A,P=r("2877"),U=Object(P["a"])(I,a,s,!1,null,null,null);e["default"]=U.exports}}]);