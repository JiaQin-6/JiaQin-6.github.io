(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d38c4"],{"5cdd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-card",[a("p",[e._v(e._s(e.$t("opac.banner_management.OPAC_banner")))]),a("b-row",[a("b-col",{attrs:{md:"2"}},[a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-1",attrs:{block:"",variant:"success",size:"sm"},on:{click:function(){e.$refs["my-modal"].show()}}},[e._v(" "+e._s(e.$t("add"))+" ")])],1)],1),a("b-table",{attrs:{items:e.bannerList,responsive:"",fields:e.tableColumns,"primary-key":"id","show-empty":"","empty-text":"No matching records found","sort-desc":e.isSortDirDesc},on:{"update:sortDesc":function(t){e.isSortDirDesc=t},"update:sort-desc":function(t){e.isSortDirDesc=t}},scopedSlots:e._u([{key:"cell(photo_url)",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:e.item.photo_url,alt:""}})]}},{key:"cell(sort_no)",fn:function(t){return[a("b-form-input",{staticStyle:{"min-width":"100px"},attrs:{placeholder:""},model:{value:t.item.sort_no,callback:function(a){e.$set(t.item,"sort_no",a)},expression:"data.item.sort_no"}})]}},{key:"cell(enable)",fn:function(t){return[a("b-form-checkbox",{staticClass:"custom-control-success",attrs:{checked:t.item.enable,name:"check-button",switch:""},model:{value:t.item.enable,callback:function(a){e.$set(t.item,"enable",a)},expression:"data.item.enable"}})]}},{key:"cell(delete)",fn:function(t){return[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteBannerItem(t.item.id)}}},[e._v(" "+e._s(e.$t("Delete"))+" ")])]}},{key:"cell(edit)",fn:function(t){return[a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{block:"",variant:"success",size:"sm"},on:{click:function(a){return e.editBanner(t.item)}}},[e._v(" "+e._s(e.$t("save"))+" ")])]}}])})],1)],1)],1),a("b-modal",{ref:"my-modal",attrs:{id:"modal-xl","no-close-on-backdrop":"","hide-footer":"","hide-header-close":e.isTrue}},[a("b-col",{attrs:{md:"12"}},[a("div",{staticClass:"mb-2"},[a("p",[e._v(e._s(e.$t("opac.banner_management.add_banner")))])]),a("b-form-group",{attrs:{label:""}},[a("b-form-group",{attrs:{label:e.$t("order"),"label-for":"orderNo","label-cols-md":"'8"}},[a("b-form-input",{staticClass:"mb-1",attrs:{type:"number",id:"orderNo",size:"sm"},model:{value:e.formdata.order,callback:function(t){e.$set(e.formdata,"order",t)},expression:"formdata.order"}})],1),a("b-form-group",{attrs:{label:e.$t("opac.banner_management.Upload_Banner")+e.$t("The_image_must_be_1920_540_or_proportionally"),"label-for":"upload-banner","label-cols-md":"'4"}},[a("b-form-file",{ref:"upload-banner",attrs:{id:"upload-banner",accept:"image/*",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...","file-name-formatter":e.formatNames},model:{value:e.formdata.banner_file,callback:function(t){e.$set(e.formdata,"banner_file",t)},expression:"formdata.banner_file"}}),a("a",{staticStyle:{"word-break":"break-word"},attrs:{href:e.formdata.banner,target:"_blank"}},[e._v(e._s(e.formdata.banner))])],1)],1)],1),a("b-col",{staticClass:"text-right",attrs:{md:"12"}},[a("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(){e.$refs["my-modal"].hide(),e.formdata.order=null,e.formdata.banner=null}}},[e._v(e._s(e.$t("cancel")))]),a("b-button",{staticClass:"ml-2 px-5",attrs:{variant:"primary",size:"sm"},on:{click:e.addBanner}},[e._v(e._s(e.$t("Submit")))])],1)],1)],1)},n=[],o=a("c7eb"),s=a("1da1"),c=(a("b0c0"),a("a9e3"),a("d3b7"),a("159b"),a("6aac")),l=a("1eba"),i=a("0bd8"),u=a("2a2e"),b=a("6cf6"),d=a("0809"),m=a("a247"),f=a("2768"),p=a("29a1"),h=a("8361"),_=a("11de"),v=a("205f"),w=a("d247"),g=a("e8a3"),k=a("d6e4"),B=a("8226"),$=a("4797"),y=a("a15b7"),x=a("b28b"),S=a("1947"),j=a("c3e6"),C=a("c43f"),O=a("e6c7"),T=a("4a7a"),D=a.n(T),F=a("e009"),N={components:{BModal:c["a"],vSelect:D.a,BTableSimple:l["a"],BThead:i["a"],BTr:u["a"],BTh:b["a"],BTd:d["a"],BTbody:m["a"],BTfoot:f["a"],BTable:p["a"],BFormSelect:h["a"],BForm:_["a"],BCard:v["a"],BListGroupItem:w["a"],BAvatar:g["a"],BCardText:k["a"],BFormGroup:B["a"],BFormInput:$["a"],BRow:y["a"],BCol:x["a"],BButton:S["a"],BFormCheckbox:j["a"],BFormFile:C["a"]},data:function(){return{bannerList:[],isTrue:!0,isSortDirDesc:!1,formdata:{banner_file:null,banner:null,order:null},tableColumns:[{key:"photo_url",label:this.$t("banner")},{key:"sort_no",label:this.$t("order")},{key:"enable",label:this.$t("Enable")},{key:"delete",label:""},{key:"edit",label:""}]}},directives:{"b-modal":O["a"],Ripple:F["a"]},created:function(){this.getBanner()},methods:{formatNames:function(e){return 1===e.length?e[0].name:"".concat(e.length," files selected")},getBanner:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a,r,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRequest("/banner_photo/");case 2:a=t.sent,200==a.status?(e.bannerList=a.data.data,e.bannerList.forEach((function(e){"01"===e.enable?e.enable=!0:e.enable=!1}))):(r=a.errors.errors,n=e.alertMessage(r),e.messageShown(e.$t("error"),n,"error"));case 4:case"end":return t.stop()}}),t)})))()},deleteBannerItem:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$swal({title:"",text:"".concat(t.$t("Do_you_want_to_delete_this_item")),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("confirm"),cancelButtonText:t.$t("cancel"),customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then(function(){var a=Object(s["a"])(Object(o["a"])().mark((function a(r){var n,s,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.value){a.next=5;break}return a.next=3,t.postRequest("/banner_photo/delete_banner_photo/",{id:e});case 3:n=a.sent,200==n.status?(t.getBanner(),t.messageShown(t.$t("success"),t.$t("successfully_delete"),"success")):(s=n.errors.errors,c=t.alertMessage(s),t.messageShown(t.$t("error"),c,"error"));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},addBanner:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a,r,n,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.formdata.order&&e.formdata.banner_file){t.next=5;break}return e.messageShown(e.$t("error"),e.$t("Please_fill_in_valid_information"),"error"),t.abrupt("return");case 5:return a=new FormData,a.append("file",e.formdata.banner_file),a.append("sort_no",e.formdata.order),t.prev=8,t.next=11,e.postRequest("/banner_photo/submit_banner_photo/",a);case 11:r=t.sent,200==r.status?(e.$refs["my-modal"].hide(),e.getBanner(),e.messageShown(e.$t("success"),e.$t("Successfully_added"),"success")):(n=r.errors.errors,s=e.alertMessage(n),e.messageShown(e.$t("error"),s,"error")),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](8),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[8,15]])})))()},editBanner:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function a(){var r,n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.postRequest("/banner_photo/update_banner/",{id:e.id,sort_no:Number(e.sort_no),enable:e.enable?"01":"00"});case 2:r=a.sent,200==r.status?(t.getBanner(),t.messageShown(t.$t("success"),t.$t("successfully_edit"),"success")):(n=r.errors.errors,s=t.alertMessage(n),t.messageShown(t.$t("error"),s,"error"));case 4:case"end":return a.stop()}}),a)})))()},messageShown:function(e,t,a){this.$swal({title:e,html:t,icon:a,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})}}},z=N,R=a("2877"),L=Object(R["a"])(z,r,n,!1,null,null,null);t["default"]=L.exports}}]);