(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31826104"],{1569:function(e,t,a){e.exports=a.p+"img/createE.745fcc98.png"},"5d58":function(e,t,a){e.exports=a("d8d6")},"67bb":function(e,t,a){e.exports=a("f921")},7618:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a("5d58"),i=a.n(n),r=a("67bb"),s=a.n(r);function o(e){return o="function"===typeof s.a&&"symbol"===typeof i.a?function(e){return typeof e}:function(e){return e&&"function"===typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},o(e)}function l(e){return l="function"===typeof s.a&&"symbol"===o(i.a)?function(e){return o(e)}:function(e){return e&&"function"===typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":o(e)},l(e)}},"87b2":function(e,t,a){},"9b19":function(e,t,a){},"9deb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.V_loading,expression:"V_loading"}],staticClass:"container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"main_wrap"},[n("el-button",{staticClass:"addBtn2",staticStyle:{"border-radius":"5px","font-size":"16px"},attrs:{round:"",type:"primary",icon:"el-icon-arrow-left"},on:{click:function(t){return e.backChannelList(e.channelData.channelType.value)}}},[e._v(e._s(e.$t("Back")))])],1),n("div",{staticClass:"voucherChannel_item"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.channelData&&e.channelData.channelLogoUrl.value,expression:"channelData && channelData.channelLogoUrl.value"}],attrs:{alt:""}}),n("ul",[n("li",[e._v(e._s(e.channelData&&e.channelData.channelCode.value))]),n("li",{staticStyle:{"word-break":"break-word","font-weight":"bold","font-size":"19px"}},[e._v("\n          "+e._s(e.channelData&&e.channelData.channelName.value)+"\n        ")]),n("li",[n("i",{staticClass:"el-icon-location-information"}),e._v("\n          "+e._s(e.countryList[e.channelData&&e.channelData.channelCountry.value])+"\n        ")]),n("li",[n("i",{staticClass:"el-icon-message",staticStyle:{color:"#000"}}),e._v("\n          "+e._s(e.channelData&&e.channelData.channelEmail.value)+"\n        ")]),e.channelData&&e.channelData.phone?n("li",[n("i",{staticClass:"el-icon-phone-outline",staticStyle:{color:"#000"}}),e._v("\n          "+e._s(e.channelData&&e.channelData.phone)+"\n        ")]):e._e()]),n("el-button",{staticClass:"addBtn3",staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"mini",icon:"el-icon-s-tools"},on:{click:e.showEditDialog}},[e._v(e._s(e.$t("Modify")))])],1),e.voucherLength>0?n("div",{staticClass:"voucherData"},[n("div",{staticClass:"voucherDataItem"},[n("span",[e._v(e._s(e.$t("Total_Voucher")))]),n("span",{staticClass:"sum"},[e._v(e._s(e.totalVoucher||0))])]),n("div",{staticClass:"voucherDataItem"},[n("span",[e._v(e._s(e.$t("Total_Allocated")))]),n("span",{staticClass:"sum"},[e._v(e._s(e.totalAllocated||0))])]),n("div",{staticClass:"voucherDataItem"},[n("span",[e._v(e._s(e.$t("Total_Redeem")))]),n("span",{staticClass:"sum"},[e._v(e._s(e.totalRedeem||0))])])]):e._e(),n("p",{staticClass:"middle"},[n("span",[e._v(e._s(e.$t("E_Voucher")))]),n("el-button",{staticClass:"addBtn",staticStyle:{"border-radius":"20px","margin-right":"30px","font-size":"16px"},attrs:{round:"",type:"primary",icon:"el-icon-s-promotion"},on:{click:e.showAssignDialog}},[e._v(e._s(e.$t("Assign_eVoucher")))])],1),0==e.voucherLength?n("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"20px","margin-left":"20px"}},[n("div",{staticClass:"voucherHome"},[n("div",{staticClass:"content_text"},[n("h3",[e._v(e._s(e.$t("Assign_eVoucher")))]),n("p",[e._v("\n            "+e._s(e.$t("Create_eVoucher_tips"))+"\n          ")]),n("button",{attrs:{type:""},on:{click:e.showAssignDialog}},[e._v("\n            "+e._s(e.$t("Assign_Now"))+"\n          ")])]),n("img",{staticClass:"img2",attrs:{src:a("1569"),alt:""}})])]):e._e(),e.voucherLength>0?n("el-table",{attrs:{data:e.channelVoucherData,border:"",stripe:"","row-style":{height:"80px"}}},[n("el-table-column",{attrs:{label:e.$t("Voucher_Name"),prop:"ename","min-width":"120px"}}),n("el-table-column",{attrs:{label:e.$t("Product_Name"),prop:"productName","min-width":"120px"}}),n("el-table-column",{attrs:{label:e.$t("Quota"),prop:"number","min-width":"90px"}}),n("el-table-column",{attrs:{label:e.$t("Start_Date"),prop:"voucherStartTs","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.voucherStartTs.substring(0,10))+"\n        ")]}}],null,!1,620424393)}),n("el-table-column",{attrs:{label:e.$t("Expiration_Date"),prop:"voucherExpiredTs","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.voucherExpiredTs.substring(0,10))+"\n        ")]}}],null,!1,216390942)})],1):e._e(),n("el-dialog",{attrs:{title:e.$t("Assign_eVoucher"),visible:e.addDialogVisible,width:"560px",top:"200px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addedClosed}},[n("p",{staticStyle:{"margin-left":"25px","margin-bottom":"20px"}},[e._v("\n        "+e._s(e.$t("first_eVoucher"))+"\n        "),n("span",{staticStyle:{"font-weight":"bold","font-size":"18px"}},[e._v(e._s(e.channelData&&e.channelData.channelName.value))]),e._v("\n        ?\n      ")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"canBtn",on:{click:function(t){e.addDialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),n("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:e.showAssignDialog}},[e._v(e._s(e.$t("Sure_Assign_Now")))])],1)]),n("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.addDialogVisible2,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible2=t},close:e.addedClosed}},[n("el-form",{ref:"addruleFormRef",attrs:{model:e.ruleForm,"status-icon":"",rules:e.oneRules,"label-width":"132px"}},[n("el-form-item",{attrs:{label:e.$t("Merchant_Table_Label4")+":",prop:"channelLogoUrl.logoUrl"}},[e.channelData&&"2"!=e.channelData.channelType.value?n("div",{staticClass:"upload"},[n("dragUpload",{staticStyle:{"margin-left":"135px",width:"50%"},attrs:{isAvatar:e.isAvatar,fileType:"image",isShow:e.isShow,fixedNumberList:[7,5]},on:{GetUpload:function(t){e.GetUpload(t)},show:function(t){e.show(t)}}}),e.ruleForm.channelLogoUrl.logoUrl&&"editEquipment"==e.dialogStatus?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.ruleForm.channelLogoUrl.logoUrl,expression:"ruleForm.channelLogoUrl.logoUrl"}],staticClass:"img",attrs:{alt:""}}):e._e()],1):n("div",{staticClass:"upload"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.ruleForm.channelLogoUrl.logoUrl,expression:"ruleForm.channelLogoUrl.logoUrl"}],staticClass:"brokerImg",attrs:{alt:""}})])]),n("el-form-item",{attrs:{label:e.$t("Merchant_Table_Label2")+":",prop:"channelCode.code"}},[n("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule2"),disabled:e.ruleForm&&!e.ruleForm.channelCode.flag||e.channelData&&"2"==e.channelData.channelType.value},model:{value:e.ruleForm.channelCode.code,callback:function(t){e.$set(e.ruleForm.channelCode,"code",t)},expression:"ruleForm.channelCode.code"}})],1),n("el-form-item",{attrs:{label:"42822"!=e.AWSAccountData["custom:fileNo"]?e.$t("Merchant_Table_Label5")+":":"Channel Identity :",prop:"42822"!=e.AWSAccountData["custom:fileNo"]?"channelName.name":"channelName1.name"}},["42822"!=e.AWSAccountData["custom:fileNo"]?n("div",[n("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule5"),disabled:e.ruleForm&&!e.ruleForm.channelName.flag},model:{value:e.ruleForm.channelName.name,callback:function(t){e.$set(e.ruleForm.channelName,"name",t)},expression:"ruleForm.channelName.name"}})],1):n("div",[n("span",[e._v("繁體中文: ")]),n("el-input",{staticClass:"mleft1",staticStyle:{width:"78%","margin-top":"5px"},attrs:{type:"text",placeholder:"請輸入渠道碼身份",disabled:e.ruleForm&&!e.ruleForm.channelName1.flag},model:{value:e.ruleForm.channelName1.name.zh_tw,callback:function(t){e.$set(e.ruleForm.channelName1.name,"zh_tw",t)},expression:"ruleForm.channelName1.name.zh_tw"}}),n("span",[e._v("简体中文: ")]),n("el-input",{staticClass:"mleft1",staticStyle:{width:"78%","margin-top":"5px"},attrs:{type:"text",placeholder:"请输入渠道码身份",disabled:e.ruleForm&&!e.ruleForm.channelName1.flag},model:{value:e.ruleForm.channelName1.name.zh_cn,callback:function(t){e.$set(e.ruleForm.channelName1.name,"zh_cn",t)},expression:"ruleForm.channelName1.name.zh_cn"}}),n("span",{staticStyle:{"font-size":"15px"}},[e._v(" English : ")]),n("el-input",{staticClass:"mleft1",staticStyle:{width:"78%","margin-top":"5px"},attrs:{type:"text",placeholder:"Please enter channel identity",disabled:e.ruleForm&&!e.ruleForm.channelName1.flag},model:{value:e.ruleForm.channelName1.name.en_us,callback:function(t){e.$set(e.ruleForm.channelName1.name,"en_us",t)},expression:"ruleForm.channelName1.name.en_us"}})],1)]),"42822"!=e.AWSAccountData["custom:fileNo"]?n("el-form-item",{attrs:{label:e.$t("Merchant_Table_Label3")+":",prop:"channelEmail.email"}},[n("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule3"),disabled:e.ruleForm&&!e.ruleForm.channelEmail.flag||e.channelData&&"2"==e.channelData.channelType.value},model:{value:e.ruleForm.channelEmail.email,callback:function(t){e.$set(e.ruleForm.channelEmail,"email",t)},expression:"ruleForm.channelEmail.email"}})],1):e._e(),"42822"!=e.AWSAccountData["custom:fileNo"]?n("el-form-item",{attrs:{label:e.$t("Merchant_Table_Label6")+":",prop:"channelPhone.phone"}},[n("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule6"),disabled:e.channelData&&"2"==e.channelData.channelType.value},model:{value:e.ruleForm.channelPhone.phone,callback:function(t){e.$set(e.ruleForm.channelPhone,"phone",t)},expression:"ruleForm.channelPhone.phone"}})],1):e._e(),"42822"!=e.AWSAccountData["custom:fileNo"]?n("el-form-item",{attrs:{label:e.$t("Channel_Table_Label6")+":",prop:"country.country"}},[n("el-select",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{disabled:!e.ruleForm.country.flag,placeholder:e.$t("Channel_Form_rule6")},model:{value:e.ruleForm.country.country,callback:function(t){e.$set(e.ruleForm.country,"country",t)},expression:"ruleForm.country.country"}},e._l(e.countryOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"canBtn",on:{click:function(t){e.addDialogVisible2=!1}}},[e._v(e._s(e.$t("Cancel")))]),n("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:e.UpChannel}},[e._v(e._s(e.$t("Confirm")))])],1)],1),n("el-dialog",{attrs:{title:e.$t("Assign_eVoucher_to_merchant"),visible:e.assignDialogVisible,width:"720px","close-on-click-modal":!1},on:{"update:visible":function(t){e.assignDialogVisible=t},close:e.assignClosed}},[n("el-form",{ref:"assignFormRef",attrs:{model:e.assignForm,"status-icon":"",rules:e.twoRules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:e.$t("Merchant_Type")+":",prop:"merchantType"}},[n("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Merchant_Type_Tips"),disabled:""},model:{value:e.assignForm.merchantType,callback:function(t){e.$set(e.assignForm,"merchantType",t)},expression:"assignForm.merchantType"}},e._l(e.merchantTypeList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("el-form-item",{attrs:{label:e.$t("Merchant")+":",prop:"merchantId"}},[n("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Merchant_Name_Tips"),disabled:""},model:{value:e.assignForm.merchantId,callback:function(t){e.$set(e.assignForm,"merchantId",t)},expression:"assignForm.merchantId"}},e._l(e.merchantList,function(e){return n("el-option",{attrs:{label:e.name,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:e.$t("Voucher")+":",prop:"voucherId"}},[n("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Voucher_Form_rule6")},on:{change:e.chooseVoucher},model:{value:e.assignForm.voucherId,callback:function(t){e.$set(e.assignForm,"voucherId",t)},expression:"assignForm.voucherId"}},e._l(e.voucherList,function(e,t){return n("el-option",{key:t,attrs:{label:e.ename,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:e.$t("Quota")+":",prop:"quato"}},[n("el-input-number",{staticClass:"mlef2",staticStyle:{width:"90%"},model:{value:e.assignForm.quato,callback:function(t){e.$set(e.assignForm,"quato",t)},expression:"assignForm.quato"}})],1),n("el-form-item",{attrs:{label:e.$t("Voucher_Price")+":",prop:"sellingValue"}},[n("div",{staticClass:"timeBox"},[n("div",{staticClass:"item mlef3"},[n("span",[e._v(e._s(e.$t("Selling_Price")))]),n("el-input",{staticStyle:{width:"90%"},model:{value:e.assignForm.sellingValue,callback:function(t){e.$set(e.assignForm,"sellingValue",t)},expression:"assignForm.sellingValue"}},[n("i",{staticStyle:{color:"#000","font-style":"normal"},attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.assignForm.currency))])])],1),n("div",{staticClass:"item",staticStyle:{"margin-left":"90px"}},[n("span",[e._v(e._s(e.$t("Voucher_Value"))+" : ")]),n("span",[e._v(e._s(e.assignForm.currency+" "+e.assignForm.voucherValue))])])])]),2==e.assignForm.merchantType?n("el-form-item",{attrs:{label:e.$t("Commission_Type")+":",prop:"commissionType"}},[n("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Commission_Type_Tips")},model:{value:e.assignForm.commissionType,callback:function(t){e.$set(e.assignForm,"commissionType",t)},expression:"assignForm.commissionType"}},e._l(e.commissionTypeList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),2==e.assignForm.merchantType?n("el-form-item",{attrs:{label:e.$t("Commission")+":",prop:"commission"}},[n("el-input",{staticClass:"mlef2",staticStyle:{width:"90%"},model:{value:e.assignForm.commission,callback:function(t){e.$set(e.assignForm,"commission",t)},expression:"assignForm.commission"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:0==e.assignForm.commissionType,expression:"assignForm.commissionType == 0"}],staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v(e._s(e.assignForm.currency))]),n("i",{directives:[{name:"show",rawName:"v-show",value:1==e.assignForm.commissionType,expression:"assignForm.commissionType == 1"}],staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1):e._e(),n("el-form-item",{attrs:{label:e.$t("Active_dates")+":",prop:"endTime"}},[n("div",{staticClass:"timeBox"},[n("div",{staticClass:"item"},[n("span",[e._v(e._s(e.$t("Start_Date"))+" : ")]),n("el-date-picker",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:e.$t("Voucher_Form_rule8"),"picker-options":e.pickerOptions0},model:{value:e.assignForm.startDate,callback:function(t){e.$set(e.assignForm,"startDate",t)},expression:"assignForm.startDate"}})],1),n("div",{staticClass:"item"},[n("span",[e._v(e._s(e.$t("Expiration_Date"))+" : ")]),n("el-time-select",{staticClass:"mleft",staticStyle:{width:"90%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:e.$t("Voucher_Form_rule10")},model:{value:e.assignForm.startTime,callback:function(t){e.$set(e.assignForm,"startTime",t)},expression:"assignForm.startTime"}})],1)]),n("div",{staticClass:"timeBox",staticStyle:{"margin-bottom":"15px"}},[n("div",{staticClass:"item"},[n("span",[e._v(e._s(e.$t("Expiration_Date"))+" : ")]),n("el-date-picker",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:e.$t("Voucher_Form_rule9"),"picker-options":e.pickerOptions1},model:{value:e.assignForm.endDate,callback:function(t){e.$set(e.assignForm,"endDate",t)},expression:"assignForm.endDate"}})],1),n("div",{staticClass:"item"},[n("span",[e._v(e._s(e.$t("Expiration_Time"))+" : ")]),n("el-time-select",{staticClass:"mleft",staticStyle:{width:"90%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:e.$t("Voucher_Form_rule11")},model:{value:e.assignForm.endTime,callback:function(t){e.$set(e.assignForm,"endTime",t)},expression:"assignForm.endTime"}})],1)])])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"canBtn",on:{click:function(t){e.assignDialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),n("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){return e.AssignVoucherToMerchant("assignFormRef")}}},[e._v(e._s(e.$t("Confirm")))])],1)],1)],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("c5f6"),a("7f7f"),a("96cf"),a("3b8d")),s=a("bd86"),o=a("2f62"),l=a("f6d4");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(s["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m={components:{dragUpload:l["a"]},data:function(){var e=this,t=function(t,a,n){var i=/[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)/;if(i.test(a))return n();n(new Error(e.$t("Channel_Form_email")))};return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},pickerOptions1:{disabledDate:function(t){return t.getTime()<new Date(e.assignForm.startDate).getTime()-0}},addDialogVisible:!1,addDialogVisible2:!1,isAvatar:"",dialogStatus:"",titleMap:{addEquipment:"",editEquipment:this.$t("Modify")},V_loading:!1,channelData:null,channelVoucherData:null,totalVoucher:null,totalAllocated:null,totalRedeem:null,countryList:{825:this.$t("HongKong"),62:this.$t("Indonesia"),44:this.$t("United_Kingdom"),65:this.$t("Singapore"),66:this.$t("Thailand")},countryOptions:[{value:825,label:this.$t("HongKong")},{value:62,label:this.$t("Indonesia")},{value:44,label:this.$t("United_Kingdom")},{value:65,label:this.$t("Singapore")},{value:66,label:this.$t("Thailand")}],activeName:"1",voucherLength:0,ruleForm:{channelType:{flag:!1,value:""},channelEmail:{flag:!1,email:""},channelCode:{flag:!1,code:""},channelLogoUrl:{flag:!1,logoUrl:""},channelPhone:{flag:!1,phone:""},channelName:{flag:!1,name:""},channelName1:{flag:!1,name:{zh_tw:"",zh_cn:"",en_us:""}},content1:{flag:!1,content1:""},content2:{flag:!1,content2:""},country:{flag:!1,country:""}},oneRules:{"channelType.value":[{required:!0,message:this.$t("Channel_Form_rule1"),trigger:"blur"}],"channelCode.code":[{required:!0,message:this.$t("Channel_Form_rule2"),trigger:"blur"}],"channelEmail.email":[{required:!0,message:this.$t("Channel_Form_rule3"),trigger:"blur"},{validator:t,trigger:"blur"}],"channelPhone.phone":[{required:!0,message:this.$t("Merchant_Form_rule6"),trigger:"blur"}],"channelLogoUrl.logoUrl":[{required:!0,message:this.$t("Channel_Form_rule4"),trigger:"blur"}],"channelName.name":[{required:!0,message:this.$t("Channel_Form_rule5"),trigger:"blur"}],"country.country":[{required:!0,message:this.$t("Channel_Form_rule6"),trigger:"blur"}]},isShow:!0,assignDialogVisible:!1,merchantTypeList:[{label:this.$t("Partner"),value:1},{label:this.$t("Broker"),value:2}],commissionTypeList:[{label:this.$t("Fixed_amount"),value:0},{label:this.$t("Percent"),value:1}],merchantList:[],voucherList:[],assignForm:{merchantType:"",merchantId:"",voucherId:"",quato:100,voucherValue:"",sellingValue:"",commissionType:"",commission:"",startDate:"",startTime:"",endDate:"",endTime:"",currency:""},twoRules:{merchantType:[{required:!0,message:this.$t("Merchant_Type_Tips"),trigger:"blur"}],merchantId:[{required:!0,message:this.$t("Merchant_Name_Tips"),trigger:"blur"}],voucherId:[{required:!0,message:this.$t("Voucher_Form_rule6"),trigger:"blur"}],quato:[{required:!0,message:this.$t("Voucher_Form_rule4"),trigger:"blur"}],sellingValue:[{required:!0,message:this.$t("Selling_Price_Tips"),trigger:"blur"}],commissionType:[{required:!0,message:this.$t("Commission_Type_Tips"),trigger:"blur"}],commission:[{required:!0,message:this.$t("Voucher_Form_rule4"),trigger:"blur"}],startDate:[{required:!0,message:this.$t("Voucher_Form_rule8"),trigger:"blur"}],startTime:[{required:!0,message:this.$t("Voucher_Form_rule10"),trigger:"blur"}],endDate:[{required:!0,message:this.$t("Voucher_Form_rule9"),trigger:"blur"}],endTime:[{required:!0,message:this.$t("Voucher_Form_rule12"),trigger:"blur"}]},assignData:""}},computed:u({},Object(o["c"])(["AccountData","AWSAccountData"])),created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.channelDetails();case 2:return e.next=4,this.getDtxEVoucher();case 4:return e.next=6,this.getVoucherList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},methods:{GetUpload:function(e){this.file=e,this.UploadImg()},show:function(e){this.isShow=e},UploadImg:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.req_FormData=new FormData,this.req_FormData.append("file",this.file),this.req_FormData.append("path",this.AccountData.dtxAccountId+"/"+this.AccountData.subId+"/"+this.PageComponent+"/channel"),this.req_FormData.append("permissionsType","publicUpload"),e.prev=4,e.next=7,this.$http.DtxFile(this.req_FormData);case 7:t=e.sent,200==t.data.status?this.ruleForm.channelLogoUrl.logoUrl=t.data.data[0]:this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.$alert(this.$t("request_error_title"),"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}});case 14:case"end":return e.stop()}},e,this,[[4,11]])}));function t(){return e.apply(this,arguments)}return t}(),UpChannel:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.updateChannel({channelId:sessionStorage.getItem("channelId"),email:this.ruleForm.channelEmail.email,code:this.ruleForm.channelCode.code,logoUrl:this.ruleForm.channelLogoUrl.logoUrl,name:"42822"==this.AWSAccountData["custom:fileNo"]?JSON.stringify(this.ruleForm.channelName1.name):this.ruleForm.channelName.name,phone:this.ruleForm.channelPhone.phone||"",country:this.ruleForm.country.country});case 3:if(t=e.sent,200!==t.data.status){e.next=10;break}return e.next=7,this.channelDetails();case 7:this.addDialogVisible2=!1,e.next=11;break;case 10:this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}});case 11:e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](0);case 15:case"end":return e.stop()}},e,this,[[0,13]])}));function t(){return e.apply(this,arguments)}return t}(),addedClosed:function(){this.file="",this.isAvatar="ok"},assignClosed:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.assignFormRef.resetFields();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){},backChannelList:function(e){this.$router.push({path:"/merchant",query:{type:e}})},toTransaction:function(e){this.$router.push({name:"evoucher",params:{voucherId:e}})},channelDetails:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.updateChannelShow({channelId:sessionStorage.getItem("channelId")});case 3:t=e.sent,200===t.data.status&&(this.channelData=t.data.data,this.merchantList=[{name:this.channelData.channelName.value,id:this.channelData.id}],this.assignForm.merchantId=this.channelData.id,this.channelData.brokerId?this.assignForm.merchantType=2:this.assignForm.merchantType=1),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),getDtxEVoucher:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.getDtxEVoucher({companyId:this.AccountData.dtxAccountId,channelId:sessionStorage.getItem("channelId")});case 3:t=e.sent,200===t.data.status&&(this.voucherLength=t.data.data.length,0==t.data.data.length&&(this.addDialogVisible=!0),this.channelVoucherData=t.data.data,this.totalVoucher=0,this.channelVoucherData.map(function(e){a.totalVoucher+=e.number})),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),showEditDialog:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addDialogVisible2=!0,this.isAvatar="no",this.dialogStatus="editEquipment",this.dialogTitle="showEditDialog",e.prev=4,e.next=7,this.$http.updateChannelShow({channelId:sessionStorage.getItem("channelId")});case 7:t=e.sent,200===t.data.status?(this.ruleForm.channelEmail.email=t.data.data.channelEmail.value,this.ruleForm.channelEmail.flag=t.data.data.channelEmail.flag,this.ruleForm.channelCode.code=t.data.data.channelCode.value,this.ruleForm.channelCode.flag=t.data.data.channelCode.flag,this.ruleForm.channelLogoUrl.logoUrl=t.data.data.channelLogoUrl.value,this.ruleForm.channelLogoUrl.flag=t.data.data.channelLogoUrl.flag,"42822"==this.AWSAccountData["custom:fileNo"]?this.ruleForm.channelName1.name=JSON.parse(t.data.data.channelName.value):this.ruleForm.channelName.name=t.data.data.channelName.value,"42822"==this.AWSAccountData["custom:fileNo"]?this.ruleForm.channelName1.flag=t.data.data.channelName.flag:this.ruleForm.channelName.flag=t.data.data.channelName.flag,this.ruleForm.country.country=Number(t.data.data.channelCountry.value),this.ruleForm.country.flag=t.data.data.channelCountry.flag,this.ruleForm.channelPhone.phone=t.data.data.phone,this.ruleForm.country.flag=!1,this.ruleForm.channelType.value=Number(t.data.data.channelType.value),this.ruleForm.channelType.flag=t.data.data.channelType.flag):this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](4);case 13:case"end":return e.stop()}},e,this,[[4,11]])}));function t(){return e.apply(this,arguments)}return t}(),getVoucherList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.getVoucherList({dtxAccountId:this.AccountData.dtxAccountId},{nowPage:this.currentPage,pageSize:this.pageSize});case 3:t=e.sent,200==t.data.status?this.voucherList=t.data.data:this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),chooseVoucher:function(e){var t=this;this.voucherList.map(function(a){e==a.id&&(t.assignForm.currency=a.ecurrency,t.assignForm.voucherValue=a.eprice,t.assignData=a)})},showAssignDialog:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.assignDialogVisible=!0;case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),AssignVoucherToMerchant:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=24;break}if(a.assignForm.startDate&&a.assignForm.startTime&&a.assignForm.endDate&&a.assignForm.endTime){e.next=4;break}return a.$alert(a.$t("Voucher_Form_rule12"),"",{confirmButtonText:a.$t("Confirm"),callback:function(e){}}),e.abrupt("return",!1);case 4:return n={companyId:a.AccountData.dtxAccountId,productId:a.assignData.eproductid,type:a.assignForm.merchantType,channelId:a.assignForm.merchantId,templateId:a.assignForm.voucherId,quota:Number(a.assignForm.quato),voucherValue:Number(a.assignForm.voucherValue.replace(/,/gi,"")),sellingPrice:Number(a.assignForm.sellingValue),voucherStartTs:a.assignForm.startDate+" "+a.assignForm.startTime,voucherExpiredTs:a.assignForm.endDate+" "+a.assignForm.endTime,voucherCurrency:a.assignForm.currency},2==a.assignForm.merchantType&&(n.commissionType=a.assignForm.commissionType,n.commission=0==a.assignForm.commissionType?Number(a.assignForm.commission):Number(a.assignForm.commission)/10/10),e.prev=6,e.next=9,a.$http.saveDtxEVoucher(n);case 9:if(i=e.sent,200!=i.data.status){e.next=17;break}return a.assignDialogVisible=!1,a.addDialogVisible=!1,e.next=15,a.getDtxEVoucher();case 15:e.next=18;break;case 17:a.$alert(i.data.msg,"",{confirmButtonText:a.$t("Confirm"),callback:function(e){}});case 18:e.next=22;break;case 20:e.prev=20,e.t0=e["catch"](6);case 22:e.next=25;break;case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,null,[[6,20]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},h=m,p=(a("aede"),a("2877")),d=Object(p["a"])(h,n,i,!1,null,"4823cf2f",null);t["default"]=d.exports},aede:function(e,t,a){"use strict";var n=a("87b2"),i=a.n(n);i.a},e073a:function(e,t,a){"use strict";var n=a("9b19"),i=a.n(n);i.a},f6d4:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{ref:"upload",staticClass:"uploadPDF",attrs:{action:e.action,"show-file-list":!1,"before-upload":e.beforeUpload,"auto-upload":!0,drag:"",multiple:""}},[e.imageUrl&&e.isShow?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("span",[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.fileName,expression:"!fileName"}],staticClass:"el-icon-upload avatar-uploader-icon"}),a("span",[e._v(e._s(e.$t("Drag_and_Drop_file")))])]),e.imageUrl?e._e():a("p",{staticClass:"pdfFile",on:{click:e.viewfile}},[e._v(e._s(e.fileName))])]),a("el-dialog",{attrs:{title:e.$t("Picture_Clipping"),visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"cropper-content"},[a("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[a("VueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,fixed:e.option.fixed,fixedNumber:e.option.fixedNumber,centerBox:e.option.centerBox,infoTrue:e.option.infoTrue,fixedBox:e.option.fixedBox}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.finish}},[e._v(e._s(e.$t("Confirm")))])],1)])],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("28a5"),a("7f7f"),a("7618")),s=(a("96cf"),a("3b8d")),o=a("bd86"),l=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m={props:{url:{type:String,default:""},fileType:{type:String,default:""},excelOnlineName:{type:String,default:""},isAvatar:{type:String,default:""},isShow:{type:Boolean,default:!0},fixedNumberList:{type:Array,default:[7,5]}},data:function(){return{action:window.BASE_URL+"/v1/upload/dtxFile",file:"",fileName:"",fileData:"",imageUrl:"",dialogVisible:!1,option:{img:"",info:!0,outputSize:.8,outputType:"png",canScale:!1,autoCrop:!0,fixedBox:!1,fixed:!1,fixedNumber:[7,5],full:!0,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0},fileinfo:"",picsList:[],loading:!1}},computed:u({},Object(l["c"])(["AccountData"]),{onlineImageUrl:function(){this.url&&(this.imageUrl=this.url),this.excelOnlineName&&(this.fileName="Price.xls",this.fileData=this.excelOnlineName)}}),watch:{onlineImageUrl:function(e){},isAvatar:function(e){"ok"==e&&(this.imageUrl="")}},created:function(){},methods:{getUploadFile1:function(e){},getUploadFile:function(e,t){var a=this,n=e.raw;this.fileinfo=e;var i=new FileReader;i.onload=function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n="object"===Object(r["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result],{type:"image/jpeg"})):t.target.result,a.option.img=n,a.dialogVisible=!0;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i.readAsArrayBuffer(n),this.option.fixedNumber=this.fixedNumberList},changeUpload:function(e,t){var a=this,n=e.size/1024/1024<5;if(!n)return this.$message.error("上传文件大小不能超过 5MB!"),!1;this.fileinfo=e,this.$nextTick(function(){try{a.option.imgObject=e}catch(t){a.option.img=window.URL.createObjectURL(e)}a.dialogVisible=!0})},finish:function(){var e=this;this.$refs.cropper.getCropBlob(function(t){var a=new FormData;a.append("file",new window.File([t],"cropper"+e.fileinfo.raw.name,{type:e.fileinfo.raw.type})),e.imageUrl=URL.createObjectURL(a.get("file")),e.$emit("GetUpload",a.get("file")),e.dialogVisible=!1})},beforeUpload:function(e){if("image"==this.fileType)var t="png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0];else t="pdf"==e.name.split(".").slice(-1)[0]||"png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"gif"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0]||"xlsx"==e.name.split(".").slice(-1)[0]||"xls"==e.name.split(".").slice(-1)[0]||void 0;if(t){if("pdf"==e.name.split(".").slice(-1)||"xlsx"==e.name.split(".").slice(-1)||"xls"==e.name.split(".").slice(-1)){this.fileName=e.name,this.imageUrl="";var a=new FileReader;a.readAsDataURL(e);var n=this;return a.onload=function(){n.fileData=a.result},this.$emit("GetUpload",e),!1}this.fileName="",this.fileData="",this.imageUrl=URL.createObjectURL(e),this.$emit("GetUpload",e),this.$emit("show",!0);var i=e.size/1024/1024<5;return i||this.$alert("上传图片大小不能超过 5MB!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),i}this.$alert("Document does not comply!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}})},viewfile:function(){var e=window.open();e.document.write('<body style="margin:0px;"><object data="'+this.fileData+'" type="application/pdf" width="100%" height="100%"><iframe src="'+this.fileData+'" scrolling="no" width="100%" height="100%" frameborder="0" ></iframe></object></body>')}}},h=m,p=(a("e073a"),a("2877")),d=Object(p["a"])(h,n,i,!1,null,"e535f140",null);t["a"]=d.exports}}]);