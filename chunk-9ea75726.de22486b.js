(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ea75726"],{"5d58":function(e,t,r){e.exports=r("d8d6")},"60c1":function(e,t,r){},"67bb":function(e,t,r){e.exports=r("f921")},7618:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var i=r("5d58"),a=r.n(i),n=r("67bb"),s=r.n(n);function o(e){return o="function"===typeof s.a&&"symbol"===typeof a.a?function(e){return typeof e}:function(e){return e&&"function"===typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},o(e)}function l(e){return l="function"===typeof s.a&&"symbol"===o(a.a)?function(e){return o(e)}:function(e){return e&&"function"===typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":o(e)},l(e)}},"76b8":function(e,t,r){"use strict";var i=r("60c1"),a=r.n(i);a.a},"9b19":function(e,t,r){},e073a:function(e,t,r){"use strict";var i=r("9b19"),a=r.n(i);a.a},f404:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"main"},[r("div",{staticClass:"main_wrap"},[r("h2",[e._v(e._s(e.$t("My_Vouchersurance")))]),r("el-button",{staticClass:"addBtn",staticStyle:{"border-radius":"5px","margin-right":"20px"},attrs:{round:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.AddedDialog}},[e._v(e._s(e.$t("Create_eVoucher"))+"\n      ")])],1),r("el-table",{attrs:{data:e.tableData,border:"",stripe:"","row-style":{height:"80px"}}},[r("el-table-column",{attrs:{label:e.$t("Voucher_Name"),prop:"ename","min-width":"120px"}}),r("el-table-column",{attrs:{label:e.$t("Product_Name"),prop:"eproductname","min-width":"120px"}}),r("el-table-column",{attrs:{label:e.$t("Voucher_Value"),prop:"eprice","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.ecurrency)+"\n          "+e._s(t.row.eprice)+"\n        ")]}}])}),r("el-table-column",{attrs:{label:e.$t("Number_of_Merchant"),prop:"number","min-width":"93px"}}),r("el-table-column",{attrs:{label:e.$t("last_updated"),prop:"createdTime","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.updateTime?t.row.updatedTime.substring(0,10):t.row.createdTime.substring(0,10))+"\n        ")]}}])}),r("el-table-column",{attrs:{label:"Operation","min-width":"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"btnBox"},[r("el-button",{staticStyle:{"background-color":"#828282","border-color":"#828282"},attrs:{type:"warning",size:"mini",icon:"el-icon-edit",disabled:t.row.number>0},on:{click:function(r){return e.showEditorDialog(t.row)}}},[e._v("\n              "+e._s(e.$t("Edit"))+"\n            ")]),r("el-button",{staticStyle:{"margin-left":"30px","background-color":"#828282","border-color":"#828282"},attrs:{type:"warning",size:"mini",icon:"el-icon-s-promotion"},on:{click:function(r){return e.showAssignDialog(t.row)}}},[e._v("\n              "+e._s(e.$t("Assign"))+"\n            ")])],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":this.currentPage,"page-sizes":[5,10,20,30,50],"page-size":this.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.addDialogVisible,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addedClosed}},[r("el-form",{ref:"addruleFormRef",attrs:{model:e.ruleForm,"status-icon":"",rules:e.oneRules,"label-width":"130px"}},[r("el-form-item",{attrs:{label:e.$t("Voucher_Name")+":",prop:"name"}},[r("el-input",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Voucher_Form_rule6")},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:e.$t("Description")+":",prop:"description"}},[r("el-input",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{autosize:"",type:"textarea",placeholder:e.$t("Voucher_Form_rule7")},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),r("el-form-item",{attrs:{label:e.$t("Channel_Form2_Label1")+":",prop:"productId"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Channel_Form2_rule1")},on:{change:e.getQuoteMessageAndEmailList},model:{value:e.ruleForm.productId,callback:function(t){e.$set(e.ruleForm,"productId",t)},expression:"ruleForm.productId"}},e._l(e.selectList,function(e,t){return r("el-option",{key:t,attrs:{label:e.productData.name,value:e.productId}})}),1)],1),0!=e.eLimitList.length?r("el-form-item",{attrs:{label:e.$t("Limtation_Setup")+":",prop:"eLimit"}},[r("el-collapse",{staticClass:"mlef2",staticStyle:{width:"90%"},on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.eLimitList,function(t,i){return r("el-collapse-item",{attrs:{title:t.label,name:String(i+1)}},["text"==t.type?r("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:t.checkedList,callback:function(r){e.$set(t,"checkedList",r)},expression:"element.checkedList"}},e._l(t.list,function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1):e._e(),"number"==t.type?r("div",{staticClass:"rangeBox"},[r("el-col",{attrs:{span:10}},[r("el-input-number",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{min:Math.min.apply(null,t.list),max:Math.max.apply(null,t.list),"controls-position":"right"},on:{blur:e.handleCheckedChange},model:{value:t.checkedList[0],callback:function(r){e.$set(t.checkedList,0,r)},expression:"element.checkedList[0]"}})],1),r("el-col",{staticClass:"symbolBox",attrs:{span:1}},[r("strong",[e._v("-")])]),r("el-col",{attrs:{span:10}},[r("el-input-number",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{min:Math.min.apply(null,t.list),max:Math.max.apply(null,t.list),"controls-position":"right"},on:{blur:e.handleCheckedChange},model:{value:t.checkedList[1],callback:function(r){e.$set(t.checkedList,1,r)},expression:"element.checkedList[1]"}})],1)],1):e._e()],1)}),1)],1):e._e(),r("el-form-item",{attrs:{label:e.$t("Voucher_Value")+":",prop:"price"}},[r("el-input",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{disabled:""},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[r("i",{staticStyle:{color:"#000","font-style":"normal","margin-right":"10px"},attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.ruleForm.currency))])])],1),r("el-form-item",{attrs:{label:e.$t("Email_Document")+":",prop:"email"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Email_Document_Tips"),disabled:"showEditDialog"===e.dialogTitle},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}},e._l(e.selectEmailList,function(e){return r("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}})}),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"canBtn",on:{click:function(t){e.addDialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),r("el-button",{staticClass:"addBtn",attrs:{type:"primary",disabled:!e.isPriceOK},on:{click:function(t){return e.Submit("addruleFormRef")}}},[e._v(e._s(e.$t("Confirm")))])],1)],1),r("el-dialog",{attrs:{title:e.$t("Assign_eVoucher_to_merchant"),visible:e.assignDialogVisible,width:"720px","close-on-click-modal":!1},on:{"update:visible":function(t){e.assignDialogVisible=t},close:e.assignClosed}},[r("el-form",{ref:"assignFormRef",attrs:{model:e.assignForm,"status-icon":"",rules:e.twoRules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:e.$t("Merchant_Type")+":",prop:"merchantType"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Merchant_Type_Tips")},on:{change:e.chooseMerchantType},model:{value:e.assignForm.merchantType,callback:function(t){e.$set(e.assignForm,"merchantType",t)},expression:"assignForm.merchantType"}},e._l(e.merchantTypeList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:e.$t("Merchant")+":",prop:"merchantId"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Merchant_Name_Tips")},model:{value:e.assignForm.merchantId,callback:function(t){e.$set(e.assignForm,"merchantId",t)},expression:"assignForm.merchantId"}},e._l(e.merchantList,function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:e.$t("Voucher")+":",prop:"voucherId"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Voucher_Form_rule6"),disabled:""},model:{value:e.assignForm.voucherId,callback:function(t){e.$set(e.assignForm,"voucherId",t)},expression:"assignForm.voucherId"}},e._l(e.voucherList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:e.$t("Quota")+":",prop:"quato"}},[r("el-input-number",{staticClass:"mlef2",staticStyle:{width:"90%"},model:{value:e.assignForm.quato,callback:function(t){e.$set(e.assignForm,"quato",t)},expression:"assignForm.quato"}})],1),r("el-form-item",{attrs:{label:e.$t("Voucher_Price")+":",prop:"sellingValue"}},[r("div",{staticClass:"timeBox"},[r("div",{staticClass:"item mlef2"},[r("span",[e._v(e._s(e.$t("Selling_Price")))]),r("el-input",{staticStyle:{width:"90%"},model:{value:e.assignForm.sellingValue,callback:function(t){e.$set(e.assignForm,"sellingValue",t)},expression:"assignForm.sellingValue"}},[r("i",{staticStyle:{color:"#000","font-style":"normal"},attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.assignForm.currency))])])],1),r("div",{staticClass:"item",staticStyle:{"margin-left":"90px"}},[r("span",[e._v(e._s(e.$t("Voucher_Value"))+" : ")]),r("span",[e._v(e._s(e.assignForm.currency+" "+e.assignForm.voucherValue))])])])]),2==e.assignForm.merchantType?r("el-form-item",{attrs:{label:e.$t("Commission_Type")+":",prop:"commissionType"}},[r("el-select",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{placeholder:e.$t("Commission_Type_Tips")},model:{value:e.assignForm.commissionType,callback:function(t){e.$set(e.assignForm,"commissionType",t)},expression:"assignForm.commissionType"}},e._l(e.commissionTypeList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),2==e.assignForm.merchantType?r("el-form-item",{attrs:{label:e.$t("Commission")+":",prop:"commission"}},[r("el-input",{staticClass:"mlef2",staticStyle:{width:"90%"},model:{value:e.assignForm.commission,callback:function(t){e.$set(e.assignForm,"commission",t)},expression:"assignForm.commission"}},[r("i",{directives:[{name:"show",rawName:"v-show",value:0==e.assignForm.commissionType,expression:"assignForm.commissionType == 0"}],staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v(e._s(e.assignForm.currency))]),r("i",{directives:[{name:"show",rawName:"v-show",value:1==e.assignForm.commissionType,expression:"assignForm.commissionType == 1"}],staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1):e._e(),r("el-form-item",{attrs:{label:e.$t("Active_dates")+":",prop:"startDate"}},[r("div",{staticClass:"timeBox"},[r("div",{staticClass:"item mlef2"},[r("span",[e._v(e._s(e.$t("Start_Date"))+" : ")]),r("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:e.$t("Voucher_Form_rule8"),"picker-options":e.pickerOptions0},model:{value:e.assignForm.startDate,callback:function(t){e.$set(e.assignForm,"startDate",t)},expression:"assignForm.startDate"}})],1),r("div",{staticClass:"item mleft"},[r("span",[e._v(e._s(e.$t("Start_Time"))+" : ")]),r("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:e.$t("Voucher_Form_rule10")},model:{value:e.assignForm.startTime,callback:function(t){e.$set(e.assignForm,"startTime",t)},expression:"assignForm.startTime"}})],1)]),r("div",{staticClass:"timeBox",staticStyle:{"margin-bottom":"15px"}},[r("div",{staticClass:"item"},[r("span",[e._v(e._s(e.$t("Expiration_Date"))+" : ")]),r("el-date-picker",{staticClass:"mlef2",staticStyle:{width:"90%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:e.$t("Voucher_Form_rule9"),"picker-options":e.pickerOptions1},model:{value:e.assignForm.endDate,callback:function(t){e.$set(e.assignForm,"endDate",t)},expression:"assignForm.endDate"}})],1),r("div",{staticClass:"item"},[r("span",[e._v(e._s(e.$t("Expiration_Time"))+" : ")]),r("el-time-select",{staticClass:"mleft",staticStyle:{width:"90%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:e.$t("Voucher_Form_rule11")},model:{value:e.assignForm.endTime,callback:function(t){e.$set(e.assignForm,"endTime",t)},expression:"assignForm.endTime"}})],1)])])],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"canBtn",on:{click:function(t){e.assignDialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),r("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){return e.AssignVoucherToMerchant("assignFormRef")}}},[e._v(e._s(e.$t("Confirm")))])],1)],1),r("el-dialog",{attrs:{title:e.$t("History"),visible:e.historyDialogVisible,width:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.historyDialogVisible=t}}},[r("el-table",{attrs:{data:e.detailsInfoList,border:""}},[r("el-table-column",{attrs:{label:e.$t("Voucher_Name"),prop:"voucherName","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(JSON.parse(t.row.voucherName).en_us)+"\n          ")]}}])}),r("el-table-column",{attrs:{label:e.$t("Promo_Code"),prop:"promocode","min-width":"70px"}}),r("el-table-column",{attrs:{label:e.$t("Customer_Name"),prop:"customerName","min-width":"80px"}}),r("el-table-column",{attrs:{label:e.$t("Customer_Email"),prop:"email","min-width":"100px"}}),r("el-table-column",{attrs:{label:e.$t("Domain_Table_Label3"),prop:"status","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1==t.row.status?e.$t("Allocated"):2==t.row.status?e.$t("Used"):e.$t("Expired"))+"\n          ")]}}])}),r("el-table-column",{attrs:{label:e.$t("Update_Date"),prop:"updateTime","min-width":"95px"}})],1),r("el-pagination",{attrs:{"current-page":this.currentPageTwo,"page-sizes":[10,20,30,50],"page-size":this.pageSizeTwo,layout:"total, sizes, prev, pager, next, jumper",total:e.totalTwo},on:{"size-change":e.handleSizeChangeS,"current-change":e.handleCurrentChangeS}})],1)],1)])},a=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("a481"),r("c5f6"),r("96cf"),r("3b8d")),s=(r("6b54"),r("7f7f"),r("bd86")),o=r("2f62"),l=r("f6d4"),c=r("31c6");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p={components:{dragUpload:l["a"],TinymceEditor:c["a"]},data:function(){var e=this;return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},pickerOptions1:{disabledDate:function(t){return t.getTime()<new Date(e.assignForm.startDate).getTime()-0}},selectList:[],selectEmailList:[],merchantTypeList:[{label:this.$t("Partner"),value:1},{label:this.$t("Broker"),value:2}],commissionTypeList:[{label:this.$t("Fixed_amount"),value:0},{label:this.$t("Percent"),value:1}],merchantList:[],voucherList:[],selectVoucherList:[],tableData:[],dialogStatus:"",titleMap:{addEquipment:this.$t("Create_eVoucher"),editEquipment:this.$t("Modify")},dialogTitle:"",currentPage:1,pageSize:5,total:0,currentPageTwo:1,pageSizeTwo:10,totalTwo:0,addDialogVisible:!1,assignDialogVisible:!1,historyDialogVisible:!1,ruleForm:{productId:"",currency:"",price:0,companyId:"",name:"",description:"",eamil:"",eLimit:null},oneRules:{productId:[{required:!0,message:this.$t("Channel_Form2_rule1"),trigger:"blur"}],name:[{required:!0,message:this.$t("Voucher_Form_rule6"),trigger:"blur"}],description:[{required:!0,message:this.$t("Voucher_Form_rule7"),trigger:"blur"}],price:[{required:!0,message:this.$t("Voucher_Form_rule4"),trigger:"blur"}],eLimit:[{required:!0,message:this.$t("limtation_setup_Tips"),trigger:"blur"}],email:[{required:!0,message:this.$t("Email_Document_Tips"),trigger:"blur"}]},assignForm:{merchantType:"",merchantId:"",voucherId:"",quato:100,voucherValue:"",sellingValue:"",commissionType:"",commission:"",startDate:"",startTime:"",endDate:"",endTime:"",currency:""},twoRules:{merchantType:[{required:!0,message:this.$t("Merchant_Type_Tips"),trigger:"blur"}],merchantId:[{required:!0,message:this.$t("Merchant_Name_Tips"),trigger:"blur"}],voucherId:[{required:!0,message:this.$t("Voucher_Form_rule6"),trigger:"blur"}],quato:[{required:!0,message:this.$t("Voucher_Form_rule4"),trigger:"blur"}],sellingValue:[{required:!0,message:this.$t("Selling_Price_Tips"),trigger:"blur"}],commissionType:[{required:!0,message:this.$t("Commission_Type_Tips"),trigger:"blur"}],commission:[{required:!0,message:this.$t("Voucher_Form_rule4"),trigger:"blur"}],startDate:[{required:!0,message:this.$t("Voucher_Form_rule8"),trigger:"blur"}],startTime:[{required:!0,message:this.$t("Voucher_Form_rule10"),trigger:"blur"}],endDate:[{required:!0,message:this.$t("Voucher_Form_rule9"),trigger:"blur"}],endTime:[{required:!0,message:this.$t("Voucher_Form_rule11"),trigger:"blur"}]},editForm:{},detailsInfoList:[],detaId:"",addPromoCodeId:"",req_FormData:null,file:null,searchWord:"",searchType:0,searchTypeOptions:[{label:this.$t("Voucher_Name"),value:0},{label:this.$t("Product_Name"),value:1}],activeNames:["1","2","3"],eLimitList:[],isPriceOK:!1,voucherTemId:"",assignData:null}},computed:m({},Object(o["c"])(["AccountData"])),watch:{eLimitList:{handler:function(e,t){var r=this,i=e.length,a=0,n=[];e.map(function(e){if(0!=e.checkedList.length)if(a+=1,"text"==e.type||"yesorno"==e.type){var t=e.name,i=[];e.checkedList.map(function(e){i.push(e.toString())});var s={};s[t]=i,n.push(s)}else if("number"==e.type){var o=e.name,l=r.getNumberArr(e.checkedList[0],e.checkedList[1]),c={};c[o]=l,n.push(c)}}),0!=i&&i==a&&this.getPrice(n)},deep:!0}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getVoucherList();case 2:return e.next=4,this.GetProducts();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},methods:{getNumberArr:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=[],t==r)i=[t];else for(a=0;a<=r-t;a++)i.push((t+a).toString());return e.abrupt("return",i);case 3:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),changet:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.searchWord="";case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleCheckedChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.ruleForm.eLimit=this.eLimitList;case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),AddedDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.eLimitList=[],this.addDialogVisible=!0,this.dialogStatus="addEquipment",this.dialogTitle="addData";case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),Submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if("addData"!==r.dialogTitle){e.next=6;break}return e.next=4,r.AddEvoucher(0);case 4:e.next=9;break;case 6:if("showEditDialog"!==r.dialogTitle){e.next=9;break}return e.next=9,r.AddEvoucher(1);case 9:e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),AddEvoucher:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={companyId:this.AccountData.dtxAccountId,name:this.ruleForm.name,describe:this.ruleForm.description,productId:this.ruleForm.productId,productName:this.ruleForm.dtxAccountId,currency:this.ruleForm.currency,price:this.ruleForm.price,limit:JSON.stringify(this.ruleForm.eLimit),email:this.ruleForm.email},1==t&&(r.id=this.voucherTemId),e.prev=2,e.next=5,this.$http.saveVoucher(r);case 5:if(i=e.sent,200!=i.data.status){e.next=13;break}return this.$message.success({message:this.$t("Success"),duration:1e3}),e.next=10,this.getVoucherList();case 10:this.addDialogVisible=!1,e.next=14;break;case 13:this.$alert(i.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}});case 14:e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](2);case 18:case"end":return e.stop()}},e,this,[[2,16]])}));function t(t){return e.apply(this,arguments)}return t}(),GetProducts:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.GetProducts({companyId:this.AccountData.dtxAccountId,deviceType:"pc",language:JSON.parse(sessionStorage.getItem("DTX_V_X")).LanguageListData[0].name,type:"1"});case 3:t=e.sent,200==t.data.status?(r=[],t.data.data.map(function(e){e.productData=JSON.parse(e.productData),r.push(e)}),this.selectList=r):this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),this.$nextTick(function(){}),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),chooseMerchantType:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.findChannelListByInsurer({dtxAccountId:this.AccountData.dtxAccountId,channelType:t},{nowPage:1,pageSize:99999});case 3:r=e.sent,200==r.data.status?this.merchantList=r.data.data.rows:this.$alert(r.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t){return e.apply(this,arguments)}return t}(),getQuoteMessageAndEmailList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.eLimitList=[],e.next=3,this.GetEmailTemplate();case 3:return e.next=5,this.getQuoteMessage(t);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),GetEmailTemplate:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.getTemplateList({companyId:this.AccountData.dtxAccountId,productId:this.ruleForm.productId,templateType:"email",type:1,language:JSON.parse(sessionStorage.getItem("DTX_V_X")).LanguageListData[0].name});case 3:t=e.sent,200==t.data.status?(this.selectEmailList=t.data.data,0==this.selectEmailList.length&&this.$alert(this.$t("no_email_template_tips"),"",{confirmButtonText:this.$t("Confirm"),callback:function(e){sessionStorage.setItem("IsToEmail","1"),r.$router.push("/document-menu")}})):this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),this.$nextTick(function(){}),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),getQuoteMessage:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=null,this.selectList.map(function(e){e.productId==t&&(r=e.productData)}),this.ruleForm.currency=r&&r.currencySymbol||"HK$",this.ruleForm.price=0,e.prev=4,e.next=7,this.$http.getQuoteMessage({productId:this.ruleForm.productId});case 7:i=e.sent,200==i.data.status?(a=[],i.data.data.map(function(e){"text"==e.type||"yesorno"==e.type?(e.list&&0!=e.list.length&&e.list.map(function(e){"null"==e.label&&(e.value="")}),a.push({label:e.label,list:e.list,name:e.name,type:e.type,checkedList:[]})):"number"==e.type&&a.push({label:e.label,list:e.list,name:e.name,type:e.type,checkedList:[Math.min.apply(null,e.list),Math.max.apply(null,e.list)]})}),this.eLimitList=a):this.$alert(i.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](4);case 13:case"end":return e.stop()}},e,this,[[4,11]])}));function t(t){return e.apply(this,arguments)}return t}(),getPrice:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.getPrice({productId:this.ruleForm.productId,dataBeans:t});case 3:r=e.sent,200==r.data.status?(this.ruleForm.price=r.data.data.finalPremium,this.isPriceOK=!0):(this.ruleForm.price=0,this.isPriceOK=!1,this.$alert(r.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}})),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t){return e.apply(this,arguments)}return t}(),Submit2:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getVoucherList();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getVoucherList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.getVoucherList({companyId:this.AccountData.dtxAccountId},{nowPage:this.currentPage,pageSize:this.pageSize});case 3:t=e.sent,200==t.data.status?(this.tableData=t.data.data,this.selectVoucherList=t.data.data,this.total=t.data.data.length):this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),showEditorDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addDialogVisible=!0,this.dialogStatus="editEquipment",this.dialogTitle="showEditDialog",this.voucherTemId=t.id,this.ruleForm.name=t.ename,this.ruleForm.description=t.ediscription,this.ruleForm.productId=t.eproductid,this.ruleForm.eLimit=JSON.parse(t.elimit),this.eLimitList=JSON.parse(t.elimit),this.ruleForm.currency=t.ecurrency,this.ruleForm.price=t.eprice,this.ruleForm.email=Number(t.eemail),e.next=14,this.GetProducts();case 14:return e.next=16,this.GetEmailTemplate();case 16:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),showAssignDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.assignDialogVisible=!0,this.assignData=t,this.assignForm.currency=t.ecurrency,this.assignForm.voucherValue=t.eprice,this.assignForm.voucherId=t.id,this.voucherList=[{label:t.ename,value:t.id}];case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),AssignVoucherToMerchant:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=23;break}if(r.assignForm.startDate&&r.assignForm.startTime&&r.assignForm.endDate&&r.assignForm.endTime){e.next=4;break}return r.$alert(r.$t("Voucher_Form_rule12"),"",{confirmButtonText:r.$t("Confirm"),callback:function(e){}}),e.abrupt("return",!1);case 4:return i={companyId:r.AccountData.dtxAccountId,productId:r.assignData.eproductid,type:r.assignForm.merchantType,channelId:r.assignForm.merchantId,templateId:r.assignForm.voucherId,quota:Number(r.assignForm.quato),voucherValue:Number(r.assignForm.voucherValue.replace(/,/gi,"")),sellingPrice:Number(r.assignForm.sellingValue),voucherStartTs:r.assignForm.startDate+" "+r.assignForm.startTime,voucherExpiredTs:r.assignForm.endDate+" "+r.assignForm.endTime,voucherCurrency:r.assignForm.currency},2==r.assignForm.merchantType&&(i.commissionType=r.assignForm.commissionType,i.commission=0==r.assignForm.commissionType?Number(r.assignForm.commission):Number(r.assignForm.commission)/10/10),e.prev=6,e.next=9,r.$http.saveDtxEVoucher(i);case 9:if(a=e.sent,200!=a.data.status){e.next=16;break}return r.assignDialogVisible=!1,e.next=14,r.getVoucherList();case 14:e.next=17;break;case 16:r.$alert(a.data.msg,"",{confirmButtonText:r.$t("Confirm"),callback:function(e){}});case 17:e.next=21;break;case 19:e.prev=19,e.t0=e["catch"](6);case 21:e.next=24;break;case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,null,[[6,19]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addedClosed:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.addruleFormRef.resetFields();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),assignClosed:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.assignFormRef.resetFields();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.pageSize=t,e.next=3,this.getVoucherList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleSizeChangeS:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.pageSizeTwo=t,e.next=3,this.getVoucherList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleCurrentChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentPage=t,e.next=3,this.getVoucherList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleCurrentChangeS:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentPageTwo=t,e.next=3,this.getVoucherList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}},d=p,h=(r("76b8"),r("2877")),f=Object(h["a"])(d,i,a,!1,null,"726eb654",null);t["default"]=f.exports},f6d4:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{ref:"upload",staticClass:"uploadPDF",attrs:{action:e.action,"show-file-list":!1,"before-upload":e.beforeUpload,"auto-upload":!0,drag:"",multiple:""}},[e.imageUrl&&e.isShow?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("span",[r("i",{directives:[{name:"show",rawName:"v-show",value:!e.fileName,expression:"!fileName"}],staticClass:"el-icon-upload avatar-uploader-icon"}),r("span",[e._v(e._s(e.$t("Drag_and_Drop_file")))])]),e.imageUrl?e._e():r("p",{staticClass:"pdfFile",on:{click:e.viewfile}},[e._v(e._s(e.fileName))])]),r("el-dialog",{attrs:{title:e.$t("Picture_Clipping"),visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"cropper-content"},[r("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[r("VueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,fixed:e.option.fixed,fixedNumber:e.option.fixedNumber,centerBox:e.option.centerBox,infoTrue:e.option.infoTrue,fixedBox:e.option.fixedBox}})],1)]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.finish}},[e._v(e._s(e.$t("Confirm")))])],1)])],1)},a=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("28a5"),r("7f7f"),r("7618")),s=(r("96cf"),r("3b8d")),o=r("bd86"),l=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){Object(o["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m={props:{url:{type:String,default:""},fileType:{type:String,default:""},excelOnlineName:{type:String,default:""},isAvatar:{type:String,default:""},isShow:{type:Boolean,default:!0},fixedNumberList:{type:Array,default:[7,5]}},data:function(){return{action:window.BASE_URL+"/v1/upload/dtxFile",file:"",fileName:"",fileData:"",imageUrl:"",dialogVisible:!1,option:{img:"",info:!0,outputSize:.8,outputType:"png",canScale:!1,autoCrop:!0,fixedBox:!1,fixed:!1,fixedNumber:[7,5],full:!0,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0},fileinfo:"",picsList:[],loading:!1}},computed:u({},Object(l["c"])(["AccountData"]),{onlineImageUrl:function(){this.url&&(this.imageUrl=this.url),this.excelOnlineName&&(this.fileName="Price.xls",this.fileData=this.excelOnlineName)}}),watch:{onlineImageUrl:function(e){},isAvatar:function(e){"ok"==e&&(this.imageUrl="")}},created:function(){},methods:{getUploadFile1:function(e){},getUploadFile:function(e,t){var r=this,i=e.raw;this.fileinfo=e;var a=new FileReader;a.onload=function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i="object"===Object(n["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result],{type:"image/jpeg"})):t.target.result,r.option.img=i,r.dialogVisible=!0;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.readAsArrayBuffer(i),this.option.fixedNumber=this.fixedNumberList},changeUpload:function(e,t){var r=this,i=e.size/1024/1024<5;if(!i)return this.$message.error("上传文件大小不能超过 5MB!"),!1;this.fileinfo=e,this.$nextTick(function(){try{r.option.imgObject=e}catch(t){r.option.img=window.URL.createObjectURL(e)}r.dialogVisible=!0})},finish:function(){var e=this;this.$refs.cropper.getCropBlob(function(t){var r=new FormData;r.append("file",new window.File([t],"cropper"+e.fileinfo.raw.name,{type:e.fileinfo.raw.type})),e.imageUrl=URL.createObjectURL(r.get("file")),e.$emit("GetUpload",r.get("file")),e.dialogVisible=!1})},beforeUpload:function(e){if("image"==this.fileType)var t="png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0];else t="pdf"==e.name.split(".").slice(-1)[0]||"png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"gif"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0]||"xlsx"==e.name.split(".").slice(-1)[0]||"xls"==e.name.split(".").slice(-1)[0]||void 0;if(t){if("pdf"==e.name.split(".").slice(-1)||"xlsx"==e.name.split(".").slice(-1)||"xls"==e.name.split(".").slice(-1)){this.fileName=e.name,this.imageUrl="";var r=new FileReader;r.readAsDataURL(e);var i=this;return r.onload=function(){i.fileData=r.result},this.$emit("GetUpload",e),!1}this.fileName="",this.fileData="",this.imageUrl=URL.createObjectURL(e),this.$emit("GetUpload",e),this.$emit("show",!0);var a=e.size/1024/1024<5;return a||this.$alert("上传图片大小不能超过 5MB!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),a}this.$alert("Document does not comply!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}})},viewfile:function(){var e=window.open();e.document.write('<body style="margin:0px;"><object data="'+this.fileData+'" type="application/pdf" width="100%" height="100%"><iframe src="'+this.fileData+'" scrolling="no" width="100%" height="100%" frameborder="0" ></iframe></object></body>')}}},p=m,d=(r("e073a"),r("2877")),h=Object(d["a"])(p,i,a,!1,null,"e535f140",null);t["a"]=h.exports}}]);