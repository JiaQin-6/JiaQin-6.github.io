(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-411c86c1"],{"168a":function(t,e,a){"use strict";var i=a("fa0d"),r=a.n(i);r.a},fa0d:function(t,e,a){},faf4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container csvUpload"},[1==t.state?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.V_loading,expression:"V_loading"}],staticClass:"main"},[a("div",{staticClass:"main_wrap"},[a("div",{staticClass:"header"},[t._m(0),a("div",{staticClass:"box"},[a("el-upload",{staticClass:"btn-upload",attrs:{action:"","http-request":t.uploadBtn,"show-file-list":!1,accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocumereadsheetml.sheet"}},[a("el-button",{attrs:{type:"primary",size:"small",round:"",icon:"el-icon-upload2"}},[t._v("Upload CSV")])],1)],1)]),a("div",{staticClass:"discountList"},[a("div",{staticClass:"discountHead"},[a("el-tabs",{on:{"tab-click":t.selectStatus},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"All("+t.allPriceFactorList.length+")",name:"All"}}),a("el-tab-pane",{attrs:{label:"Active("+t.activeDiscount.length+")",name:"Active"}}),a("el-tab-pane",{attrs:{label:"Scheduled("+t.scheduledDiscount.length+")",name:"Scheduled"}}),a("el-tab-pane",{attrs:{label:"Expired("+t.expiredDiscount.length+")",name:"Expired"}})],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.allPriceFactorList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"tooltip-effect":"dark"},on:{"selection-change":t.selectDiscount}},[a("el-table-column",{attrs:{prop:"status",label:"Status",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:0==e.row.status?"activeColor":2==e.row.status?"expiredColor":"schedluedColor"},[t._v(t._s(1==e.row.status?"Actived":2==e.row.status?"Expired":5==e.row.status?"Trash":"Scheduled"))])]}}],null,!1,2659259832)}),a("el-table-column",{attrs:{prop:"productName",label:"Product Name",width:"260","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.productName?e.row.productName:"null"))])]}}],null,!1,1238071448)}),a("el-table-column",{attrs:{prop:"projectData",label:"Product data",width:"500","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(JSON.parse(e.row.projectData)[0],function(e,i){return a("span",{key:e+i,staticClass:"ml-6 mr-6"},[t._v(t._s(e))])})}}],null,!1,1558434538)}),a("el-table-column",{staticClass:"actionsColumn",attrs:{label:"Actions"}})],1)],1),t.trashStatus?t._e():a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])]):t._e(),2==t.state?a("div",{staticClass:"main editBox"},[a("div",{staticClass:"editHead"},[a("el-button",{staticClass:"back",on:{click:t.resetForm}},[t._v("Back")]),a("el-button",{attrs:{type:"primary"},on:{click:t.uploadFileData}},[t._v("Upload")])],1),a("div",{staticClass:"main_wrap"},[a("div",{staticClass:"createTable"},[a("div",[a("h2",[t._v("Upload Csv")]),a("h4",{staticClass:"mb-6"},[t._v("Select Price Rows("+t._s(t.factorNameArr.length)+" lines in total)")]),a("div",{staticClass:"tableBox flex-row mt-10"},[a("div",{staticClass:"fileHeader flex-1 mt-6 text-align"},[a("h3",{staticClass:"mb-6"},[t._v("File Header")]),a("div",{staticClass:"dataItem"},[a("el-radio-group",{on:{change:t.selectRows},model:{value:t.priceRows,callback:function(e){t.priceRows=e},expression:"priceRows"}},t._l(t.fileHeaderArr,function(e,i){return a("el-radio",{key:e,attrs:{label:i}},[t._v(t._s(e))])}),1)],1)]),a("div",{staticClass:"fileData flex-1 mt-6 text-align flex-row flex-wrap"},[a("h3",{staticClass:"w100 mb-6"},[t._v("Data")]),a("div",{staticClass:"fileDataContent flex-1 flex-row text-align"},t._l(t.fileDataArr,function(e,i){return a("div",{key:i,staticClass:"mr-10"},t._l(e,function(e,i){return a("div",{key:e+"-"+i,staticClass:"dataItem"},[t._v(t._s(e))])}),0)}),0)]),a("div",{staticClass:"factorName flex-1 mt-6 mr-6 text-align"},[a("h3",{staticClass:"mb-6"},[t._v("Factor Name")]),t._l(t.factorNameArr,function(e,i){return a("div",{key:i,staticClass:"dataItem"},[a("el-input",{attrs:{placeholder:"factor name",disabled:e.used},model:{value:e.factorName,callback:function(a){t.$set(e,"factorName",a)},expression:"item.factorName"}})],1)})],2),a("div",{staticClass:"factorName flex-1 mt-6 mr-6 text-align"},[a("h3",{staticClass:"mb-6"},[t._v("Factor Type")]),t._l(t.factorNameArr,function(e,i){return a("div",{key:i,staticClass:"dataItem"},[a("el-select",{attrs:{placeholder:"Select Factor Type",disabled:e.used},on:{change:function(a){return t.selectType(e,i)}},model:{value:e.typeName,callback:function(a){t.$set(e,"typeName",a)},expression:"item.typeName"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.typeName,value:t.typeName}})}),1)],1)})],2),a("div",{staticClass:"factorName flex-1 mt-6 mr-6 text-align"},[a("h3",{staticClass:"mb-6"},[t._v("Play Name")]),t._l(t.factorNameArr,function(e,i){return a("div",{key:i,staticClass:"dataItem"},[a("el-input",{attrs:{placeholder:"play name",disabled:e.used},model:{value:e.playName,callback:function(a){t.$set(e,"playName",a)},expression:"item.playName"}})],1)})],2)]),a("div",{staticClass:"connectDI mt-20"},[a("h3",{staticClass:"mb-6"},[t._v("Connect DI")]),a("el-select",{attrs:{placeholder:"Select DI"},model:{value:t.connectDI,callback:function(e){t.connectDI=e},expression:"connectDI"}},t._l(t.productList,function(t){return a("el-option",{key:t.id,attrs:{label:t.productData.name,value:t.productData.name}})}),1)],1)])])])]):t._e(),a("el-dialog",{attrs:{title:"Set Label Keyword",width:"30%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[t._l(t.formData,function(e){return a("div",{key:e.value,staticClass:"flex-row align-center space-center mb-10"},[a("span",{staticClass:"mr-20"},[t._v(t._s(e.value))]),a("el-input",{staticStyle:{},attrs:{disabled:e.abled,autocomplete:"off"},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}})],1)}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("Confirm")])],1)],2)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("h1",[t._v("Csv Upload Generator")])])}],n=(a("8e6e"),a("28a5"),a("a481"),a("4f7f"),a("5df3"),a("1c4c"),a("ac6a"),a("456d"),a("7f7f"),a("34ef"),a("96cf"),a("3b8d")),s=a("bd86"),o=a("2f62"),c=a("1146"),l=a.n(c);function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var h={data:function(){return{V_loading:!1,V_loading2:!1,V_loading3:!1,productList:null,productStatusOptions:[{label:this.$t("All_Product"),value:""},{label:this.$t("Temporary_Storage"),value:"3"},{label:this.$t("Offline"),value:"2"},{label:this.$t("Pre_Online"),value:"4"},{label:this.$t("online"),value:"1"},{label:this.$t("Publish_to_Channel"),value:"6"},{label:this.$t("Maintain"),value:"7"},{label:this.$t("To_be_received"),value:"10"}],productStatus:"",radio:!1,langOptions:[],lang:sessionStorage.getItem("language"),dialog:!1,setProductInfo:"",currencyOptions:"",currentPage:1,pageSize:10,totalPage:1,selectPolicyInfo:"",customFields:"",isEnable:"1",dataLayerCode:"",isCanChangeLang:!1,dialogVisibleCreateProduct:!1,activeName:"All",allDiscount2:[{id:1,code:"Free Shipping",status:"Active",discountValue:"Free Shipping on entire order",useNumber:18,activeDates:"From 30 Jan"},{id:2,code:"Womenday",status:"Active",discountValue:"20% off entire order",useNumber:180,activeDates:"From 18 Apir"},{id:4,code:"Winter",status:"Scheduled",discountValue:"5% off entire order",useNumber:180,activeDates:"From 18 Apir"}],allPriceFactorList:[],activeDiscount:[],scheduledDiscount:[],expiredDiscount:[],trashDiscount:[],multipleSelection:[],trashStatus:!1,state:1,editStatus:!1,discountId:0,discountForm:{discountCode:"",currency:"",price:"",connect:[],channel:[],type:"Percentage",startDate:new Date,startTime:new Date,setEndDate:!1,endDate:"",endTime:"",requirement:"None",amounts:0,limits:"",limitsNumber:0},rules:{discountCode:[{required:!0,message:"Customers will enter this discount code at check out",trigger:"blur"}]},confirmList:[{id:11,title:"Discount Code",label:"discountCode",content:""},{id:12,title:"Connect DI",label:"connect",content:""},{id:13,title:"Assign to Channel",label:"channel",content:""},{id:14,title:"Type",label:"type",content:""},{id:15,title:"Discount value",label:"price",content:""},{id:16,title:"Milammum requirements",label:"requirement",content:""},{id:66,title:"Amounts",label:"amounts",content:""},{id:17,title:"Usage limits",label:"limits",content:""},{id:77,title:"Limits Times",label:"limitsNumber",content:""},{id:18,title:"Active dates",content:""},{id:19,title:"Start Date",label:"startDate",content:""},{id:20,title:"Start Time",label:"startTime",content:""},{id:21,title:"End Date",label:"endDate",content:""},{id:22,title:"End Time",label:"endTime",content:""}],tableData:[],tableData2:[{fileHeader:"plan",itemData:["planA","planB"],factorName:""},{fileHeader:"age",itemData:[8,9,10],factorName:""},{fileHeader:"price",itemData:[100,200],factorName:""}],typeList:[{id:10011,typeName:"text"},{id:10012,typeName:"number"},{id:10013,typeName:"numeric range"},{id:10014,typeName:"date"},{id:10015,typeName:"date range"},{id:10016,typeName:"date interval"},{id:10017,typeName:"yesorno"},{id:10018,typeName:"file"},{id:10019,typeName:"image"}],fileHeaderArr:[],factorNameArr:[],typeNameArr:[],playNameArr:[],fileDataArr:[],priceRows:"",connectDI:"",uploadDataArr:[],dialogFormVisible:!1,formData:[],fillLabelData:{}}},watch:{},computed:d({},Object(o["c"])(["ProductDefaultData","DefaultActive","AccountData","OnlyId","CreateProductInfo","PageComponent","Domains","BusinessVerification","AWSAccountData","Radio","LanguageListData","PowerList","EditOrAddProductLang","AttachmentListData","ProductOriginalData","EditSelectComponent","EditSelectComponentPosition","PcOrMobile","EditCurrentPage","KeyWordList"])),created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPriceFactorList();case 2:this.setBlocklyJSON(null),this.setBlocklyJSData(null),this.setBlocklyVariablesData(null),this.setBlocklyOverallVariablesData(null),sessionStorage.setItem("overallVariablesData","");case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:d({},Object(o["b"])(["reset","setProductOriginalData","setCreateProductInfo","setRadio","setBlocklyJSON","setBlocklyJSData","setBlocklyVariablesData","setBlocklyOverallVariablesData"]),{uploadBtn:function(t){var e=this,a=!0,i=t.file,r=new FileReader,n=[];r.onload=function(i){var r=i.target.result;a||(r=new Uint8Array(r));var s=l.a.read(r,{type:a?"binary":"array"}),o=s.Sheets[s.SheetNames[0]];n=l.a.utils.sheet_to_json(o,{header:1});var c=n.filter(function(t){if(t.length>0)return t});e.$confirm("将上传【".concat(t.file.name,"】,共").concat(c[0].length,"行, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.fileDataArr=[],e.factorNameArr=[],e.uploadDataArr=c,c.map(function(t,a){0==a?e.fileHeaderArr=t:e.fileDataArr.push(t)});for(var t=0;t<e.fileHeaderArr.length;t++){var a={used:!1,factorName:"",typeName:"",playName:e.fileHeaderArr[t]};e.factorNameArr.push(a)}e.GetProducts(),e.state=2}).catch(function(){e.$message({type:"info",message:"已取消"})})},a?r.readAsBinaryString(i):r.readAsArrayBuffer(i)},uploadFileData:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,i,r,n,s,o,c,l,u,d,h,m,p,f,v,g,b,D,y,w;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.priceRows){t.next=5;break}return this.$alert("Please Select Price Row","",{confirmButtonText:this.$t("Confirm")}),t.abrupt("return");case 5:this.factorNameArr[this.priceRows].factorName="price";case 6:for(a in e={},this.factorNameArr)for(r in i=this.factorNameArr[a].factorName,e[i]=[],this.fileDataArr)e[i].push(this.fileDataArr[r][a]);for(o in delete e.price,n=JSON.parse(JSON.stringify(this.factorNameArr)),n.splice(this.priceRows,1),s=[],Object.keys(e)){for(u in c=e[Object.keys(e)[o]],l=Array.from(new Set(c)),l)0==l[u]||l[u]||(l[u]="");e[Object.keys(e)[o]]=l,d={},d.type=n[o].typeName,d.label=n[o].playName,d.name=Object.keys(e)[o],d.list=l,s.push(d)}for(h in s)m=s[h].name,this.fillLabelData[m]&&(s[h].list=this.fillLabelData[m]);if(p="",this.connectDI)for(f in this.productList)this.productList[f].productData.name==this.connectDI&&(p=this.productList[f].productId);for(v in this.uploadDataArr[0])this.uploadDataArr[0][v]=this.factorNameArr[v].factorName;for(b in g=JSON.parse(JSON.stringify(this.uploadDataArr)),g)for(D in g[b])g[b][D]||0==g[b][D]||(g[b][D]="");return y={productId:p,productName:this.connectDI,priceFactor:g,dataBeans:s,companyId:this.AccountData.dtxAccountId},t.prev=20,t.next=23,this.$http.addPriceFactor(y);case 23:w=t.sent,200==w.data.status?(this.$message.success({message:this.$t("Success"),duration:1e3}),window.location.reload()):this.$alert(w.data.msg,"",{confirmButtonText:this.$t("Confirm")}),t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](20),this.V_loading=!1;case 30:case"end":return t.stop()}},t,this,[[20,27]])}));function e(){return t.apply(this,arguments)}return e}(),selectRows:function(){for(var t in this.factorNameArr)this.factorNameArr[t].used=!1;this.factorNameArr[this.priceRows].used=!0},selectType:function(t,e){if("text"==t.typeName){var a={},i=[];if(""==this.factorNameArr[e].factorName)return void this.$alert("Please Complete The FactorName","",{confirmButtonText:this.$t("Confirm")});var r=this.factorNameArr[e].factorName;for(var n in a[r]=[],this.fillLabelData[r]=[],this.fileDataArr)a[r].push(this.fileDataArr[n][e]);var s=Array.from(new Set(a[r]));for(var o in a[r]=s,s){var c={label:"",value:s[o]};i.push(c)}for(var l in this.fillLabelData[r]=i,this.dialogFormVisible=!0,this.formData=i,this.formData)"undefined"==typeof this.formData[l].value&&(this.formData[l].value="",this.formData[l].label="null",this.formData[l].abled=!0)}},createDiscount:function(t){var e=this;e.$refs[t].validate(function(t){if(!t)return!1;e.state=3,e.confirmList.map(function(t){t.content=e.discountForm[t.label]})})},resetForm:function(t){this.state=1},handleCommand:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this;case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),editDiscount:function(t){},handleSizeChange:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.pageSize=e,this.currentPage=1;case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.currentPage=e;case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),GetProducts:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.GetProducts({companyId:this.AccountData.dtxAccountId,deviceType:"pc",language:this.lang,type:"1"});case 4:e=t.sent,200==e.data.status?(this.productList=e.data.data,this.productList.map(function(t){t.productData=JSON.parse(t.productData)}),this.isCanChangeLang=!0):this.isCanChangeLang=!1,this.$nextTick(function(){a.V_loading=!1}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),CurrencyList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading2=!0,t.prev=1,t.next=4,this.$http.getCurrency();case 4:e=t.sent,200==e.data.status?this.currencyOptions=e.data.data:this.$alert(e.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading2=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading2=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),selectDiscount:function(){},initDiscount:function(){for(var t in this.discountData=this.allDiscount,this.activeDiscount=[],this.scheduledDiscount=[],this.expiredDiscount=[],this.allDiscount)1==this.allDiscount[t].status&&this.activeDiscount.push(this.allDiscount[t]),3==this.allDiscount[t].status&&this.scheduledDiscount.push(this.allDiscount[t]),2==this.allDiscount[t].status&&this.expiredDiscount.push(this.allDiscount[t])},getPriceFactorList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.getPriceFactorList({companyId:this.AccountData.dtxAccountId,status:0});case 4:e=t.sent,200==e.data.status?e.data.data&&(this.allPriceFactorList=e.data.data.reverse(),this.totalPage=this.allPriceFactorList.length):this.$alert(e.data.msg,"",{confirmButtonText:this.$t("Confirm")}),setTimeout(function(){a.V_loading=!1},0),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),getTrashDiscountList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,i,r,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.getAllDiscountList({companyId:this.AccountData.dtxAccountId,status:5});case 4:if(e=t.sent,200==e.data.status){if(e.data.data)for(a in this.trashDiscount=e.data.data,this.trashDiscount)this.trashDiscount[a].startDate&&(i=this.trashDiscount[a].startDate.substr(0,19),r=new Date(new Date(i.replace(/T/g," ").replace(/-/g,"/")).getTime()+288e5),this.trashDiscount[a].startDate=this.GetDateformat(r)),this.trashDiscount[a].endDate&&(n=this.trashDiscount[a].endDate.substr(0,19),s=new Date(new Date(n.replace(/T/g," ").replace(/-/g,"/")).getTime()+288e5),this.trashDiscount[a].endDate=this.GetDateformat(s))}else this.$alert(e.data.msg,"",{confirmButtonText:this.$t("Confirm")});this.V_loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),selectStatus:function(){switch(this.trashStatus=!1,this.activeName){case"All":this.discountData=this.allDiscount;break;case"Active":this.discountData=this.activeDiscount;break;case"Scheduled":this.discountData=this.scheduledDiscount;break;case"Expired":this.discountData=this.expiredDiscount;break}},trash:function(){this.activeName="transh",this.trashStatus=!0,this.discountData=this.trashDiscount},backCreate:function(){this.state=2},confirmCreate:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,i,r,n,s,o,c=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading3=!0,e=this.getArrEqual(this.productList,this.discountForm.connect),a=moment(this.discountForm.startTime,["h:mm A"]).format("HH:mm"),i=this.discountForm.startDate,r="",n="",this.discountForm.endDate&&(n=this.discountForm.endDate),this.discountForm.endTime&&(r=moment(this.discountForm.endTime,["h:mm A"]).format("HH:mm")),s={product:JSON.stringify(e),companyId:this.AccountData.dtxAccountId,channel:JSON.stringify(this.discountForm.channel),discountType:"Fixed amount"==this.discountForm.type?840:843,discountValue:this.discountForm.price,currency:this.discountForm.currency,limitNum:this.discountForm.limitsNumber,limitPerson:"Limit to one use per customer"==this.discountForm.limits,startDate:i+" "+a,endDate:n+" "+r,promoCode:this.discountForm.discountCode},this.editStatus&&(s.id=this.discountId),t.prev=10,t.next=13,this.$http.editDiscount(s);case 13:o=t.sent,200==o.data.status||this.$alert(o.data.msg,"",{confirmButtonText:this.$t("Confirm")}),this.$nextTick(function(){c.V_loading3=!1}),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](10),this.V_loading3=!1;case 21:case"end":return t.stop()}},t,this,[[10,18]])}));function e(){return t.apply(this,arguments)}return e}(),splitDate:function(t){var e=t.split("-"),a=e[1]+"-"+e[0]+"-"+e[2];return a},getArrEqual:function(t,e){for(var a=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(t[r].productData.name==e[i]){var n={productId:t[r].productId,productName:t[r].productData.name};a.push(n)}return a},GetDateformat:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate();i=i<10?"0"+i:i;var r=t.getHours();r=r<10?"0"+r:r;var n=t.getMinutes();n=n<10?"0"+n:n;var s=t.getSeconds();return s=s<10?"0"+s:s,i+"-"+a+"-"+e+" "+r+":"+n},GetTimeformat:function(t){var e=t.getHours();e=e<10?"0"+e:e;var a=t.getMinutes();a=a<10?"0"+a:a;var i=t.getSeconds();return i=i<10?"0"+i:i,e+":"+a}})},m=h,p=(a("168a"),a("2877")),f=Object(p["a"])(m,i,r,!1,null,"64fbb50a",null);e["default"]=f.exports}}]);