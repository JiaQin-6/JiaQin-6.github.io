(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-407c9702"],{8432:function(t,e,i){"use strict";var n=i("c4cc"),a=i.n(n);a.a},c4cc:function(t,e,i){},e2636:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.V_loading,expression:"V_loading"}],staticClass:"container"},[i("div",{staticClass:"headed"},[i("div",{staticClass:"main"},[i("div",{staticClass:"home"},[i("router-link",{attrs:{to:"/home"}},[i("i",{staticClass:"iconfont icon-yooxi"})])],1),i("div",{staticClass:"langList"},[i("el-select",{on:{change:t.changeLang},model:{value:t.mouldLang,callback:function(e){t.mouldLang=e},expression:"mouldLang"}},t._l(t.LanguageListData,function(t,e){return i("el-option",{key:e,attrs:{label:t.language,value:t.name}})}),1)],1),i("div",{staticClass:"create"},[i("el-button",{attrs:{type:"primary",round:""},on:{click:t.createNewMould}},[t._v("Create New Mould")]),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.productBinddialog=!0}}},[t._v("Product Binding\n        ")])],1)])]),i("div",{staticClass:"content"},[i("div",{staticClass:"aside"},[i("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:"Email Mould",name:"1"}},t._l(t.mouldList.email,function(e,n){return i("div",{key:n,staticClass:"list"},[i("span",[t._v(t._s(e.templateName))]),i("div",{staticClass:"icon"},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return t.EditMould("email",e)}}}),i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.DelTemplate(e.id,"email",n)}}})])])}),0),i("el-collapse-item",{attrs:{title:"PDF Mould",name:"2"}},t._l(t.mouldList.pdf,function(e,n){return i("div",{key:n,staticClass:"list"},[i("span",[t._v(t._s(e.templateName))]),i("div",{staticClass:"icon"},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return t.EditMould("pdf",e)}}}),i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.DelTemplate(e.id,"pdf",n)}}})])])}),0),i("el-collapse-item",{attrs:{title:"SMS Mould",name:"3"}},t._l(t.mouldList.sms,function(e,n){return i("div",{key:n,staticClass:"list"},[i("span",[t._v(t._s(e.templateName))]),i("div",{staticClass:"icon"},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return t.EditMould("sms",e)}}}),i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.DelTemplate(e.id,"sms",n)}}})])])}),0),i("el-collapse-item",{attrs:{title:"CSV Mould",name:"4"}},t._l(t.mouldList.csv,function(e,n){return i("div",{key:n,staticClass:"list"},[i("span",[t._v(t._s(e.templateName))]),i("div",{staticClass:"icon"},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return t.EditMould("csv",e)}}}),i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.DelTemplate(e.id,"csv",n)}}})])])}),0)],1)],1),i("div",{staticClass:"editor"},[i("div",{staticClass:"mouldInfo"},[i("ul",[i("li",{directives:[{name:"show",rawName:"v-show",value:t.template.type,expression:"template.type"}]},[i("span",[t._v("Type : ")]),i("span",[t._v(t._s(t.template.type))])]),i("li",{directives:[{name:"show",rawName:"v-show",value:t.template.lang,expression:"template.lang"}]},[i("span",[t._v("Language : ")]),i("span",[t._v(t._s(t.getLangLabel(t.template.lang)))])]),i("li",{directives:[{name:"show",rawName:"v-show",value:t.template.name,expression:"template.name"}]},[i("span",[t._v("Name : ")]),i("span",[t._v(t._s(t.template.name))])]),i("li",{directives:[{name:"show",rawName:"v-show",value:t.template.productId,expression:"template.productId"}]},[i("span",[t._v("Product Id : ")]),i("span",[t._v(t._s(t.template.productId))])]),i("li",{directives:[{name:"show",rawName:"v-show",value:t.template.csvType,expression:"template.csvType"}]},[i("span",[t._v("CSV Type : ")]),i("span",[t._v(t._s(t.template.csvType))])])])]),i("div",{staticClass:"editTool"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"csv"!==t.template.type,expression:"template.type !== 'csv'"}],staticClass:"editTool-tinymce"},[i("TinymceEditor",{attrs:{id:"tinymce"+t.GetRamNumber(6),documentHtml:t.tinymceEditContent},on:{GetDocumentHtml:function(e){t.tinymceEditContent=e}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"csv"===t.template.type,expression:"template.type === 'csv'"}],staticClass:"editTool-table"},[i("ul",t._l(t.csvColumnList,function(e,n){return i("li",{key:n},[i("p",{staticClass:"title"},[i("span",[t._v(t._s(t.MathToLetter(n)))]),i("em",[i("i",{staticClass:"el-icon-delete-solid",on:{click:function(){t.csvColumnList.splice(n,1)}}}),i("i",{staticClass:"el-icon-circle-plus",on:{click:function(){t.csvColumnList.splice(n+1,0,{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""})}}})])]),i("p",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.columnName,expression:"item.columnName"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:e.columnName},on:{input:function(i){i.target.composing||t.$set(e,"columnName",i.target.value)}}})]),i("p",[i("el-select",{attrs:{placeholder:"KeyWord"},model:{value:e.columnKeyWord,callback:function(i){t.$set(e,"columnKeyWord",i)},expression:"item.columnKeyWord"}},t._l(t.emailPlaceholherList,function(t,e){return i("el-option",{key:e,attrs:{label:t.placeholder_name,value:t.placeholder}})}),1)],1),i("p",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.columnFunction,expression:"item.columnFunction"}],attrs:{type:"text",placeholder:"Formula"},domProps:{value:e.columnFunction},on:{input:function(i){i.target.composing||t.$set(e,"columnFunction",i.target.value)}}}),i("strong",[t._v("eg: B+C")])])])}),0)])]),i("div",{staticClass:"save"},[t.tinymceEditContent&&t.template.type&&t.template.name&&!t.template.productId||"csv"==t.template.type&&this.csvColumnList&&0!==this.csvColumnList.length&&!t.template.productId?i("el-button",{attrs:{type:"primary",round:""},on:{click:t.AddTemplateModule}},[t._v("Save")]):t._e(),t.tinymceEditContent&&t.template.type&&t.template.productId||"csv"==t.template.type&&this.csvColumnList&&0!==this.csvColumnList.length&&t.template.productId?i("el-button",{attrs:{type:"primary",round:""},on:{click:t.bindTemplateModule}},[t._v("Bind")]):t._e()],1)])]),i("el-dialog",{attrs:{title:"Setting",visible:t.showTemplateTip,width:"400px"},on:{"update:visible":function(e){t.showTemplateTip=e}}},[i("el-form",{attrs:{model:t.template}},[i("el-form-item",{attrs:{label:"Type","label-width":"80px"}},[i("el-select",{attrs:{disabled:""!==t.template.id},model:{value:t.template.type,callback:function(e){t.$set(t.template,"type",e)},expression:"template.type"}},[i("el-option",{attrs:{label:"Email Mould",value:"email"}}),i("el-option",{attrs:{label:"PDF Mould",value:"pdf"}}),i("el-option",{attrs:{label:"SMS Mould",value:"sms"}}),i("el-option",{attrs:{label:"CSV Mould",value:"csv"}})],1)],1),i("el-form-item",{attrs:{label:"Name","label-width":"80px"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.template.name,callback:function(e){t.$set(t.template,"name",e)},expression:"template.name"}})],1),"csv"==t.template.type?i("el-form-item",{attrs:{label:"CSV Type","label-width":"80px"}},[i("el-select",{model:{value:t.template.csvType,callback:function(e){t.$set(t.template,"csvType",e)},expression:"template.csvType"}},[i("el-option",{attrs:{label:"Payment Successful CSV",value:1}}),i("el-option",{attrs:{label:"Payment fail CSV",value:2}}),i("el-option",{attrs:{label:"Inconformity Payment CSV",value:3}}),i("el-option",{attrs:{label:"Policy Number Error CSV",value:4}})],1)],1):t._e(),i("el-form-item",{attrs:{label:"Language","label-width":"80px"}},[i("el-select",{attrs:{disabled:""!==t.template.id},model:{value:t.template.lang,callback:function(e){t.$set(t.template,"lang",e)},expression:"template.lang"}},t._l(t.LanguageListData,function(t,e){return i("el-option",{key:e,attrs:{label:t.language,value:t.name}})}),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.showTemplateTip=!1}}},[t._v(t._s(t.$t("Cancel")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showTemplateTip=!1}}},[t._v(t._s(t.$t("Confirm")))])],1)],1),i("el-dialog",{attrs:{visible:t.productBinddialog,width:"40%"},on:{"update:visible":function(e){t.productBinddialog=e}}},[i("div",{staticClass:"dialogContent"},[i("div",{staticClass:"selectInfo"},[i("div",{staticClass:"language"},[i("p",[t._v("Language")]),i("el-select",{attrs:{placeholder:""},on:{change:t.changeProductBindLang},model:{value:t.productBindForm.lang,callback:function(e){t.$set(t.productBindForm,"lang",e)},expression:"productBindForm.lang"}},t._l(t.LanguageListData,function(t,e){return i("el-option",{key:e,attrs:{label:t.language,value:t.name}})}),1)],1),i("div",{staticClass:"productList"},[i("p",[t._v("Product List")]),i("el-select",{attrs:{placeholder:""},on:{change:t.changeBindProduct},model:{value:t.productBindForm.productId,callback:function(e){t.$set(t.productBindForm,"productId",e)},expression:"productBindForm.productId"}},t._l(t.productBindForm.productList,function(t,e){return i("el-option",{key:e,attrs:{label:JSON.parse(t.productData).name,value:t.productId}})}),1)],1)]),t.productBindForm.lang&&t.productBindForm.productId?i("div",{staticClass:"tabs"},[i("el-tabs",{attrs:{"tab-position":"left"}},[i("el-tab-pane",{attrs:{label:"Email Mould"}},[t.productBindForm.selectedProduct.emailTemplate?i("div",{staticClass:"bindedMould"},[i("span",[t._v("Binded Email Mould")]),i("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.EditBindedMould("email")}}}),i("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.DelTemplate(t.productBindForm.selectedProduct.emailId,"email",t.index,"productEmail")}}})]):t._e(),i("div",{staticClass:"selectEmailMould"},[i("el-select",{attrs:{placeholder:""},on:{change:function(e){t.selectBindMould("email",e)}},model:{value:t.productBindForm.bindingEmailId,callback:function(e){t.$set(t.productBindForm,"bindingEmailId",e)},expression:"productBindForm.bindingEmailId"}},t._l(t.mouldList&&t.mouldList.email,function(t,e){return i("el-option",{key:e,attrs:{label:t.templateName,value:t.id}})}),1),i("el-button",{attrs:{disabled:!t.productBindForm.bindingEmailId},on:{click:function(e){return t.bindEmail("email")}}},[t._v("Binding")])],1)]),i("el-tab-pane",{attrs:{label:"PDF Mould"}},[t.productBindForm.selectedProduct.pdfTemplate?i("div",{staticClass:"bindedMould"},[i("span",[t._v("Binded PDF Mould")]),i("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.EditBindedMould("pdf")}}}),i("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.DelTemplate(t.productBindForm.selectedProduct.emailId,"pdf",t.index,"productPdf")}}})]):t._e(),i("div",{staticClass:"selectEmailMould"},[i("el-select",{attrs:{placeholder:""},on:{change:function(e){t.selectBindMould("pdf",e)}},model:{value:t.productBindForm.bindingPdfId,callback:function(e){t.$set(t.productBindForm,"bindingPdfId",e)},expression:"productBindForm.bindingPdfId"}},t._l(t.mouldList&&t.mouldList.pdf,function(t,e){return i("el-option",{key:e,attrs:{label:t.templateName,value:t.id}})}),1),i("el-button",{attrs:{disabled:!t.productBindForm.bindingPdfId},on:{click:function(e){return t.bindEmail("pdf")}}},[t._v("Binding")])],1)]),i("el-tab-pane",{attrs:{label:"SMS Mould"}},[t.productBindForm.selectedProduct.msgContent?i("div",{staticClass:"bindedMould"},[i("span",[t._v("Binded SMS Mould")]),i("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.EditBindedMould("sms")}}}),i("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.DelTemplate(t.productBindForm.selectedProduct.smsId,"sms",t.index,"productSms")}}})]):t._e(),i("div",{staticClass:"selectEmailMould"},[i("el-select",{attrs:{placeholder:""},on:{change:function(e){t.selectBindMould("sms",e)}},model:{value:t.productBindForm.bindingSmsId,callback:function(e){t.$set(t.productBindForm,"bindingSmsId",e)},expression:"productBindForm.bindingSmsId"}},t._l(t.mouldList&&t.mouldList.sms,function(t,e){return i("el-option",{key:e,attrs:{label:t.templateName,value:t.id}})}),1),i("el-button",{attrs:{disabled:!t.productBindForm.bindingSmsId},on:{click:function(e){return t.bindEmail("sms")}}},[t._v("Binding")])],1)]),i("el-tab-pane",{attrs:{label:"CSV Mould"}},[t._l(t.productBindForm.selectedProduct.csvTemplate,function(e,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.productBindForm.selectedProduct.csvTemplate,expression:"productBindForm.selectedProduct.csvTemplate"}],key:n,staticClass:"bindedMould"},[i("span",[t._v("Binded CSV Mould")]),i("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.EditBindedMould("csv",n)}}}),i("i",{staticClass:"el-icon-delete",on:{click:function(i){return t.DelTemplate(e.id,"csv",n,"productCsv")}}})])}),i("div",{staticClass:"selectEmailMould"},[i("el-select",{attrs:{placeholder:""},on:{change:function(e){t.selectBindMould("csv",e)}},model:{value:t.productBindForm.bindingCsvId,callback:function(e){t.$set(t.productBindForm,"bindingCsvId",e)},expression:"productBindForm.bindingCsvId"}},t._l(t.mouldList&&t.mouldList.csv,function(t,e){return i("el-option",{key:e,attrs:{label:t.templateName,value:t.id}})}),1),i("el-button",{attrs:{disabled:!t.productBindForm.bindingCsvId},on:{click:function(e){return t.bindEmail("csv")}}},[t._v("Binding")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.productBindForm.bindingCsvId,expression:"productBindForm.bindingCsvId"}],staticClass:"bind-product-info"},[i("ul",[i("li",[i("p",[t._v("CSV File Name "),i("i",{staticClass:"redTip"},[t._v("*")])]),i("el-input",{attrs:{type:"text"},model:{value:t.template.csvFileNameProduct,callback:function(e){t.$set(t.template,"csvFileNameProduct",e)},expression:"template.csvFileNameProduct"}})],1),i("li",[i("p",[t._v("Email Subject "),i("i",{staticClass:"redTip"},[t._v("*")])]),i("el-input",{attrs:{type:"text"},model:{value:t.template.emailSubject,callback:function(e){t.$set(t.template,"emailSubject",e)},expression:"template.emailSubject"}})],1),i("li",[i("p",[t._v("CSV Email To "),i("i",{staticClass:"redTip"},[t._v("*")])]),i("el-input",{attrs:{type:"text"},model:{value:t.template.csvEmailTo,callback:function(e){t.$set(t.template,"csvEmailTo",e)},expression:"template.csvEmailTo"}})],1),i("li",[i("p",[t._v("CSV Email Cc "),i("i",{staticClass:"redTip"},[t._v("*")])]),i("el-input",{attrs:{type:"text"},model:{value:t.template.csvEmailCc,callback:function(e){t.$set(t.template,"csvEmailCc",e)},expression:"template.csvEmailCc"}})],1)])])],2)],1)],1):t._e()])])],1)},a=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("96cf"),i("3b8d")),l=(i("7f7f"),i("bd86")),o=i("2f62"),c=i("31c6");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(i,!0).forEach(function(e){Object(l["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var m={components:{TinymceEditor:c["a"]},data:function(){return{V_loading:!1,mouldLang:"",showTemplateTip:!1,productBinddialog:!1,activeNames:"",tinymceEditContent:"",csvColumnList:[{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""},{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""},{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""}],template:{id:"",lang:"",type:"",name:"",productId:"",csvType:"",csvEmailTo:"",csvEmailCc:"",emailSubject:"",csvFileNameProduct:""},mouldList:"",productBindForm:{lang:"",productList:"",productId:"",selectedProduct:"",bindingEmailId:"",selectedBindEmail:"",bindingPdfId:"",selectedBindPdf:"",bindingSmsId:"",selectedBindSms:"",bindingCsvId:"",selectedBindCsv:""},tip:{object:"",tipInfo:""}}},computed:r({},Object(o["c"])(["AccountData","LanguageListData","emailPlaceholherList"]),{getLangLabel:function(){var t=this;return function(e){for(var i=0;i<t.LanguageListData.length;i++)if(e==t.LanguageListData[i].name)return t.LanguageListData[i].language}}}),watch:{},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.mouldLang=this.LanguageListData[0].name,t.next=3,this.GetTemplates();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:r({},Object(o["b"])(["reset","setEmailPlaceholherList"]),{changeLang:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.template.id="",this.template.lang="",this.template.type="",this.template.name="",this.template.productId="",this.tinymceEditContent="",this.mouldLang=e,t.next=9,this.GetTemplates();case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),createNewMould:function(){this.template.id="",this.template.lang="",this.template.type="",this.template.name="",this.template.productId="",this.tinymceEditContent="",this.showTemplateTip=!0},EditMould:function(t,e){"email"!==t&&"pdf"!==t&&"sms"!==t&&"csv"!==t||(this.template.id=e.id,this.template.type=t,this.template.lang=e.language||"",this.template.name=e.templateName,this.template.productId="",this.template.csvType=e.csvType?e.csvType:"");var i=document.createElement("div");"email"==t?(i.innerHTML=e.emailTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML):"pdf"==t?(i.innerHTML=e.pdfTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML):"sms"==t?(i.innerHTML=e.smsContent,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML):"csv"==t&&(this.csvColumnList=JSON.parse(JSON.stringify(e.csvColumnList))),this.showTemplateTip=!0},AddTemplateModule:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.V_loading=!0,"email"!=this.template.type&&"pdf"!=this.template.type&&"sms"!=this.template.type){t.next=22;break}return e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n      <html lang="en">\n      <head>\n      </head>\n      <body style="margin: 0; padding: 0;">\n      <div \n        class="template"\n        style="\n            padding: 0 10px;\n            text-align: left;\n            font-size: 16px;\n            line-height: 20px;\n            width: 670px;\n            margin: 0 auto;\n            padding: 10px 0;\n      "\n      >'.concat(this.tinymceEditContent.replace(/<p><br><\/p>/g,"").replace(/<br>/g,"<br/>"),"\n      </div>\n      </body>\n      </html>"),t.prev=3,t.next=6,this.$http.AddTemplateModule({companyId:this.AccountData.dtxAccountId,language:this.template.lang,templateContent:e,templateName:this.template.name,templateType:this.template.type,id:this.template.id});case 6:if(i=t.sent,200!=i.data.status){t.next=13;break}return this.showTemplateTip=!1,t.next=11,this.GetTemplates();case 11:t.next=14;break;case 13:this.$alert(i.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}});case 14:this.V_loading=!1,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),this.V_loading=!1;case 20:t.next=40;break;case 22:if("csv"!=this.template.type){t.next=40;break}return t.prev=23,t.next=26,this.$http.addCsvTemplate({dtxAccountId:this.AccountData.dtxAccountId,csvSheetName:this.template.name,csvType:this.template.csvType,csvId:this.template.id,csvColumnList:this.csvColumnList});case 26:if(n=t.sent,200!=n.data.status){t.next=33;break}return this.showTemplateTip=!1,t.next=31,this.GetTemplates();case 31:t.next=34;break;case 33:this.$alert(n.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}});case 34:this.V_loading=!1,t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](23),this.V_loading=!1;case 40:case"end":return t.stop()}},t,this,[[3,17],[23,37]])}));function e(){return t.apply(this,arguments)}return e}(),changeProductBindLang:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.productBindForm.productId="",this.GetProducts();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),changeBindProduct:function(t){for(var e=0;e<this.productBindForm.productList.length;e++)this.productBindForm.productList[e].productId==t&&(this.productBindForm.selectedProduct=this.productBindForm.productList[e],this.reset(["emailPlaceholherList"]),this.productBindForm.productList[e].productData&&JSON.parse(this.productBindForm.productList[e].productData).keywordSocketList&&this.setEmailPlaceholherList(JSON.parse(this.productBindForm.productList[e].productData).keywordSocketList))},selectBindMould:function(t,e){for(var i=0;i<this.mouldList[t].length;i++)this.mouldList[t][i].id==e&&("email"==t?this.productBindForm.selectedBindEmail=this.mouldList[t][i]:"pdf"==t?this.productBindForm.selectedBindPdf=this.mouldList[t][i]:"sms"==t?this.productBindForm.selectedBindSms=this.mouldList[t][i]:"csv"==t&&(this.productBindForm.selectedBindCsv=r({},this.mouldList[t][i])))},bindEmail:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=document.createElement("div"),"email"!=e){t.next=9;break}this.template.id=this.productBindForm.selectedBindEmail.id,this.template.lang=this.productBindForm.selectedBindEmail.language,this.template.name=this.productBindForm.selectedBindEmail.templateName,i.innerHTML=this.productBindForm.selectedBindEmail.emailTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,t.next=34;break;case 9:if("pdf"!=e){t.next=17;break}this.template.id=this.productBindForm.selectedBindPdf.id,this.template.lang=this.productBindForm.selectedBindPdf.language,this.template.name=this.productBindForm.selectedBindPdf.templateName,i.innerHTML=this.productBindForm.selectedBindPdf.pdfTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,t.next=34;break;case 17:if("sms"!=e){t.next=25;break}this.template.id=this.productBindForm.selectedBindSms.id,this.template.lang=this.productBindForm.selectedBindSms.language,this.template.name=this.productBindForm.selectedBindSms.templateName,i.innerHTML=this.productBindForm.selectedBindSms.smsContent,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,t.next=34;break;case 25:if("csv"!=e){t.next=34;break}if(this.template.csvFileNameProduct&&this.template.emailSubject&&this.template.csvEmailTo&&this.template.csvEmailCc){t.next=29;break}return this.$alert("Please enter information","Tip",{confirmButtonText:"Confirm",callback:function(t){}}),t.abrupt("return");case 29:this.template.id="",this.template.lang=this.productBindForm.selectedBindCsv.language,this.template.name=this.productBindForm.selectedBindCsv.templateName,this.template.csvType=this.productBindForm.selectedBindCsv.csvType,this.csvColumnList=JSON.parse(JSON.stringify(this.productBindForm.selectedBindCsv.csvColumnList));case 34:this.template.type=e,this.template.productId=this.productBindForm.productId,this.productBinddialog=!1;case 37:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),EditBindedMould:function(t,e){"csv"==t?(this.template.id=this.productBindForm.selectedProduct.csvTemplate[e].id,this.template.name=this.productBindForm.selectedProduct.csvTemplate[e].templateName,this.template.csvType=this.productBindForm.selectedProduct.csvTemplate[e].csvType,this.template.csvEmailTo=this.productBindForm.selectedProduct.csvTemplate[e].csvEmailTo,this.template.csvEmailCc=this.productBindForm.selectedProduct.csvTemplate[e].csvEmailCc,this.template.emailSubject=this.productBindForm.selectedProduct.csvTemplate[e].emailSubject,this.template.csvFileNameProduct=this.productBindForm.selectedProduct.csvTemplate[e].csvFileNameProduct):(this.template.id="",this.template.name=""),this.template.type=t,this.template.lang=this.productBindForm.lang,this.template.productId=this.productBindForm.productId;var i=document.createElement("div");"email"==t?(i.innerHTML=this.productBindForm.selectedProduct.emailTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,this.productBindForm.bindingEmailId=""):"pdf"==t?(i.innerHTML=this.productBindForm.selectedProduct.pdfTemplate,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,this.productBindForm.bindingPdfId=""):"sms"==t?(i.innerHTML=this.productBindForm.selectedProduct.msgContent,this.tinymceEditContent=i.getElementsByClassName("template")[0].innerHTML,this.productBindForm.bindingSmsId=""):"csv"==t&&(this.csvColumnList=JSON.parse(JSON.stringify(this.productBindForm.selectedProduct.csvTemplate[e].csvColumnList)),this.productBindForm.bindingCsvId=""),this.productBinddialog=!1},bindTemplateModule:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.V_loading=!0,e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n      <html lang="en">\n      <head>\n      </head>\n      <body style="margin: 0; padding: 0;">\n      <div \n        class="template"\n        style="\n            padding: 0 10px;\n            text-align: left;\n            font-size: 16px;\n            line-height: 20px;\n            width: 670px;\n            margin: 0 auto;\n            padding: 10px 0;\n      "\n      >'.concat(this.tinymceEditContent.replace(/<p><br><\/p>/g,"").replace(/<br>/g,"<br/>"),"\n      </div>\n      </body>\n      </html>"),"email"!=this.template.type&&"pdf"!=this.template.type){t.next=16;break}return t.prev=3,t.next=6,this.$http.AddEmailTemplate({dtxAccountId:this.AccountData.dtxAccountId,productId:this.template.productId,pdfTemplatePath:"pdf"==this.template.type?e:"",emailTemplateContent:"email"==this.template.type?e:"",emailTemplateNumber:"confirmationcover",pdfMultipleFiles:[],lang:this.template.lang});case 6:i=t.sent,200==i.data.status?(this.productBindForm.lang="",this.productBindForm.productId="",this.productBindForm.bindingEmailId="",this.productBindForm.bindingPdfId=""):this.$alert(i.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),this.V_loading=!1;case 14:t.next=42;break;case 16:if("sms"!=this.template.type){t.next=30;break}return t.prev=17,t.next=20,this.$http.SaveSmsTemplate({companyId:this.AccountData.dtxAccountId,language:this.template.lang,templateContent:e,productId:this.template.productId});case 20:n=t.sent,200==n.data.status?(this.productBindForm.lang="",this.productBindForm.productId="",this.productBindForm.bindingSmsId=""):this.$alert(n.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading=!1,t.next=28;break;case 25:t.prev=25,t.t1=t["catch"](17),this.V_loading=!1;case 28:t.next=42;break;case 30:if("csv"!=this.template.type){t.next=42;break}return t.prev=31,t.next=34,this.$http.addProductCsvTemplate({productId:this.template.productId,productCsvId:this.template.id,emailSubject:this.template.emailSubject,csvEmailTo:this.template.csvEmailTo,csvEmailCc:this.template.csvEmailCc,csvFileNameProduct:this.template.csvFileNameProduct,csvSheetName:this.template.name,csvType:this.template.csvType,dtxAccountId:this.AccountData.dtxAccountId,csvColumnList:this.csvColumnList});case 34:if(a=t.sent,200==a.data.status){for(s in this.productBindForm.lang="",this.productBindForm.productId="",this.productBindForm.bindingCsvId="",this.template)this.template[s]="";this.csvColumnList=[{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""},{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""},{columnName:"",columnKeyWord:"",columnFunction:"",columnOrderNo:""}]}else this.$alert(a.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}});this.V_loading=!1,t.next=42;break;case 39:t.prev=39,t.t2=t["catch"](31),this.V_loading=!1;case 42:case"end":return t.stop()}},t,this,[[3,11],[17,25],[31,39]])}));function e(){return t.apply(this,arguments)}return e}(),DelTemplate:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,i,n,a){var l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm(this.$t("Delete")+"?",this.$t("Tips"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",iconClass:""}).then(Object(s["a"])(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.$http.DelTemplate({id:e,templateType:a||i});case 3:s=t.sent,200==s.data.status?a?"email"===i?(l.$delete(productBindForm.selectedProduct,"emailTemplate"),l.productBindForm.bindingEmailId=""):"pdf"===i?(l.$delete(productBindForm.selectedProduct,"pdfTemplate"),l.productBindForm.bindingPdfId=""):"sms"===i?(l.$delete(productBindForm.selectedProduct,"msgContent"),l.productBindForm.bindingSmsId=""):"csv"===i&&(l.productBindForm.selectedProduct.csvTemplate.splice(n,1),l.productBindForm.bindingCsvId=""):"email"===i?(l.mouldList.email.splice(n,1),l.productBindForm.bindingEmailId=""):"pdf"===i?(l.mouldList.pdf.splice(n,1),l.productBindForm.bindingPdfId=""):"sms"===i?(l.mouldList.sms.splice(n,1),l.productBindForm.bindingSmsId=""):"csv"===i&&(l.mouldList.csv.splice(n,1),l.productBindForm.bindingCsvId=""):l.$alert(s.data.msg,"",{confirmButtonText:l.$t("Confirm"),callback:function(t){}}),l.V_loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),l.V_loading=!1;case 11:case"end":return t.stop()}},t,null,[[0,8]])}))).catch(function(){});case 1:case"end":return t.stop()}},t,this)}));function e(e,i,n,a){return t.apply(this,arguments)}return e}(),GetProducts:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.GetProducts({companyId:this.AccountData.dtxAccountId,deviceType:"pc",language:this.productBindForm.lang,type:"1"});case 4:e=t.sent,200==e.data.status&&(this.productBindForm.productList=e.data.data),this.$nextTick(function(){i.V_loading=!1}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}(),GetTemplates:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.GetTemplates({companyId:this.AccountData.dtxAccountId,language:this.mouldLang});case 4:e=t.sent,200==e.data.status?this.mouldList=e.data.data:this.$alert(e.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.V_loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}()})},u=m,p=(i("8432"),i("2877")),h=Object(p["a"])(u,n,a,!1,null,"583dd376",null);e["default"]=h.exports}}]);