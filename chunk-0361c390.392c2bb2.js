(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0361c390"],{"21d6":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showimageLibrary,expression:"showimageLibrary"}],staticClass:"wrap"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.V_loading,expression:"V_loading"}],staticClass:"content"},[a("div",{staticClass:"header"},[a("h3",[t._v(t._s(t.$t("Choose_a_file")))]),a("i",{on:{click:t.ShowimageLibraryFun}},[t._v("×")])]),a("div",{staticClass:"upload"},[a("dragUpload",{attrs:{fileType:t.uploadType,isShow:t.isShow,fixedNumberList:"pa_sp_module_banner"==t.PageComponent?[7.75,5]:[11,1.46]},on:{GetUpload:function(e){t.GetUpload(e)},show:function(e){t.show(e)}}}),1!=t.list.length?a("strong",[t._v(t._s(t.list.length)+" "+t._s(t.$t("items")))]):a("strong",[t._v(t._s(t.list.length)+" "+t._s(t.$t("Item")))])],1),a("ul",t._l(t.list,function(e,n){return a("li",{key:n,class:t.active==n?"on":"",on:{click:function(i){return t.ClickImg(e,n)}}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"pdf"==e.split(".").pop()?i("2ea5"):e,alt:""}})]),a("p",[t._v(t._s(e.split("/").pop()))])])}),0),a("div",{staticClass:"btnBox"},[a("el-button",{staticClass:"addBtn",staticStyle:{"border-radius":"5px"},attrs:{round:"",type:"primary"},on:{click:t.ClickImg1}},[t._v(t._s(t.$t("Confirm")))])],1)])])},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),r=(i("28a5"),i("bd86")),s=i("2f62"),l=i("f6d4");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(i,!0).forEach(function(e){Object(r["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var u={components:{dragUpload:l["a"]},props:{showimageLibrary:{require:!0,type:Boolean},uploadType:{require:!0,type:String}},data:function(){return{list:[],V_loading:!1,req_FormData:null,file:null,nowData:null,active:null,isShow:!0}},computed:p({},Object(s["c"])(["AccountData","PageComponent"])),watch:{showimageLibrary:function(t){1==t&&"image"==this.uploadType?this.DtxImageLibrary(this.PageComponent,"image"):1==t&&"pdf"==this.uploadType&&this.DtxImageLibrary(this.PageComponent,"file")}},methods:{ClickImg:function(t,e){this.nowData=t,this.active=e},ClickImg1:function(){var t=this.nowData;"pdf"==this.uploadType?"pdf"==t.split(".").pop()?this.$emit("GetimageUrl",t):this.$alert(this.$t("select_pdf"),"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}):"image"==this.uploadType&&("pdf"==t.split(".").pop()?this.$alert(this.$t("select_image"),"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}):this.$emit("GetimageUrl",t)),this.nowData=null,this.active=null,this.isShow=!1},ShowimageLibraryFun:function(){this.$emit("IsshowimageUrl",!1)},GetUpload:function(t){this.file=t,this.Upload()},show:function(t){this.isShow=t},Upload:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,this.req_FormData=new FormData,this.req_FormData.append("file",this.file),"image"==this.uploadType&&this.req_FormData.append("needCompress",1),this.req_FormData.append("path",this.AccountData.dtxAccountId+"/"+this.AccountData.subId+"/"+this.PageComponent+"/eng"),this.req_FormData.append("permissionsType","publicUpload"),t.prev=6,t.next=9,this.$http.DtxFile(this.req_FormData);case 9:e=t.sent,200==e.data.status?("image"==this.uploadType&&this.list.unshift(e.data.data[1]),this.list.unshift(e.data.data[0])):this.$alert(e.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading=!1,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),this.V_loading=!1,this.$alert(this.$t("request_error_title"),"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}});case 18:case"end":return t.stop()}},t,this,[[6,14]])}));function e(){return t.apply(this,arguments)}return e}(),DtxImageLibrary:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e,i){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.list=[],this.V_loading=!0,a={fileType:i,company:this.AccountData.dtxAccountId,model:this.AccountData.subId+"/"+e},t.prev=3,t.next=6,this.$http.DtxImageLibrary(a);case 6:n=t.sent,200==n.data.status?this.list=n.data.data.reverse():this.$alert(n.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),this.V_loading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),this.V_loading=!1;case 14:case"end":return t.stop()}},t,this,[[3,11]])}));function e(e,i){return t.apply(this,arguments)}return e}()}},f=u,d=(i("b594"),i("2877")),m=Object(d["a"])(f,a,n,!1,null,"29520845",null);e["a"]=m.exports},"2ea5":function(t,e,i){t.exports=i.p+"img/pdf.ac7317f4.jpeg"},"5d58":function(t,e,i){t.exports=i("d8d6")},"67bb":function(t,e,i){t.exports=i("f921")},7618:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var a=i("5d58"),n=i.n(a),o=i("67bb"),r=i.n(o);function s(t){return s="function"===typeof r.a&&"symbol"===typeof n.a?function(t){return typeof t}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":typeof t},s(t)}function l(t){return l="function"===typeof r.a&&"symbol"===s(n.a)?function(t){return s(t)}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":s(t)},l(t)}},9215:function(t,e,i){},"9b19":function(t,e,i){},b594:function(t,e,i){"use strict";var a=i("9215"),n=i.n(a);n.a},e073a:function(t,e,i){"use strict";var a=i("9b19"),n=i.n(a);n.a},f6d4:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{ref:"upload",staticClass:"uploadPDF",attrs:{action:t.action,"show-file-list":!1,"before-upload":t.beforeUpload,"auto-upload":!0,drag:"",multiple:""}},[t.imageUrl&&t.isShow?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("span",[i("i",{directives:[{name:"show",rawName:"v-show",value:!t.fileName,expression:"!fileName"}],staticClass:"el-icon-upload avatar-uploader-icon"}),i("span",[t._v(t._s(t.$t("Drag_and_Drop_file")))])]),t.imageUrl?t._e():i("p",{staticClass:"pdfFile",on:{click:t.viewfile}},[t._v(t._s(t.fileName))])]),i("el-dialog",{attrs:{title:t.$t("Picture_Clipping"),visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[i("VueCropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:!0,full:t.option.full,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,centerBox:t.option.centerBox,infoTrue:t.option.infoTrue,fixedBox:t.option.fixedBox}})],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("Cancel")))]),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.finish}},[t._v(t._s(t.$t("Confirm")))])],1)])],1)},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("28a5"),i("7f7f"),i("7618")),r=(i("96cf"),i("3b8d")),s=i("bd86"),l=i("2f62");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(i,!0).forEach(function(e){Object(s["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var u={props:{url:{type:String,default:""},fileType:{type:String,default:""},excelOnlineName:{type:String,default:""},isAvatar:{type:String,default:""},isShow:{type:Boolean,default:!0},fixedNumberList:{type:Array,default:[7,5]}},data:function(){return{action:window.BASE_URL+"/v1/upload/dtxFile",file:"",fileName:"",fileData:"",imageUrl:"",dialogVisible:!1,option:{img:"",info:!0,outputSize:.8,outputType:"png",canScale:!1,autoCrop:!0,fixedBox:!1,fixed:!1,fixedNumber:[7,5],full:!0,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0},fileinfo:"",picsList:[],loading:!1}},computed:p({},Object(l["c"])(["AccountData"]),{onlineImageUrl:function(){this.url&&(this.imageUrl=this.url),this.excelOnlineName&&(this.fileName="Price.xls",this.fileData=this.excelOnlineName)}}),watch:{onlineImageUrl:function(t){},isAvatar:function(t){"ok"==t&&(this.imageUrl="")}},created:function(){},methods:{getUploadFile1:function(t){},getUploadFile:function(t,e){var i=this,a=t.raw;this.fileinfo=t;var n=new FileReader;n.onload=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a="object"===Object(o["a"])(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result],{type:"image/jpeg"})):e.target.result,i.option.img=a,i.dialogVisible=!0;case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.readAsArrayBuffer(a),this.option.fixedNumber=this.fixedNumberList},changeUpload:function(t,e){var i=this,a=t.size/1024/1024<5;if(!a)return this.$message.error("上传文件大小不能超过 5MB!"),!1;this.fileinfo=t,this.$nextTick(function(){try{i.option.imgObject=t}catch(e){i.option.img=window.URL.createObjectURL(t)}i.dialogVisible=!0})},finish:function(){var t=this;this.$refs.cropper.getCropBlob(function(e){var i=new FormData;i.append("file",new window.File([e],"cropper"+t.fileinfo.raw.name,{type:t.fileinfo.raw.type})),t.imageUrl=URL.createObjectURL(i.get("file")),t.$emit("GetUpload",i.get("file")),t.dialogVisible=!1})},beforeUpload:function(t){if("image"==this.fileType)var e="png"==t.name.split(".").slice(-1)[0]||"jpg"==t.name.split(".").slice(-1)[0]||"jpeg"==t.name.split(".").slice(-1)[0]||"svg"==t.name.split(".").slice(-1)[0];else e="pdf"==t.name.split(".").slice(-1)[0]||"png"==t.name.split(".").slice(-1)[0]||"jpg"==t.name.split(".").slice(-1)[0]||"jpeg"==t.name.split(".").slice(-1)[0]||"gif"==t.name.split(".").slice(-1)[0]||"svg"==t.name.split(".").slice(-1)[0]||"xlsx"==t.name.split(".").slice(-1)[0]||"xls"==t.name.split(".").slice(-1)[0]||void 0;if(e){if("pdf"==t.name.split(".").slice(-1)||"xlsx"==t.name.split(".").slice(-1)||"xls"==t.name.split(".").slice(-1)){this.fileName=t.name,this.imageUrl="";var i=new FileReader;i.readAsDataURL(t);var a=this;return i.onload=function(){a.fileData=i.result},this.$emit("GetUpload",t),!1}this.fileName="",this.fileData="",this.imageUrl=URL.createObjectURL(t),this.$emit("GetUpload",t),this.$emit("show",!0);var n=t.size/1024/1024<5;return n||this.$alert("上传图片大小不能超过 5MB!","",{confirmButtonText:this.$t("Confirm"),callback:function(t){}}),n}this.$alert("Document does not comply!","",{confirmButtonText:this.$t("Confirm"),callback:function(t){}})},viewfile:function(){var t=window.open();t.document.write('<body style="margin:0px;"><object data="'+this.fileData+'" type="application/pdf" width="100%" height="100%"><iframe src="'+this.fileData+'" scrolling="no" width="100%" height="100%" frameborder="0" ></iframe></object></body>')}}},f=u,d=(i("e073a"),i("2877")),m=Object(d["a"])(f,a,n,!1,null,"e535f140",null);e["a"]=m.exports}}]);