(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d369af7"],{"3cf8":function(t,e,n){"use strict";var r=n("5fae"),o=n.n(r);o.a},"456d":function(t,e,n){var r=n("4bf8"),o=n("0d58");n("5eda")("keys",function(){return function(t){return o(r(t))}})},5273:function(t,e,n){},"5cf9":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contactTip"},[n("div",{staticClass:"content"},[n("h3",{domProps:{innerHTML:t._s(t.tipInfo)}}),n("button",{on:{click:t.CloseTip}},[t._v(t._s(t.$t("confirm_upper")))])])])},o=[],a={props:{tipInfo:{require:!0,type:String}},methods:{CloseTip:function(){this.$emit("CloseTip",!1)}}},i=a,c=(n("3cf8"),n("2877")),s=Object(c["a"])(i,r,o,!1,null,"0159afc8",null);e["a"]=s.exports},"5eda":function(t,e,n){var r=n("5ca1"),o=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},"5fae":function(t,e,n){},6739:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.V_loading,expression:"V_loading"}],staticClass:"wrap"},[n("form",{attrs:{id:"payment-form"}},[n("div",{attrs:{id:"card-element"}}),n("button",{attrs:{id:"submit"}},[n("div",{staticClass:"spinner hidden",attrs:{id:"spinner"}}),n("span",{attrs:{id:"button-text"}},[t._v(t._s(t.$t("Pay_now")))])]),n("p",{attrs:{id:"card-error",role:"alert"}}),t._m(0)]),n("div",{staticClass:"loading",attrs:{id:"loading"}}),t.showTip?n("Tip",{attrs:{tipInfo:t.tipInfo},on:{CloseTip:function(e){t.showTip=e}}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"result-message hidden"},[t._v("\n      Payment succeeded, see the result in your\n      "),n("a",{attrs:{href:"",target:"_blank"}},[t._v("Stripe dashboard.")]),t._v(" Refresh the page to pay\n      again.\n    ")])}],a=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),i=n("bd86"),c=n("2f62"),s=n("5cf9");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){Object(i["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var p={components:{Tip:s["a"]},data:function(){return{showTip:!1,tipInfo:"",price:"",key:"",locale:"",V_loading:!1}},computed:d({},Object(c["c"])(["CompanyInfo","ApplicationID","CreateProductInfo"])),mounted:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,r,o,a,i,c=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.GetPaymentInfo();case 2:e=Stripe(this.key,{locale:this.locale}),n={items:[{id:"xl-tshirt"}],paymentType:"stripe",map:{paymentType:"stripe",dtxAccountId:this.CompanyInfo.dtxAccountId,applicationId:this.$route.query.aid,currency:this.CreateProductInfo&&this.CreateProductInfo.currencySymbol||"HK$"}},fetch("".concat(window.BASE_URL,"/v1/StripePay/Stripe_initial"),{method:"POST",headers:{"Content-Type":"application/json"},JsonType:"JSONP",body:JSON.stringify(n)}).then(function(t){return t.json()}).then(function(t){var n=e.elements(),o={base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a"}},a=n.create("card",{style:o});a.mount("#card-element"),a.on("change",function(t){document.querySelector("button").disabled=t.empty,document.querySelector("#card-error").textContent=t.error?t.error.message:""});var i=document.getElementById("payment-form");i.addEventListener("submit",function(n){n.preventDefault(),r(e,a,JSON.parse(t.data).clientSecret)})}),r=function(t,e,n){i(!0),t.confirmCardPayment(n,{payment_method:{card:e}}).then(function(t){t.error?a(t.error.message):o(t.paymentIntent.id)})},o=function(t){i(!1),document.querySelector(".result-message a").setAttribute("href","https://dashboard.stripe.com/test/payments/"+t),document.querySelector(".result-message").classList.remove("hidden"),document.querySelector("button").disabled=!0,c.$router.push({path:"/Complete",query:{}})},a=function(t){i(!1);var e=document.querySelector("#card-error");e.textContent=t,setTimeout(function(){e.textContent="",c.$router.push({path:"/Failed",query:{}})},3e3)},i=function(t){t?(document.querySelector("button").disabled=!0,document.querySelector("#spinner").classList.remove("hidden"),document.querySelector("#button-text").classList.add("hidden")):(document.querySelector("button").disabled=!1,document.querySelector("#spinner").classList.add("hidden"),document.querySelector("#button-text").classList.remove("hidden"))};case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{GetPaymentInfo:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.V_loading=!0,t.prev=1,t.next=4,this.$http.GetPaymentInfo({dtxAccountId:this.CompanyInfo.dtxAccountId,applicationId:this.$route.query.aid,paymentType:"stripe",language:sessionStorage.getItem("consumerLang")});case 4:if(e=t.sent,this.V_loading=!1,200!=e.data.status){t.next=12;break}this.price=e.data.data.amountReceived,this.key=e.data.data.checkoutPublicKey,this.locale=e.data.data.locale,t.next=15;break;case 12:return this.showTip=!0,this.tipInfo=e.data.msg,t.abrupt("return",!1);case 15:t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](1),this.V_loading=!1,this.showTip=!0,this.tipInfo=this.$t("request_error_title");case 22:case"end":return t.stop()}},t,this,[[1,17]])}));function e(){return t.apply(this,arguments)}return e}()},destroyed:function(){this.V_loading=!1}},l=p,f=(n("cf34"),n("2877")),m=Object(f["a"])(l,r,o,!1,null,"0ae69ceb",null);e["default"]=m.exports},"8e6e":function(t,e,n){var r=n("5ca1"),o=n("990b"),a=n("6821"),i=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),s=i.f,u=o(r),d={},p=0;while(u.length>p)n=s(r,e=u[p++]),void 0!==n&&c(d,e,n);return d}})},"990b":function(t,e,n){var r=n("9093"),o=n("2621"),a=n("cb7c"),i=n("7726").Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},cf34:function(t,e,n){"use strict";var r=n("5273"),o=n.n(r);o.a},f1ae:function(t,e,n){"use strict";var r=n("86cc"),o=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}}}]);