webpackJsonp([8],{"8aaj":function(t,e){},db4W:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Xxa5"),a=r.n(s),i=r("exGp"),o=r.n(i),n=r("INCx"),c=r.n(n),_=r("Dd8w"),p=r.n(_),u=r("NYxO"),d={name:"order",props:{userData:{require:!0,type:Object},indexList:{require:!0,type:Number},isProtector:{require:!0,type:Boolean}},data:function(){return{isHkid:this.$t("account_info_hkid"),HkidpassportData:""}},methods:{HkidPassport:function(){""==this.userData.HKID1.trim()?(this.isHkid=this.$t("info_passport"),this.HkidpassportData=this.userData.HKID_passport):this.HkidpassportData=this.userData.HKID1},toMemberList:function(){this.userData.title==this.$t("policyholder")?this.$router.push("/Policyholder"):this.$router.push("/MemberData")}},created:function(){this.HkidPassport()}},l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"members"},[r("span",[t.isProtector?t._e():r("p",{staticClass:"memb"},[t._v("\n        "+t._s(t.$t("quote_member"))+"\n        "),r("span",[t._v(t._s(t.indexList+1))])]),t._v(" "),t.isProtector?r("p",{staticClass:"memb"},[t._v("\n        "+t._s(t.$t("policy_holder_title"))+"\n      ")]):t._e(),t._v(" "),r("p",[t._v(t._s(t.$t("relationship")))]),t._v(" "),r("p",[t._v(t._s(t.$t("Gender")))]),t._v(" "),r("p",[t._v(t._s(t.$t("account_info_lastname2")))]),t._v(" "),r("p",[t._v(t._s(t.$t("account_info_firstname2")))]),t._v(" "),r("p",[t._v(t._s(t.$t("account_info_birthday")))]),t._v(" "),r("p",[t._v(t._s(t.isHkid))])]),t._v(" "),r("span",{staticClass:"members-right"},[r("p",{staticClass:"edit",on:{click:t.toMemberList}},[t._v(t._s(t.$t("firm_order_change")))]),t._v(" "),r("p",[t._v(t._s(t.userData.title))]),t._v(" "),r("p",[t._v(t._s(t.userData.gender))]),t._v(" "),r("p",[t._v(t._s(t.userData.surname))]),t._v(" "),r("p",[t._v(t._s(t.userData.givename))]),t._v(" "),r("p",[t._v(t._s(t.userData.datebirth))]),t._v(" "),r("p",[t._v(t._s(t.HkidpassportData))])])])])},staticRenderFns:[]};var v={components:{WOrder:r("VU/8")(d,l,!1,function(t){r("k90J")},"data-v-7982a0f2",null).exports},data:function(){return{isShow:!1,departureData:"",returnData:"",price:"",key:"",loading:!1}},created:function(){this.$store.state.protectorInfo?this.isShow=!0:this.isShow=!1,this.getData()},computed:p()({},Object(u.c)(["travelInfo","product_name","product_id","language","plan","userId","userInfo","priceSymbol","protectorInfo","pricedata"])),methods:p()({},Object(u.b)(["setCommonKey"]),{back:function(){this.$router.push({path:"/TravelInfo",query:{isChange:"true"}})},getData:function(){this.departureData=this.$store.state.travelInfo.date.departureDate,this.returnData=this.$store.state.travelInfo.date.returnDate},toPrePage:function(){this.protectorInfo?this.$router.push("/Policyholder"):this.$router.push("/MemberData")},confirm:function(){this.price?(this.loading=!0,this.$router.push("/Payment")):this.$createToast({txt:this.$t("request_error_content"),time:3e3,type:"txt"}).show()},NumFormat:function(t){if(!t)return"0.00";t=t.toFixed(2);var e=c()(t).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),r=".00",s=t.split(".");return 2===s.length?1===(r=s[1].toString()).length?e+"."+r+"0":e+"."+r:e+r}}),mounted:function(){var t=this;return o()(a.a.mark(function e(){var r,s,i,o,n,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.$createToast({time:0,txt:t.$t("loading")})).show(),e.prev=2,e.next=5,t.$http.post("/wesupromo/web/getpublicKey",{id:t.userId});case 5:100==(s=e.sent).status&&(t.key=s.data.public_key,t.setCommonKey(s.data.public_key)),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),e.t0.msg?t.$createToast({txt:e.t0.msg,time:3e3,type:"txt"}).show():t.$createToast({txt:t.$t("request_error_title"),time:3e3,type:"txt"}).show(),e.abrupt("return",!1);case 14:if(i=[],(o=t.travelInfo.count).myself)for(n=0;n<o.myself;n++)i.push({relation:"2001"});if(o.spouse)for(n=0;n<o.spouse;n++)i.push({relation:"2002"});if(o.child)for(n=0;n<o.child;n++)i.push({relation:"2003"});if(o.friends)for(n=0;n<o.friends;n++)i.push({relation:"2004"});return c={product_id:t.product_id,start_date:t.travelInfo.date.departureDate.replace(/\//g,"-"),end_date:t.travelInfo.date.returnDate.replace(/\//g,"-"),others_insured_list:i},e.prev=21,e.next=24,t.$http.post("/wesupromo/web/awiTravelQuote",c).then(function(e){t.price=e.data.premium,t.price=t.NumFormat(t.price),r.hide()});case 24:e.sent,e.next=31;break;case 27:return e.prev=27,e.t1=e.catch(21),e.t1.msg?t.$createToast({txt:e.t1.msg,time:3e3,type:"txt"}).show():t.$createToast({txt:t.$t("request_error_title"),time:3e3,type:"txt"}).show(),e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,t,[[2,10],[21,27]])}))()}},h={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-wrap"},[r("div",{staticClass:"headTitle"},[r("i",{staticClass:"cubeic-arrow",on:{click:t.toPrePage}}),t._v(" "),r("p",[t._v(t._s(t.$t("firm_order_title")))])]),t._v(" "),r("div",{staticClass:"plan-item"},[r("p",{staticClass:"plan"},[t._v(t._s(t.$t("firm_order_plan_name")))]),t._v(" "),r("p",{staticClass:"travelead"},[t._v(t._s(t.product_name))])]),t._v(" "),r("div",{staticClass:"pre-item"},[r("p",{staticClass:"premium"},[t._v(t._s(t.$t("firm_order_premium")))]),t._v(" "),r("p",{staticClass:"price"},[t._v(t._s(t.priceSymbol)+t._s(t.price))])]),t._v(" "),r("div",{staticClass:"date"},[r("span",[r("p",{staticClass:"date-title"},[t._v(t._s(t.$t("firm_order_star_date")))]),t._v(" "),r("p",{staticClass:"date-date"},[t._v(t._s(t.departureData))])]),t._v(" "),r("span",[r("p",{staticClass:"date-title"},[t._v(t._s(t.$t("firm_order_end_date")))]),t._v(" "),r("p",{staticClass:"date-date"},[t._v(t._s(t.returnData))])]),t._v(" "),r("span",{staticClass:"edit",on:{click:t.back}},[t._v(t._s(t.$t("firm_order_change")))])]),t._v(" "),t.isShow?r("WOrder",{attrs:{isProtector:!0,indexList:0,userData:this.$store.state.protectorInfo}}):t._e(),t._v(" "),t._l(t.userInfo,function(t,e){return r("WOrder",{key:e,attrs:{isProtector:!1,indexList:e,userData:t}})}),t._v(" "),r("div",{staticClass:"button-bar"},[r("button",{staticClass:"proceed",on:{click:t.confirm}},[t._v(t._s(t.$t("confirm")))])]),t._v(" "),r("cube-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],2)},staticRenderFns:[]};var m=r("VU/8")(v,h,!1,function(t){r("8aaj")},"data-v-1846d7d0",null);e.default=m.exports},k90J:function(t,e){}});