webpackJsonp([11],{"0GHm":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Xxa5"),a=r.n(s),i=r("exGp"),n=r.n(i),o=r("Dd8w"),c=r.n(o),l=r("NYxO"),u={name:"formItem",data:function(){return{form:{gender:"Gender",surname:"",givename:"",datebirth:"Date of birth",HKID_passport:"",HKID1:"",title:"Policyholder"},select:1,ages:"",getAge:"",loading:!1}},created:function(){this.getProtectorInfo()},methods:c()({},Object(l.b)(["setProtectorInfo"]),{inputHkid:function(){this.form.HKID_passport="",this.select=1},inputPassport:function(){this.form.HKID1="",this.select=2},confirm:function(){var t=this;return n()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.form.datebirth&&""!=t.form.givename&&""!=t.form.gender&&""!=t.form.surname){e.next=3;break}return t.$createToast({txt:t.$t("insurance_toast"),time:3e3,type:"txt"}).show(),e.abrupt("return",!1);case 3:if(""!=t.form.HKID1||""!=t.form.HKID_passport){e.next=6;break}return t.$createToast({txt:t.$t("insurance_toast"),time:3e3,type:"txt"}).show(),e.abrupt("return",!1);case 6:return t.loading=!0,e.next=9,t.verifyUserFrom(t.form);case 9:if(0!=(r=e.sent)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.next=14,t.verifyAge(t.form);case 14:if(e.sent){e.next=16;break}return e.abrupt("return",!1);case 16:1==r&&(t.form.gender=t.form.gender||"",t.form.surname=t.form.surname||"",t.form.givename=t.form.givename||"",t.form.datebirth=t.form.datebirth||"",t.form.HKID1=t.form.HKID1||"",t.form.HKID_passport=t.form.HKID_passport||"",t.form.title=t.$t("policyholder"),t.setProtectorInfo(t.form),t.$router.push({path:"/confirmOrder"}));case 17:case"end":return e.stop()}},e,t)}))()},getProtectorInfo:function(){if(this.protectorInfo){for(var t in this.protectorInfo)this.form[t]=this.protectorInfo[t];""!=this.form.HKID_passport&&(this.select=2)}else{if(0!=this.travelInfo.count.myself&&this.getYears(this.userInfo[0].datebirth)>18)for(var t in this.userInfo[0])this.form[t]=this.userInfo[0][t];""!=this.form.HKID_passport&&(this.select=2)}this.getYears(this.form.datebirth)},verifyUserFrom:function(t){var e=this;return n()(a.a.mark(function t(){var r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,""==e.form.HKID1){t.next=15;break}return s=e.form.HKID1,t.prev=4,t.next=7,e.$http.post("/wesupromo/web/validate/validateHKIDWithLng",{language:"tc",hkid:s});case 7:t.sent,t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(4),e.loading=!1,t.t0.msg?e.$createToast({txt:t.t0.msg,time:3e3,type:"txt"}).show():e.$createToast({txt:e.$t("request_error_title"),time:3e3,type:"txt"}).show(),t.abrupt("return",!1);case 15:return r=!0,t.abrupt("return",r);case 18:case"end":return t.stop()}},t,e,[[4,10]])}))()},showPicker:function(){var t=[{text:this.$t("Female"),value:"Male"},{text:this.$t("Male"),value:"Female"}];this.picker||(this.picker=this.$createPicker({title:this.$t("Gender"),data:[t],cancelTxt:this.$t("cancel"),confirmTxt:this.$t("confirm"),onSelect:this.selectGender,onCancel:this.cancelGender})),this.picker.show()},selectGender:function(t,e,r){this.form.gender=r.join(" ")},cancelGender:function(){},showDatePicker:function(){this.datePicker||(this.datePicker=this.$createDatePicker({title:this.$t("account_info_birthday"),min:new Date(1900,1,1),max:new Date,value:new Date(1980,5,20),cancelTxt:this.$t("cancel"),confirmTxt:this.$t("confirm"),onSelect:this.selectHandle,onCancel:this.cancelHandle})),this.datePicker.show()},selectHandle:function(t,e,r){this.form.datebirth=this.dateTozero(e).join("-"),this.$refs.inputBirth.value=this.form.datebirth,this.getYears(this.form.datebirth)},cancelHandle:function(){},dateTozero:function(t){return t.map(function(t){return t<10?"0"+t:""+t})},toPrePage:function(){this.$router.push("/MemberData")},getToday:function(t){var e=t.getFullYear(),r=t.getMonth()+1;r=r<10?"0"+r:r;var s=t.getDate();return e+"/"+r+"/"+(s=s<10?"0"+s:s)},getYears:function(t){var e=this.getToday(new Date),r=Math.ceil((new Date(e+" 00:00:00").getTime()-new Date(t.replace(/-/g,"/")+" 00:00:00").getTime())/864e5);return this.ages=Math.floor(r/365),this.ages},verifyAge:function(t){var e=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$http.post("/wesupromo/web/product/checkAge",{product_id:e.product_id,who_age:"holder",policy_holder_info:{dob:t.datebirth}});case 3:if(100!=(s=r.sent).status||0!=s.data.checkAge){r.next=10;break}return e.loading=!1,e.$createToast({time:2e3,type:"txt",txt:e.$t("member_toast_age")}).show(),r.abrupt("return",!1);case 10:r.next=17;break;case 12:return r.prev=12,r.t0=r.catch(0),e.loading=!1,r.t0.msg?e.$createToast({txt:r.t0.msg,time:3e3,type:"txt"}).show():e.$createToast({txt:e.$t("request_error_title"),time:3e3,type:"txt"}).show(),r.abrupt("return",!1);case 17:return r.abrupt("return",!0);case 18:case"end":return r.stop()}},r,e,[[0,12]])}))()}}),computed:c()({},Object(l.c)(["travelInfo","MerchantId","product_id","language","userInfo","plan","ageInfo","beginProductId","protectorInfo"]),{agesInfo:function(){return this.$t("policy_holder_age").replace(/{min_age}/g,this.ageInfo.min_pp_age).replace(/{max_age}/g,this.ageInfo.max_pp_age)}})},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contain"},[r("div",{staticClass:"headTitle"},[r("i",{staticClass:"cubeic-arrow",on:{click:t.toPrePage}}),t._v(" "),r("p",[t._v(t._s(t.$t("policy_holder_title")))])]),t._v(" "),r("div",{staticClass:"hint"},[t._v(t._s(t.agesInfo))]),t._v(" "),r("div",{staticClass:"form-wrap"},[r("div",{staticClass:"title"},[t._v(t._s(t.$t("policy_holder_title")))]),t._v(" "),r("div",{ref:"inputInfo"},[r("div",{staticClass:"form-item"},[r("p",[t._v(t._s(t.$t("sex_title_1")))]),t._v(" "),r("div",{ref:"Gender",staticClass:"GenderDiv",class:{blank:"Gender"!=this.form.gender},on:{click:t.showPicker}},[t._v(t._s(this.form.gender))])]),t._v(" "),r("div",{staticClass:"form-item"},[r("p",[t._v(t._s(t.$t("account_info_lastname2")))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.surname,expression:"form.surname"}],staticClass:"Gender",attrs:{type:"text",placeholder:"Surname"},domProps:{value:t.form.surname},on:{input:function(e){e.target.composing||t.$set(t.form,"surname",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-item"},[r("p",[t._v(t._s(t.$t("account_info_firstname2")))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.givename,expression:"form.givename"}],staticClass:"Gender",attrs:{type:"text",placeholder:"Given Name"},domProps:{value:t.form.givename},on:{input:function(e){e.target.composing||t.$set(t.form,"givename",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-item"},[r("p",[t._v(t._s(t.$t("Date_of_Birth")))]),t._v(" "),r("div",{ref:"inputBirth",staticClass:"GenderDiv",class:{blank:"Date of birth"!=t.form.datebirth},on:{click:t.showDatePicker}},[t._v(t._s(this.form.datebirth))])]),t._v(" "),r("div",[r("button",{staticClass:"HKID",class:[1==t.select?"blue":""],on:{click:t.inputHkid}},[t._v("\n          "+t._s(t.$t("personal_hkid"))+"\n          "),r("i",{class:[1==t.select?"cubeic-ok":""]})]),t._v(" "),r("button",{staticClass:"passport",class:[2==t.select?"blue":""],on:{click:t.inputPassport}},[t._v("\n          "+t._s(t.$t("info_passport"))+"\n          "),r("i",{class:[2==t.select?"cubeic-ok":""]})])]),t._v(" "),r("div",{staticClass:"HK"},[r("span",{staticClass:"hkNumber"},[t._v(t._s(1==t.select?t.$t("account_info_hkid")+":":t.$t("info_passport")+":"))]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.select,expression:"select == 1"}],staticClass:"right"},[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.HKID1,expression:"form.HKID1"}],ref:"HKID1",staticClass:"IDnumber",attrs:{type:"text",placeholder:"A123456"},domProps:{value:t.form.HKID1},on:{input:function(e){e.target.composing||t.$set(t.form,"HKID1",e.target.value)}}})])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:2==t.select,expression:"select == 2"}],staticClass:"right"},[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.HKID_passport,expression:"form.HKID_passport"}],ref:"HKID_passport",staticClass:"IDnumber",class:[2==t.select?"width":""],attrs:{type:"text",placeholder:"A123456"},domProps:{value:t.form.HKID_passport},on:{input:function(e){e.target.composing||t.$set(t.form,"HKID_passport",e.target.value)}}})])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.select,expression:"select==1? true:false"}],staticClass:"remark",staticStyle:{color:"rgb(74, 74, 74)"}},[r("p",[t._v(t._s(t.$t("card_hk_desc")))])])])]),t._v(" "),r("div",{staticClass:"button-bar"},[r("button",{staticClass:"proceed",on:{click:t.confirm}},[t._v(t._s(t.$t("confirm")))])]),t._v(" "),r("cube-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},staticRenderFns:[]};var f=r("VU/8")(u,m,!1,function(t){r("Y8qL")},"data-v-7c62f112",null);e.default=f.exports},Y8qL:function(t,e){}});