webpackJsonp([10],{"0GHm":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("Xxa5"),a=r.n(s),o=r("exGp"),i=r.n(o),n=r("Dd8w"),c=r.n(n),l=r("NYxO"),m={name:"formItem",data:function(){return{form:{gender:"Gender",surname:"",givename:"",datebirth:"Date of birth",HKID_passport:"",HKID1:"",HKID2:"",title:"Policyholder"},select:1,ages:""}},created:function(){console.log(this.form),this.getProtectorInfo(),console.log(this.form),console.log(this.certificateId),this.certificateId||this.$router.push("/index/"+this.MerchantId+"/"+this.product_id+"/"+this.language)},methods:c()({},Object(l.b)(["setProtectorInfo"]),{inputHkid:function(){""!=this.$refs.HKID_passport.value.trim()?(this.$createToast({txt:this.$t("onlyOne"),time:3e3,type:"txt"}).show(),this.select=2):this.select=1},inputPassport:function(){""!=this.$refs.HKID1.value.trim()||""!=this.$refs.HKID2.value.trim()?(this.$createToast({txt:this.$t("onlyOne"),time:3e3,type:"txt"}).show(),this.select=1):this.select=2},confirm:function(){var e=this;return i()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.form),""!=e.form.datebirth&&""!=e.form.givename&&""!=e.form.gender&&""!=e.form.surname){t.next=4;break}return e.$createToast({txt:e.$t("insurance_toast"),time:3e3,type:"txt"}).show(),t.abrupt("return",!1);case 4:if(""!=e.form.HKID1||""!=e.form.HKID_passport){t.next=7;break}return e.$createToast({txt:e.$t("insurance_toast"),time:3e3,type:"txt"}).show(),t.abrupt("return",!1);case 7:if(""==e.form.HKID1||""!=e.form.HKID2){t.next=10;break}return e.$createToast({txt:e.$t("insurance_toast"),time:3e3,type:"txt"}).show(),t.abrupt("return",!1);case 10:if(!(e.ages<18)){t.next=13;break}return e.$createToast({txt:e.$t("policyholder_number"),time:3e3,type:"txt"}).show(),t.abrupt("return",!1);case 13:return t.next=15,e.verifyUserFrom(e.form);case 15:if(0!=(r=t.sent)){t.next=18;break}return t.abrupt("return",!1);case 18:console.log(r),1==r&&(e.form.gender=e.form.gender||"",e.form.surname=e.form.surname||"",e.form.givename=e.form.givename||"",e.form.datebirth=e.form.datebirth||"",e.form.HKID1=e.form.HKID1||"",e.form.HKID2=e.form.HKID2||"",e.form.HKID_passport=e.form.HKID_passport||"",e.form.title="Policyholder",e.setProtectorInfo(e.form),e.$router.push({path:"/confirmOrder"}));case 20:case"end":return t.stop()}},t,e)}))()},getProtectorInfo:function(){if(console.log(this.$store.state.protectorInfo),this.$store.state.protectorInfo){for(var e in console.log("当protectorInfo有值时,把值赋值给form"),this.$store.state.protectorInfo)this.form[e]=this.$store.state.protectorInfo[e];""!=this.form.HKID_passport&&(this.select=2)}this.getYears()},verifyUserFrom:function(e){var t=this;return i()(a.a.mark(function e(){var r,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,""==t.form.HKID1){e.next=19;break}return s=t.form.HKID1+t.form.HKID2,console.log(s),e.prev=4,e.next=7,t.$http.post("/wesupromo/web/validate/validateHKIDWithLng",{language:"tc",hkid:s});case 7:o=e.sent,console.log(o),console.log(o.status),e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(4),console.log(e.t0),0!=e.t0.data.is_valid){e.next=19;break}return t.$createToast({time:3500,type:"txt",txt:e.t0.msg}).show(),e.abrupt("return",!1);case 19:return r=!0,console.log(r),e.abrupt("return",r);case 22:case"end":return e.stop()}},e,t,[[4,12]])}))()},showPicker:function(){var e=[{text:this.$t("Female"),value:"Male"},{text:this.$t("Male"),value:"Female"}];this.picker||(this.picker=this.$createPicker({title:this.$t("Gender"),data:[e],cancelTxt:this.$t("cancel"),confirmTxt:this.$t("confirm"),onSelect:this.selectGender,onCancel:this.cancelGender})),this.picker.show()},selectGender:function(e,t,r){this.form.gender=r.join(" "),console.log(this.form.gender)},cancelGender:function(){},showDatePicker:function(){this.datePicker||(this.datePicker=this.$createDatePicker({title:this.$t("account_info_birthday"),min:new Date(1900,1,1),max:new Date,value:new Date(1980,5,20),cancelTxt:this.$t("cancel"),confirmTxt:this.$t("confirm"),onSelect:this.selectHandle,onCancel:this.cancelHandle})),this.datePicker.show()},selectHandle:function(e,t,r){this.form.datebirth=this.dateTozero(t).join("-"),console.log(this.form.datebirth),this.$refs.inputBirth.value=this.form.datebirth,this.getYears()},cancelHandle:function(){},dateTozero:function(e){return e.map(function(e){return e<10?"0"+e:""+e})},toPrePage:function(){this.$router.push("/MemberData")},getToday:function(e){var t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var s=e.getDate();return t+"/"+r+"/"+(s=s<10?"0"+s:s)},getYears:function(){var e=this.getToday(new Date),t=Math.ceil((new Date(e+" 00:00:00").getTime()-new Date(this.form.datebirth.replace(/-/g,"/")+" 00:00:00").getTime())/864e5);this.ages=Math.floor(t/365),console.log(this.ages+"岁")}}),computed:c()({},Object(l.c)(["travelInfo","MerchantId","product_id","language","plan","certificateId"]))},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contain"},[r("div",{staticClass:"headTitle"},[r("i",{staticClass:"cubeic-arrow",on:{click:e.toPrePage}}),e._v(" "),r("p",[e._v(e._s(e.$t("policyholder")))])]),e._v(" "),r("div",{staticClass:"hint"},[e._v(e._s(e.$t("policyholder_number")))]),e._v(" "),r("div",{staticClass:"form-wrap"},[r("div",{staticClass:"title"},[e._v(e._s(e.$t("policyholder")))]),e._v(" "),r("div",{ref:"inputInfo"},[r("div",{staticClass:"form-item"},[r("p",[e._v(e._s(e.$t("sex_title_1")))]),e._v(" "),r("div",{ref:"Gender",staticClass:"GenderDiv",class:{blank:"Gender"!=this.form.gender},on:{click:e.showPicker}},[e._v(e._s(this.form.gender))])]),e._v(" "),r("div",{staticClass:"form-item"},[r("p",[e._v(e._s(e.$t("Surname")))]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.surname,expression:"form.surname"}],staticClass:"Gender",attrs:{type:"text",placeholder:"Surname"},domProps:{value:e.form.surname},on:{input:function(t){t.target.composing||e.$set(e.form,"surname",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-item"},[r("p",[e._v(e._s(e.$t("Given_Name")))]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.givename,expression:"form.givename"}],staticClass:"Gender",attrs:{type:"text",placeholder:"Given Name"},domProps:{value:e.form.givename},on:{input:function(t){t.target.composing||e.$set(e.form,"givename",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-item"},[r("p",[e._v(e._s(e.$t("Date_of_Birth")))]),e._v(" "),r("div",{ref:"inputBirth",staticClass:"GenderDiv",class:{blank:"Date of birth"!=e.form.datebirth},on:{click:e.showDatePicker}},[e._v(e._s(this.form.datebirth))])]),e._v(" "),r("div",[r("button",{staticClass:"HKID",class:[1==e.select?"blue":""],on:{click:e.inputHkid}},[e._v("\n          "+e._s(e.$t("personal_hkid"))+"\n          "),r("i",{class:[1==e.select?"cubeic-ok":""]})]),e._v(" "),r("button",{staticClass:"passport",class:[2==e.select?"blue":""],on:{click:e.inputPassport}},[e._v("\n          "+e._s(e.$t("info_passport"))+"\n          "),r("i",{class:[2==e.select?"cubeic-ok":""]})])]),e._v(" "),r("div",{staticClass:"HK"},[r("span",{staticClass:"hkNumber"},[e._v(e._s(1==e.select?e.$t("account_info_hkid")+":":e.$t("info_passport")+":"))]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:1==e.select,expression:"select == 1"}],staticClass:"right"},[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.HKID1,expression:"form.HKID1"}],ref:"HKID1",staticClass:"IDnumber",attrs:{type:"text",placeholder:"A123456"},domProps:{value:e.form.HKID1},on:{input:function(t){t.target.composing||e.$set(e.form,"HKID1",t.target.value)}}})]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:1==e.select,expression:"select == 1"}]},[e._v("(")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:1==e.select,expression:"select == 1"}]},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.HKID2,expression:"form.HKID2"}],ref:"HKID2",staticClass:"num",attrs:{type:"text",placeholder:"7"},domProps:{value:e.form.HKID2},on:{input:function(t){t.target.composing||e.$set(e.form,"HKID2",t.target.value)}}})]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:1==e.select,expression:"select == 1"}]},[e._v(")")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:2==e.select,expression:"select == 2"}],staticClass:"right"},[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.HKID_passport,expression:"form.HKID_passport"}],ref:"HKID_passport",staticClass:"IDnumber",class:[2==e.select?"width":""],attrs:{type:"text",placeholder:"A123456"},domProps:{value:e.form.HKID_passport},on:{input:function(t){t.target.composing||e.$set(e.form,"HKID_passport",t.target.value)}}})])])])])]),e._v(" "),r("div",{staticClass:"button-bar"},[r("button",{staticClass:"proceed",on:{click:e.confirm}},[e._v(e._s(e.$t("confirm")))])])])},staticRenderFns:[]};var u=r("VU/8")(m,f,!1,function(e){r("T4O4")},"data-v-fc8756c0",null);t.default=u.exports},T4O4:function(e,t){}});
//# sourceMappingURL=10.c10c217d6e346e793add.js.map