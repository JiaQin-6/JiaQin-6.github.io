(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d8ce33b"],{"59ff":function(e,t,r){"use strict";var i=r("928a"),a=r.n(i);a.a},"5d58":function(e,t,r){e.exports=r("d8d6")},"67bb":function(e,t,r){e.exports=r("f921")},7618:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var i=r("5d58"),a=r.n(i),o=r("67bb"),n=r.n(o);function l(e){return l="function"===typeof n.a&&"symbol"===typeof a.a?function(e){return typeof e}:function(e){return e&&"function"===typeof n.a&&e.constructor===n.a&&e!==n.a.prototype?"symbol":typeof e},l(e)}function s(e){return s="function"===typeof n.a&&"symbol"===l(a.a)?function(e){return l(e)}:function(e){return e&&"function"===typeof n.a&&e.constructor===n.a&&e!==n.a.prototype?"symbol":l(e)},s(e)}},"928a":function(e,t,r){},"9b19":function(e,t,r){},c538:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.V_loading,expression:"V_loading"}],staticClass:"container"},[r("div",{staticClass:"main"},[r("div",{staticClass:"main_wrap"},[r("h2",[e._v(e._s(e.$t("Broker_List")))]),r("el-button",{staticClass:"addBtn",staticStyle:{"border-radius":"5px","margin-right":"20px"},attrs:{round:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.AddedDialog}},[e._v(e._s(e.$t("Add_Broker")))])],1),r("el-table",{attrs:{data:e.tableData,border:"",stripe:"","row-style":{height:"80px"}}},[r("el-table-column",{attrs:{label:e.$t("Broker_Table_Label4"),prop:"brokerLogo","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.brokerLogo,expression:"scope.row.brokerLogo"}],staticStyle:{"max-width":"120px","max-height":"50px"}})]}}])}),r("el-table-column",{attrs:{label:e.$t("Broker_Table_Label2"),prop:"brokerCode","min-width":"120px"}}),r("el-table-column",{attrs:{label:e.$t("Broker_Table_Label5"),prop:"brokerName","min-width":"150px"}}),r("el-table-column",{attrs:{label:e.$t("Broker_Table_Label3"),prop:"brokerEmail","min-width":"150px"}}),r("el-table-column",{attrs:{label:e.$t("Broker_Table_Label6"),prop:"brokerNumber","min-width":"120px"}}),r("el-table-column",{attrs:{label:e.$t("Channel_Table_Label6"),prop:"brokerCountry","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.countryList[t.row.brokerCountry])+"\n        ")]}}])}),r("el-table-column",{attrs:{label:e.$t("last_updated"),prop:"createTime","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.updateTime?t.row.updateTime.substring(0,10):t.row.createTime.substring(0,10))+"\n        ")]}}])}),r("el-table-column",{attrs:{label:e.$t("Operation"),"min-width":"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning",size:"mini",icon:"el-icon-s-tools"},on:{click:function(r){return e.showEditDialog(t.row)}}},[e._v(e._s(e.$t("Modify")))])]}}])})],1),r("el-pagination",{attrs:{"current-page":this.currentPage,"page-sizes":[5,10,20,30,50],"page-size":this.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.addDialogVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addedClosed}},[r("el-form",{ref:"addruleFormRef",attrs:{model:e.ruleForm,"status-icon":"",rules:e.oneRules,"label-width":"132px"}},[r("el-form-item",{attrs:{label:e.$t("Broker_Table_Label4")+":",prop:"logoUrl"}},[r("div",{staticClass:"upload"},[r("dragUpload",{staticStyle:{"margin-left":"135px",width:"50%"},attrs:{isAvatar:e.isAvatar,fileType:"image",isShow:e.isShow,fixedNumberList:[7,5]},on:{GetUpload:function(t){e.GetUpload(t)},show:function(t){e.show(t)}}}),e.ruleForm.logoUrl&&"editEquipment"==e.dialogStatus?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.ruleForm.logoUrl,expression:"ruleForm.logoUrl"}],attrs:{alt:""}}):e._e()],1)]),r("el-form-item",{attrs:{label:e.$t("Broker_Table_Label2")+":",prop:"code"}},[r("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule2")},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-form-item",{attrs:{label:e.$t("Broker_Table_Label5")+":",prop:"name"}},[r("div",[r("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule5")},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)]),r("el-form-item",{attrs:{label:e.$t("Broker_Table_Label3")+":",prop:"email"}},[r("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Merchant_Form_rule3")},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:e.$t("Broker_Table_Label6")+":",prop:"phone"}},[r("el-input",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{type:"text",placeholder:e.$t("Broker_Form_rule6")},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:e.$t("Channel_Table_Label6")+":",prop:"country"}},[r("el-select",{staticClass:"mleft1",staticStyle:{width:"86%"},attrs:{placeholder:e.$t("Channel_Form_rule6")},model:{value:e.ruleForm.country,callback:function(t){e.$set(e.ruleForm,"country",t)},expression:"ruleForm.country"}},e._l(e.countryOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"canBtn",on:{click:function(t){e.addDialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),r("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){return e.Submit("addruleFormRef")}}},[e._v(e._s(e.$t("Confirm")))])],1)],1)],1)])},a=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("c5f6"),r("7f7f"),r("96cf"),r("3b8d")),n=r("bd86"),l=r("2f62"),s=r("f6d4"),c=r("31c6");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d={components:{dragUpload:s["a"],TinymceEditor:c["a"]},data:function(){var e=this,t=function(t,r,i){var a=/[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)/;if(a.test(r))return i();i(new Error(e.$t("Channel_Form_email")))};return{activeName:"1",isAvatar:"",V_loading:!1,tableData:[],dialogStatus:"",titleMap:{addEquipment:this.$t("Add_Broker"),editEquipment:this.$t("Modify")},currentPage:1,pageSize:5,total:0,addDialogVisible:!1,ruleForm:{email:"",code:"",logoUrl:"",phone:"",name:"",country:""},brokerID:"",countryOptions:[{value:825,label:this.$t("HongKong")},{value:62,label:this.$t("Indonesia")},{value:44,label:this.$t("United_Kingdom")},{value:65,label:this.$t("Singapore")},{value:66,label:this.$t("Thailand")}],countryList:{825:this.$t("HongKong"),62:this.$t("Indonesia"),44:this.$t("United_Kingdom"),65:this.$t("Singapore")},oneRules:{code:[{required:!0,message:this.$t("Broker_Form_rule2"),trigger:"blur"}],email:[{required:!0,message:this.$t("Broker_Form_rule3"),trigger:"blur"},{validator:t,trigger:"blur"}],phone:[{required:!0,message:this.$t("Broker_Form_rule6"),trigger:"blur"}],logoUrl:[{required:!0,message:this.$t("Broker_Form_rule4"),trigger:"blur"}],name:[{required:!0,message:this.$t("Broker_Form_rule5"),trigger:"blur"}],country:[{required:!0,message:this.$t("Channel_Form_rule6"),trigger:"blur"}]},req_FormData:null,file:null,typeId:"",isShow:!0}},computed:p({},Object(l["c"])(["AccountData","AWSAccountData"])),created:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getBrokerList();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},methods:{GetUpload:function(e){this.file=e,this.UploadImg()},show:function(e){this.isShow=e},UploadImg:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.req_FormData=new FormData,this.req_FormData.append("file",this.file),this.req_FormData.append("path",this.AccountData.dtxAccountId+"/"+this.AccountData.subId+"/"+this.PageComponent+"/channel"),this.req_FormData.append("permissionsType","publicUpload"),e.prev=4,e.next=7,this.$http.DtxFile(this.req_FormData);case 7:t=e.sent,200==t.data.status?this.ruleForm.logoUrl=t.data.data[0]:this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.$alert(this.$t("request_error_title"),"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}});case 14:case"end":return e.stop()}},e,this,[[4,11]])}));function t(){return e.apply(this,arguments)}return t}(),AddedDialog:function(){this.addDialogVisible=!0,this.dialogStatus="addEquipment",this.isAvatar="no",this.ruleForm.email="",this.ruleForm.code="",this.ruleForm.logoUrl="",this.ruleForm.name="",this.ruleForm.phone="",this.ruleForm.country=""},Submit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,r.createBroker();case 3:r.addDialogVisible=!1,e.next=7;break;case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),createBroker:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.V_loading=!0,t={companyId:this.AccountData.dtxAccountId,brokerCode:this.ruleForm.code,email:this.ruleForm.email,logoUrl:this.ruleForm.logoUrl,name:this.ruleForm.name,number:this.ruleForm.phone,country:this.ruleForm.country},"editEquipment"==this.dialogStatus&&(t.id=Number(this.brokerID)),e.prev=3,e.next=6,this.$http.createBroker(t);case 6:if(r=e.sent,200!=r.data.status){e.next=16;break}return this.addDialogVisible=!1,this.V_loading=!1,this.ruleForm={email:"",code:"",logoUrl:"",phone:"",name:"",country:""},this.brokerID="",e.next=14,this.getBrokerList();case 14:e.next=19;break;case 16:this.addDialogVisible=!1,this.V_loading=!1,this.$alert(r.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](3),this.V_loading=!1;case 24:this.isShow=!1;case 25:case"end":return e.stop()}},e,this,[[3,21]])}));function t(){return e.apply(this,arguments)}return t}(),getBrokerList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.V_loading=!0,e.prev=1,e.next=4,this.$http.getBrokerList({companyId:this.AccountData.dtxAccountId},{nowPage:this.currentPage,pageSize:this.pageSize});case 4:t=e.sent,200==t.data.status?(this.tableData=t.data.data,this.total=t.data.data.total,this.V_loading=!1):this.$alert(t.data.msg,"",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.V_loading=!1;case 11:case"end":return e.stop()}},e,this,[[1,8]])}));function t(){return e.apply(this,arguments)}return t}(),showEditDialog:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.addDialogVisible=!0,this.isAvatar="no",this.dialogStatus="editEquipment",this.ruleForm.logoUrl=t.brokerLogo,this.ruleForm.code=t.brokerCode,this.ruleForm.name=t.brokerName,this.ruleForm.email=t.brokerEmail,this.ruleForm.phone=t.brokerNumber,this.ruleForm.country=Number(t.brokerCountry),this.brokerID=t.id;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addedClosed:function(){this.$refs.addruleFormRef.resetFields(),this.file="",this.isAvatar="ok"},handleSizeChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.pageSize=t,e.next=3,this.getBrokerList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleCurrentChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentPage=t,e.next=3,this.getBrokerList();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},m=d,f=(r("59ff"),r("2877")),h=Object(f["a"])(m,i,a,!1,null,"05d365db",null);t["default"]=h.exports},e073a:function(e,t,r){"use strict";var i=r("9b19"),a=r.n(i);a.a},f6d4:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{ref:"upload",staticClass:"uploadPDF",attrs:{action:e.action,"show-file-list":!1,"before-upload":e.beforeUpload,"auto-upload":!0,drag:"",multiple:""}},[e.imageUrl&&e.isShow?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("span",[r("i",{directives:[{name:"show",rawName:"v-show",value:!e.fileName,expression:"!fileName"}],staticClass:"el-icon-upload avatar-uploader-icon"}),r("span",[e._v(e._s(e.$t("Drag_and_Drop_file")))])]),e.imageUrl?e._e():r("p",{staticClass:"pdfFile",on:{click:e.viewfile}},[e._v(e._s(e.fileName))])]),r("el-dialog",{attrs:{title:e.$t("Picture_Clipping"),visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"cropper-content"},[r("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[r("VueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,fixed:e.option.fixed,fixedNumber:e.option.fixedNumber,centerBox:e.option.centerBox,infoTrue:e.option.infoTrue,fixedBox:e.option.fixedBox}})],1)]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.finish}},[e._v(e._s(e.$t("Confirm")))])],1)])],1)},a=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("28a5"),r("7f7f"),r("7618")),n=(r("96cf"),r("3b8d")),l=r("bd86"),s=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){Object(l["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p={props:{url:{type:String,default:""},fileType:{type:String,default:""},excelOnlineName:{type:String,default:""},isAvatar:{type:String,default:""},isShow:{type:Boolean,default:!0},fixedNumberList:{type:Array,default:[7,5]}},data:function(){return{action:window.BASE_URL+"/v1/upload/dtxFile",file:"",fileName:"",fileData:"",imageUrl:"",dialogVisible:!1,option:{img:"",info:!0,outputSize:.8,outputType:"png",canScale:!1,autoCrop:!0,fixedBox:!1,fixed:!1,fixedNumber:[7,5],full:!0,canMoveBox:!0,original:!1,centerBox:!0,infoTrue:!0},fileinfo:"",picsList:[],loading:!1}},computed:u({},Object(s["c"])(["AccountData"]),{onlineImageUrl:function(){this.url&&(this.imageUrl=this.url),this.excelOnlineName&&(this.fileName="Price.xls",this.fileData=this.excelOnlineName)}}),watch:{onlineImageUrl:function(e){},isAvatar:function(e){"ok"==e&&(this.imageUrl="")}},created:function(){},methods:{getUploadFile1:function(e){},getUploadFile:function(e,t){var r=this,i=e.raw;this.fileinfo=e;var a=new FileReader;a.onload=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i="object"===Object(o["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result],{type:"image/jpeg"})):t.target.result,r.option.img=i,r.dialogVisible=!0;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.readAsArrayBuffer(i),this.option.fixedNumber=this.fixedNumberList},changeUpload:function(e,t){var r=this,i=e.size/1024/1024<5;if(!i)return this.$message.error("上传文件大小不能超过 5MB!"),!1;this.fileinfo=e,this.$nextTick(function(){try{r.option.imgObject=e}catch(t){r.option.img=window.URL.createObjectURL(e)}r.dialogVisible=!0})},finish:function(){var e=this;this.$refs.cropper.getCropBlob(function(t){var r=new FormData;r.append("file",new window.File([t],"cropper"+e.fileinfo.raw.name,{type:e.fileinfo.raw.type})),e.imageUrl=URL.createObjectURL(r.get("file")),e.$emit("GetUpload",r.get("file")),e.dialogVisible=!1})},beforeUpload:function(e){if("image"==this.fileType)var t="png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0];else t="pdf"==e.name.split(".").slice(-1)[0]||"png"==e.name.split(".").slice(-1)[0]||"jpg"==e.name.split(".").slice(-1)[0]||"jpeg"==e.name.split(".").slice(-1)[0]||"gif"==e.name.split(".").slice(-1)[0]||"svg"==e.name.split(".").slice(-1)[0]||"xlsx"==e.name.split(".").slice(-1)[0]||"xls"==e.name.split(".").slice(-1)[0]||void 0;if(t){if("pdf"==e.name.split(".").slice(-1)||"xlsx"==e.name.split(".").slice(-1)||"xls"==e.name.split(".").slice(-1)){this.fileName=e.name,this.imageUrl="";var r=new FileReader;r.readAsDataURL(e);var i=this;return r.onload=function(){i.fileData=r.result},this.$emit("GetUpload",e),!1}this.fileName="",this.fileData="",this.imageUrl=URL.createObjectURL(e),this.$emit("GetUpload",e),this.$emit("show",!0);var a=e.size/1024/1024<5;return a||this.$alert("上传图片大小不能超过 5MB!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}}),a}this.$alert("Document does not comply!","",{confirmButtonText:this.$t("Confirm"),callback:function(e){}})},viewfile:function(){var e=window.open();e.document.write('<body style="margin:0px;"><object data="'+this.fileData+'" type="application/pdf" width="100%" height="100%"><iframe src="'+this.fileData+'" scrolling="no" width="100%" height="100%" frameborder="0" ></iframe></object></body>')}}},d=p,m=(r("e073a"),r("2877")),f=Object(m["a"])(d,i,a,!1,null,"e535f140",null);t["a"]=f.exports}}]);